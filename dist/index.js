var Y$=Object.create;var{getPrototypeOf:A$,defineProperty:_8,getOwnPropertyNames:P$}=Object;var S$=Object.prototype.hasOwnProperty;var j6=(w,z,U)=>{U=w!=null?Y$(A$(w)):{};let $=z||!w||!w.__esModule?_8(U,"default",{value:w,enumerable:!0}):U;for(let _ of P$(w))if(!S$.call($,_))_8($,_,{get:()=>w[_],enumerable:!0});return $};var m5=(w,z)=>()=>(z||w((z={exports:{}}).exports,z),z.exports);var n1=(w,z)=>{for(var U in z)_8(w,U,{get:z[U],enumerable:!0,configurable:!0,set:($)=>z[U]=()=>$})};var O5=m5((J9)=>{Object.defineProperty(J9,"__esModule",{value:!0});J9.parse=AY;J9.serialize=PY;var WY=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,XY=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,ZY=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,QY=/^[\u0020-\u003A\u003D-\u007E]*$/,JY=Object.prototype.toString,YY=(()=>{let w=function(){};return w.prototype=Object.create(null),w})();function AY(w,z){let U=new YY,$=w.length;if($<2)return U;let _=z?.decode||SY,B=0;do{let q=w.indexOf("=",B);if(q===-1)break;let W=w.indexOf(";",B),X=W===-1?$:W;if(q>X){B=w.lastIndexOf(";",q-1)+1;continue}let J=Z9(w,B,q),Q=Q9(w,q,J),P=w.slice(J,Q);if(U[P]===void 0){let N=Z9(w,q+1,X),Z=Q9(w,X,N),O=_(w.slice(N,Z));U[P]=O}B=X+1}while(B<$);return U}function Z9(w,z,U){do{let $=w.charCodeAt(z);if($!==32&&$!==9)return z}while(++z<U);return U}function Q9(w,z,U){while(z>U){let $=w.charCodeAt(--z);if($!==32&&$!==9)return z+1}return U}function PY(w,z,U){let $=U?.encode||encodeURIComponent;if(!WY.test(w))throw new TypeError(`argument name is invalid: ${w}`);let _=$(z);if(!XY.test(_))throw new TypeError(`argument val is invalid: ${z}`);let B=w+"="+_;if(!U)return B;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);B+="; Max-Age="+U.maxAge}if(U.domain){if(!ZY.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);B+="; Domain="+U.domain}if(U.path){if(!QY.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);B+="; Path="+U.path}if(U.expires){if(!MY(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);B+="; Expires="+U.expires.toUTCString()}if(U.httpOnly)B+="; HttpOnly";if(U.secure)B+="; Secure";if(U.partitioned)B+="; Partitioned";if(U.priority)switch(typeof U.priority==="string"?U.priority.toLowerCase():U.sameSite){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite==="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return B}function SY(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch(z){return w}}function MY(w){return JY.call(w)==="[object Date]"}});var e4=m5((Hk,P9)=>{var Y9=12,GY=0,C5=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function RY(w){var z=w.indexOf("%");if(z===-1)return w;var U=w.length,$="",_=0,B=0,q=z,W=Y9;while(z>-1&&z<U){var X=A9(w[z+1],4),J=A9(w[z+2],0),Q=X|J,P=C5[Q];if(W=C5[256+W+P],B=B<<6|Q&C5[364+P],W===Y9)$+=w.slice(_,q),$+=B<=65535?String.fromCharCode(B):String.fromCharCode(55232+(B>>10),56320+(B&1023)),B=0,_=z+3,z=q=w.indexOf("%",_);else if(W===GY)return null;else{if(z+=3,z<U&&w.charCodeAt(z)===37)continue;return null}}return $+w.slice(_)}var NY={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function A9(w,z){var U=NY[w];return U===void 0?255:U<<z}P9.exports=RY});function x4(w){return a2(w)&&Symbol.asyncIterator in w}function k4(w){return a2(w)&&Symbol.iterator in w}function b2(w){return a2(w)&&(Object.getPrototypeOf(w)===Object.prototype||Object.getPrototypeOf(w)===null)}function V4(w){return w instanceof Promise}function R0(w){return w instanceof Date&&Number.isFinite(w.getTime())}function f0(w){return ArrayBuffer.isView(w)}function J6(w){return w instanceof globalThis.Uint8Array}function s(w,z){return z in w}function a2(w){return w!==null&&typeof w==="object"}function h(w){return Array.isArray(w)&&!ArrayBuffer.isView(w)}function x2(w){return w===void 0}function R1(w){return w===null}function $1(w){return typeof w==="boolean"}function t(w){return typeof w==="number"}function f4(w){return Number.isInteger(w)}function e2(w){return typeof w==="bigint"}function m(w){return typeof w==="string"}function g4(w){return typeof w==="function"}function J0(w){return typeof w==="symbol"}function N0(w){return e2(w)||$1(w)||R1(w)||t(w)||m(w)||J0(w)||x2(w)}var d2;(function(w){w.ExactOptionalPropertyTypes=!1,w.AllowArrayObject=!1,w.AllowNaN=!1,w.AllowNullVoid=!1;function z(q,W){return w.ExactOptionalPropertyTypes?W in q:q[W]!==void 0}w.IsExactOptionalProperty=z;function U(q){let W=a2(q);return w.AllowArrayObject?W:W&&!h(q)}w.IsObjectLike=U;function $(q){return U(q)&&!(q instanceof Date)&&!(q instanceof Uint8Array)}w.IsRecordLike=$;function _(q){return w.AllowNaN?t(q):Number.isFinite(q)}w.IsNumberLike=_;function B(q){let W=x2(q);return w.AllowNullVoid?W||q===null:W}w.IsVoidLike=B})(d2||(d2={}));var G2={};n1(G2,{Set:()=>R$,Has:()=>G$,Get:()=>N$,Entries:()=>M$,Delete:()=>H$,Clear:()=>L$});var Y6=new Map;function M$(){return new Map(Y6)}function L$(){return Y6.clear()}function H$(w){return Y6.delete(w)}function G$(w){return Y6.has(w)}function R$(w,z){Y6.set(w,z)}function N$(w){return Y6.get(w)}var k2={};n1(k2,{Set:()=>I$,Has:()=>C$,Get:()=>F$,Entries:()=>b$,Delete:()=>O$,Clear:()=>D$});var A6=new Map;function b$(){return new Map(A6)}function D$(){return A6.clear()}function O$(w){return A6.delete(w)}function C$(w){return A6.has(w)}function I$(w,z){A6.set(w,z)}function F$(w){return A6.get(w)}var E2=Symbol.for("TypeBox.Transform"),_1=Symbol.for("TypeBox.Readonly"),U0=Symbol.for("TypeBox.Optional"),b0=Symbol.for("TypeBox.Hint"),M=Symbol.for("TypeBox.Kind");function K6(w={}){return{...w,[M]:w[M]??"Unsafe"}}class n extends Error{constructor(w){super(w)}}class B8 extends n{constructor(w){super(`Duplicate type kind '${w}' detected`)}}class q8 extends n{constructor(w){super(`Duplicate string format '${w}' detected`)}}var B1;(function(w){function z($,_){if(k2.Has($))throw new B8($);return k2.Set($,_),(B={})=>K6({...B,[M]:$})}w.Type=z;function U($,_){if(G2.Has($))throw new q8($);return G2.Set($,_),$}w.Format=U})(B1||(B1={}));function z2(w){return{[M]:"MappedResult",properties:w}}var A0={};n1(A0,{IsUndefined:()=>V2,IsUint8Array:()=>v1,IsSymbol:()=>Y8,IsString:()=>O2,IsRegExp:()=>J8,IsObject:()=>D2,IsNumber:()=>o0,IsNull:()=>Q8,IsIterator:()=>Z8,IsFunction:()=>X8,IsDate:()=>x6,IsBoolean:()=>f1,IsBigInt:()=>E6,IsAsyncIterator:()=>W8,IsArray:()=>Y0});function W8(w){return D2(w)&&!Y0(w)&&!v1(w)&&Symbol.asyncIterator in w}function Y0(w){return Array.isArray(w)}function E6(w){return typeof w==="bigint"}function f1(w){return typeof w==="boolean"}function x6(w){return w instanceof globalThis.Date}function X8(w){return typeof w==="function"}function Z8(w){return D2(w)&&!Y0(w)&&!v1(w)&&Symbol.iterator in w}function Q8(w){return w===null}function o0(w){return typeof w==="number"}function D2(w){return typeof w==="object"&&w!==null}function J8(w){return w instanceof globalThis.RegExp}function O2(w){return typeof w==="string"}function Y8(w){return typeof w==="symbol"}function v1(w){return w instanceof globalThis.Uint8Array}function V2(w){return w===void 0}function j$(w){return w.map((z)=>T4(z))}function K$(w){return new Date(w.getTime())}function E$(w){return new Uint8Array(w)}function x$(w){return new RegExp(w.source,w.flags)}function k$(w){let z={};for(let U of Object.getOwnPropertyNames(w))z[U]=T4(w[U]);for(let U of Object.getOwnPropertySymbols(w))z[U]=T4(w[U]);return z}function T4(w){return Y0(w)?j$(w):x6(w)?K$(w):v1(w)?E$(w):J8(w)?x$(w):D2(w)?k$(w):w}function s5(w){return T4(w)}function t2(w){return w.map((z)=>E(z))}function E(w,z={}){return{...s5(w),...z}}function V$(w,z){let{[z]:U,...$}=w;return $}function c2(w,z){return z.reduce((U,$)=>V$(U,$),w)}function k6(w,z={}){return{...z,[M]:"Array",type:"array",items:E(w)}}function V6(w,z={}){return{...z,[M]:"AsyncIterator",type:"AsyncIterator",items:E(w)}}function f6(w,z,U){return{...U,[M]:"Constructor",type:"Constructor",parameters:t2(w),returns:E(z)}}function N1(w,z,U){return{...U,[M]:"Function",type:"Function",parameters:t2(w),returns:E(z)}}function Q2(w={}){return{...w,[M]:"Never",not:{}}}function l5(w){return D2(w)&&w[_1]==="Readonly"}function q1(w){return D2(w)&&w[U0]==="Optional"}function f$(w){return U2(w,"Any")}function b1(w){return U2(w,"Array")}function g6(w){return U2(w,"AsyncIterator")}function A8(w){return U2(w,"BigInt")}function P8(w){return U2(w,"Boolean")}function T6(w){return U2(w,"Constructor")}function g$(w){return U2(w,"Date")}function d6(w){return U2(w,"Function")}function p1(w){return U2(w,"Integer")}function y2(w){return U2(w,"Intersect")}function t6(w){return U2(w,"Iterator")}function U2(w,z){return D2(w)&&M in w&&w[M]===z}function D1(w){return U2(w,"Literal")}function D0(w){return U2(w,"MappedKey")}function j2(w){return U2(w,"MappedResult")}function P6(w){return U2(w,"Never")}function T$(w){return U2(w,"Not")}function d$(w){return U2(w,"Null")}function o1(w){return U2(w,"Number")}function v2(w){return U2(w,"Object")}function u1(w){return U2(w,"Promise")}function S8(w){return U2(w,"Record")}function M8(w){return U2(w,"Ref")}function L8(w){return U2(w,"RegExp")}function c6(w){return U2(w,"String")}function t$(w){return U2(w,"Symbol")}function O0(w){return U2(w,"TemplateLiteral")}function c$(w){return U2(w,"This")}function S6(w){return D2(w)&&E2 in w}function u0(w){return U2(w,"Tuple")}function y$(w){return U2(w,"Undefined")}function W2(w){return U2(w,"Union")}function i$(w){return U2(w,"Uint8Array")}function h$(w){return U2(w,"Unknown")}function n$(w){return U2(w,"Unsafe")}function v$(w){return U2(w,"Void")}function p$(w){return D2(w)&&M in w&&O2(w[M])}function C0(w){return f$(w)||b1(w)||P8(w)||A8(w)||g6(w)||T6(w)||g$(w)||d6(w)||p1(w)||y2(w)||t6(w)||D1(w)||D0(w)||j2(w)||P6(w)||T$(w)||d$(w)||o1(w)||v2(w)||u1(w)||S8(w)||M8(w)||L8(w)||c6(w)||t$(w)||O0(w)||c$(w)||u0(w)||y$(w)||W2(w)||i$(w)||h$(w)||n$(w)||v$(w)||p$(w)}function u$(w){return c2(E(w),[U0])}function m$(w){return{...E(w),[U0]:"Optional"}}function s$(w,z){return z===!1?u$(w):m$(w)}function W0(w,z){let U=z??!0;return j2(w)?r5(w,U):s$(w,U)}function l$(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=W0(w[$],z);return U}function r$(w,z){return l$(w.properties,z)}function r5(w,z){let U=r$(w,z);return z2(U)}function y6(w,z){let U=w.every((_)=>v2(_)),$=C0(z.unevaluatedProperties)?{unevaluatedProperties:E(z.unevaluatedProperties)}:{};return z.unevaluatedProperties===!1||C0(z.unevaluatedProperties)||U?{...z,...$,[M]:"Intersect",type:"object",allOf:t2(w)}:{...z,...$,[M]:"Intersect",allOf:t2(w)}}function a$(w){return w.every((z)=>q1(z))}function e$(w){return c2(w,[U0])}function a5(w){return w.map((z)=>q1(z)?e$(z):z)}function w_(w,z){return a$(w)?W0(y6(a5(w),z)):y6(a5(w),z)}function d4(w,z={}){if(w.length===0)return Q2(z);if(w.length===1)return E(w[0],z);if(w.some((U)=>S6(U)))throw new Error("Cannot intersect transform types");return w_(w,z)}function X0(w,z={}){if(w.length===0)return Q2(z);if(w.length===1)return E(w[0],z);if(w.some((U)=>S6(U)))throw new Error("Cannot intersect transform types");return y6(w,z)}function i6(w,z){return{...z,[M]:"Union",anyOf:t2(w)}}function z_(w){return w.some((z)=>q1(z))}function e5(w){return w.map((z)=>q1(z)?U_(z):z)}function U_(w){return c2(w,[U0])}function $_(w,z){return z_(w)?W0(i6(e5(w),z)):i6(e5(w),z)}function W1(w,z={}){return w.length===0?Q2(z):w.length===1?E(w[0],z):$_(w,z)}function J2(w,z={}){return w.length===0?Q2(z):w.length===1?E(w[0],z):i6(w,z)}class H8 extends n{}function __(w){return w.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function G8(w,z,U){return w[z]===U&&w.charCodeAt(z-1)!==92}function O1(w,z){return G8(w,z,"(")}function h6(w,z){return G8(w,z,")")}function wz(w,z){return G8(w,z,"|")}function B_(w){if(!(O1(w,0)&&h6(w,w.length-1)))return!1;let z=0;for(let U=0;U<w.length;U++){if(O1(w,U))z+=1;if(h6(w,U))z-=1;if(z===0&&U!==w.length-1)return!1}return!0}function q_(w){return w.slice(1,w.length-1)}function W_(w){let z=0;for(let U=0;U<w.length;U++){if(O1(w,U))z+=1;if(h6(w,U))z-=1;if(wz(w,U)&&z===0)return!0}return!1}function X_(w){for(let z=0;z<w.length;z++)if(O1(w,z))return!0;return!1}function Z_(w){let[z,U]=[0,0],$=[];for(let B=0;B<w.length;B++){if(O1(w,B))z+=1;if(h6(w,B))z-=1;if(wz(w,B)&&z===0){let q=w.slice(U,B);if(q.length>0)$.push(M6(q));U=B+1}}let _=w.slice(U);if(_.length>0)$.push(M6(_));if($.length===0)return{type:"const",const:""};if($.length===1)return $[0];return{type:"or",expr:$}}function Q_(w){function z(_,B){if(!O1(_,B))throw new H8("TemplateLiteralParser: Index must point to open parens");let q=0;for(let W=B;W<_.length;W++){if(O1(_,W))q+=1;if(h6(_,W))q-=1;if(q===0)return[B,W]}throw new H8("TemplateLiteralParser: Unclosed group parens in expression")}function U(_,B){for(let q=B;q<_.length;q++)if(O1(_,q))return[B,q];return[B,_.length]}let $=[];for(let _=0;_<w.length;_++)if(O1(w,_)){let[B,q]=z(w,_),W=w.slice(B,q+1);$.push(M6(W)),_=q}else{let[B,q]=U(w,_),W=w.slice(B,q);if(W.length>0)$.push(M6(W));_=q-1}return $.length===0?{type:"const",const:""}:$.length===1?$[0]:{type:"and",expr:$}}function M6(w){return B_(w)?M6(q_(w)):W_(w)?Z_(w):X_(w)?Q_(w):{type:"const",const:__(w)}}function L6(w){return M6(w.slice(1,w.length-1))}class zz extends n{}function J_(w){return w.type==="or"&&w.expr.length===2&&w.expr[0].type==="const"&&w.expr[0].const==="0"&&w.expr[1].type==="const"&&w.expr[1].const==="[1-9][0-9]*"}function Y_(w){return w.type==="or"&&w.expr.length===2&&w.expr[0].type==="const"&&w.expr[0].const==="true"&&w.expr[1].type==="const"&&w.expr[1].const==="false"}function A_(w){return w.type==="const"&&w.const===".*"}function m1(w){return J_(w)||A_(w)?!1:Y_(w)?!0:w.type==="and"?w.expr.every((z)=>m1(z)):w.type==="or"?w.expr.every((z)=>m1(z)):w.type==="const"?!0:(()=>{throw new zz("Unknown expression type")})()}function t4(w){let z=L6(w.pattern);return m1(z)}class Uz extends n{}function*$z(w){if(w.length===1)return yield*w[0];for(let z of w[0])for(let U of $z(w.slice(1)))yield`${z}${U}`}function*P_(w){return yield*$z(w.expr.map((z)=>[...n6(z)]))}function*S_(w){for(let z of w.expr)yield*n6(z)}function*M_(w){return yield w.const}function*n6(w){return w.type==="and"?yield*P_(w):w.type==="or"?yield*S_(w):w.type==="const"?yield*M_(w):(()=>{throw new Uz("Unknown expression")})()}function H6(w){let z=L6(w.pattern);return m1(z)?[...n6(z)]:[]}function X2(w,z={}){return{...z,[M]:"Literal",const:w,type:typeof w}}function v6(w={}){return{...w,[M]:"Boolean",type:"boolean"}}function s1(w={}){return{...w,[M]:"BigInt",type:"bigint"}}function m0(w={}){return{...w,[M]:"Number",type:"number"}}function I0(w={}){return{...w,[M]:"String",type:"string"}}function*L_(w){let z=w.trim().replace(/"|'/g,"");return z==="boolean"?yield v6():z==="number"?yield m0():z==="bigint"?yield s1():z==="string"?yield I0():yield(()=>{let U=z.split("|").map(($)=>X2($.trim()));return U.length===0?Q2():U.length===1?U[0]:W1(U)})()}function*H_(w){if(w[1]!=="{"){let z=X2("$"),U=R8(w.slice(1));return yield*[z,...U]}for(let z=2;z<w.length;z++)if(w[z]==="}"){let U=L_(w.slice(2,z)),$=R8(w.slice(z+1));return yield*[...U,...$]}yield X2(w)}function*R8(w){for(let z=0;z<w.length;z++)if(w[z]==="$"){let U=X2(w.slice(0,z)),$=H_(w.slice(z));return yield*[U,...$]}yield X2(w)}function _z(w){return[...R8(w)]}var Bz="(true|false)",c4="(0|[1-9][0-9]*)",qz="(.*)";var C1="^(0|[1-9][0-9]*)$",g1="^(.*)$";class Wz extends n{}function G_(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xz(w,z){return O0(w)?w.pattern.slice(1,w.pattern.length-1):W2(w)?`(${w.anyOf.map((U)=>Xz(U,z)).join("|")})`:o1(w)?`${z}${c4}`:p1(w)?`${z}${c4}`:A8(w)?`${z}${c4}`:c6(w)?`${z}${qz}`:D1(w)?`${z}${G_(w.const.toString())}`:P8(w)?`${z}${Bz}`:(()=>{throw new Wz(`Unexpected Kind '${w[M]}'`)})()}function N8(w){return`^${w.map((z)=>Xz(z,"")).join("")}$`}function l1(w){let U=H6(w).map(($)=>X2($));return W1(U)}function p6(w,z={}){let U=O2(w)?N8(_z(w)):N8(w);return{...z,[M]:"TemplateLiteral",type:"string",pattern:U}}function R_(w){return H6(w).map((U)=>U.toString())}function N_(w){let z=[];for(let U of w)z.push(...P0(U));return z}function b_(w){return[w.toString()]}function P0(w){return[...new Set(O0(w)?R_(w):W2(w)?N_(w.anyOf):D1(w)?b_(w.const):o1(w)?["[number]"]:p1(w)?["[number]"]:[])]}function D_(w,z,U){let $={};for(let _ of Object.getOwnPropertyNames(z))$[_]=r1(w,P0(z[_]),U);return $}function O_(w,z,U){return D_(w,z.properties,U)}function Zz(w,z,U){let $=O_(w,z,U);return z2($)}function Jz(w,z){return w.map((U)=>Yz(U,z))}function C_(w){return w.filter((z)=>!P6(z))}function I_(w,z){return d4(C_(Jz(w,z)))}function F_(w){return w.some((z)=>P6(z))?[]:w}function j_(w,z){return W1(F_(Jz(w,z)))}function K_(w,z){return z in w?w[z]:z==="[number]"?W1(w):Q2()}function E_(w,z){return z==="[number]"?w:Q2()}function x_(w,z){return z in w?w[z]:Q2()}function Yz(w,z){return y2(w)?I_(w.allOf,z):W2(w)?j_(w.anyOf,z):u0(w)?K_(w.items??[],z):b1(w)?E_(w.items,z):v2(w)?x_(w.properties,z):Q2()}function o6(w,z){return z.map((U)=>Yz(w,U))}function Qz(w,z){return W1(o6(w,z))}function r1(w,z,U={}){return j2(z)?E(Zz(w,z,U)):D0(z)?E(Az(w,z,U)):C0(z)?E(Qz(w,P0(z)),U):E(Qz(w,z),U)}function k_(w,z,U){return{[z]:r1(w,[z],U)}}function V_(w,z,U){return z.reduce(($,_)=>{return{...$,...k_(w,_,U)}},{})}function f_(w,z,U){return V_(w,z.keys,U)}function Az(w,z,U){let $=f_(w,z,U);return z2($)}function u6(w,z={}){return{...z,[M]:"Iterator",type:"Iterator",items:E(w)}}function g_(w,z={}){let U=globalThis.Object.getOwnPropertyNames(w),$=U.filter((W)=>q1(w[W])),_=U.filter((W)=>!$.includes(W)),B=C0(z.additionalProperties)?{additionalProperties:E(z.additionalProperties)}:{},q={};for(let W of U)q[W]=E(w[W]);return _.length>0?{...z,...B,[M]:"Object",type:"object",properties:q,required:_}:{...z,...B,[M]:"Object",type:"object",properties:q}}var P2=g_;function m6(w,z={}){return{...z,[M]:"Promise",type:"Promise",item:E(w)}}function T_(w){return c2(E(w),[_1])}function d_(w){return{...E(w),[_1]:"Readonly"}}function t_(w,z){return z===!1?T_(w):d_(w)}function F0(w,z){let U=z??!0;return j2(w)?Pz(w,U):t_(w,U)}function c_(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=F0(w[$],z);return U}function y_(w,z){return c_(w.properties,z)}function Pz(w,z){let U=y_(w,z);return z2(U)}function s0(w,z={}){let[U,$,_]=[!1,w.length,w.length];return w.length>0?{...z,[M]:"Tuple",type:"array",items:t2(w),additionalItems:U,minItems:$,maxItems:_}:{...z,[M]:"Tuple",type:"array",minItems:$,maxItems:_}}function Sz(w,z){return w.includes(z)}function Mz(w){return[...new Set(w)]}function i_(w,z){return w.filter((U)=>z.includes(U))}function h_(w,z){return w.reduce((U,$)=>{return i_(U,$)},z)}function Lz(w){return w.length===1?w[0]:w.length>1?h_(w.slice(1),w[0]):[]}function Hz(w){let z=[];for(let U of w)z.push(...U);return z}function Gz(w,z){return w in z?g0(w,z[w]):z2(z)}function n_(w){return{[w]:X2(w)}}function v_(w){let z={};for(let U of w)z[U]=X2(U);return z}function p_(w,z){return Sz(z,w)?n_(w):v_(z)}function o_(w,z){let U=p_(w,z);return Gz(w,U)}function s6(w,z){return z.map((U)=>g0(w,U))}function u_(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(z))U[$]=g0(w,z[$]);return U}function g0(w,z){return q1(z)?W0(g0(w,c2(z,[U0]))):l5(z)?F0(g0(w,c2(z,[_1]))):j2(z)?Gz(w,z.properties):D0(z)?o_(w,z.keys):T6(z)?f6(s6(w,z.parameters),g0(w,z.returns)):d6(z)?N1(s6(w,z.parameters),g0(w,z.returns)):g6(z)?V6(g0(w,z.items)):t6(z)?u6(g0(w,z.items)):y2(z)?X0(s6(w,z.allOf)):W2(z)?J2(s6(w,z.anyOf)):u0(z)?s0(s6(w,z.items??[])):v2(z)?P2(u_(w,z.properties)):b1(z)?k6(g0(w,z.items)):u1(z)?m6(g0(w,z.item)):z}function m_(w,z){let U={};for(let $ of w)U[$]=g0($,z);return U}function b8(w,z,U={}){let $=C0(w)?P0(w):w,_=z({[M]:"MappedKey",keys:$}),B=m_($,_);return E(P2(B),U)}function Rz(w){let z=[];for(let U of w)z.push(S0(U));return z}function s_(w){let z=Rz(w);return Hz(z)}function l_(w){let z=Rz(w);return Lz(z)}function r_(w){return w.map((z,U)=>U.toString())}function a_(w){return["[number]"]}function e_(w){return globalThis.Object.getOwnPropertyNames(w)}function wB(w){if(!D8)return[];return globalThis.Object.getOwnPropertyNames(w).map((U)=>{return U[0]==="^"&&U[U.length-1]==="$"?U.slice(1,U.length-1):U})}function S0(w){return y2(w)?s_(w.allOf):W2(w)?l_(w.anyOf):u0(w)?r_(w.items??[]):b1(w)?a_(w.items):v2(w)?e_(w.properties):S8(w)?wB(w.patternProperties):[]}var D8=!1;function I1(w){D8=!0;let z=S0(w);return D8=!1,`^(${z.map(($)=>`(${$})`).join("|")})\$`}function zB(w){return w.map((z)=>z==="[number]"?m0():X2(z))}function l6(w,z={}){if(j2(w))return Nz(w,z);else{let U=S0(w),$=zB(U),_=W1($);return E(_,z)}}function UB(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=l6(w[$],z);return U}function $B(w,z){return UB(w.properties,z)}function Nz(w,z){let U=$B(w,z);return z2(U)}function y4(w){let z=S0(w),U=o6(w,z);return z.map(($,_)=>[z[_],U[_]])}function _B(w){return w.allOf.every((z)=>F1(z))}function BB(w){return w.anyOf.some((z)=>F1(z))}function qB(w){return!F1(w.not)}function F1(w){return w[M]==="Intersect"?_B(w):w[M]==="Union"?BB(w):w[M]==="Not"?qB(w):w[M]==="Undefined"?!0:!1}function WB(w){switch(w.errorType){case H.ArrayContains:return"Expected array to contain at least one matching value";case H.ArrayMaxContains:return`Expected array to contain no more than ${w.schema.maxContains} matching values`;case H.ArrayMinContains:return`Expected array to contain at least ${w.schema.minContains} matching values`;case H.ArrayMaxItems:return`Expected array length to be less or equal to ${w.schema.maxItems}`;case H.ArrayMinItems:return`Expected array length to be greater or equal to ${w.schema.minItems}`;case H.ArrayUniqueItems:return"Expected array elements to be unique";case H.Array:return"Expected array";case H.AsyncIterator:return"Expected AsyncIterator";case H.BigIntExclusiveMaximum:return`Expected bigint to be less than ${w.schema.exclusiveMaximum}`;case H.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${w.schema.exclusiveMinimum}`;case H.BigIntMaximum:return`Expected bigint to be less or equal to ${w.schema.maximum}`;case H.BigIntMinimum:return`Expected bigint to be greater or equal to ${w.schema.minimum}`;case H.BigIntMultipleOf:return`Expected bigint to be a multiple of ${w.schema.multipleOf}`;case H.BigInt:return"Expected bigint";case H.Boolean:return"Expected boolean";case H.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${w.schema.exclusiveMinimumTimestamp}`;case H.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${w.schema.exclusiveMaximumTimestamp}`;case H.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${w.schema.minimumTimestamp}`;case H.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${w.schema.maximumTimestamp}`;case H.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${w.schema.multipleOfTimestamp}`;case H.Date:return"Expected Date";case H.Function:return"Expected function";case H.IntegerExclusiveMaximum:return`Expected integer to be less than ${w.schema.exclusiveMaximum}`;case H.IntegerExclusiveMinimum:return`Expected integer to be greater than ${w.schema.exclusiveMinimum}`;case H.IntegerMaximum:return`Expected integer to be less or equal to ${w.schema.maximum}`;case H.IntegerMinimum:return`Expected integer to be greater or equal to ${w.schema.minimum}`;case H.IntegerMultipleOf:return`Expected integer to be a multiple of ${w.schema.multipleOf}`;case H.Integer:return"Expected integer";case H.IntersectUnevaluatedProperties:return"Unexpected property";case H.Intersect:return"Expected all values to match";case H.Iterator:return"Expected Iterator";case H.Literal:return`Expected ${typeof w.schema.const==="string"?`'${w.schema.const}'`:w.schema.const}`;case H.Never:return"Never";case H.Not:return"Value should not match";case H.Null:return"Expected null";case H.NumberExclusiveMaximum:return`Expected number to be less than ${w.schema.exclusiveMaximum}`;case H.NumberExclusiveMinimum:return`Expected number to be greater than ${w.schema.exclusiveMinimum}`;case H.NumberMaximum:return`Expected number to be less or equal to ${w.schema.maximum}`;case H.NumberMinimum:return`Expected number to be greater or equal to ${w.schema.minimum}`;case H.NumberMultipleOf:return`Expected number to be a multiple of ${w.schema.multipleOf}`;case H.Number:return"Expected number";case H.Object:return"Expected object";case H.ObjectAdditionalProperties:return"Unexpected property";case H.ObjectMaxProperties:return`Expected object to have no more than ${w.schema.maxProperties} properties`;case H.ObjectMinProperties:return`Expected object to have at least ${w.schema.minProperties} properties`;case H.ObjectRequiredProperty:return"Required property";case H.Promise:return"Expected Promise";case H.RegExp:return"Expected string to match regular expression";case H.StringFormatUnknown:return`Unknown format '${w.schema.format}'`;case H.StringFormat:return`Expected string to match '${w.schema.format}' format`;case H.StringMaxLength:return`Expected string length less or equal to ${w.schema.maxLength}`;case H.StringMinLength:return`Expected string length greater or equal to ${w.schema.minLength}`;case H.StringPattern:return`Expected string to match '${w.schema.pattern}'`;case H.String:return"Expected string";case H.Symbol:return"Expected symbol";case H.TupleLength:return`Expected tuple to have ${w.schema.maxItems||0} elements`;case H.Tuple:return"Expected tuple";case H.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${w.schema.maxByteLength}`;case H.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${w.schema.minByteLength}`;case H.Uint8Array:return"Expected Uint8Array";case H.Undefined:return"Expected undefined";case H.Union:return"Expected union value";case H.Void:return"Expected void";case H.Kind:return`Expected kind '${w.schema[M]}'`;default:return"Unknown error type"}}var XB=WB;function bz(){return XB}class Dz extends n{constructor(w){super(`Unable to dereference schema with \$id '${w.$id}'`);this.schema=w}}function ZB(w,z){let U=z.find(($)=>$.$id===w.$ref);if(U===void 0)throw new Dz(w);return $2(U,z)}function $2(w,z){return w[M]==="This"||w[M]==="Ref"?ZB(w,z):w}class Oz extends n{constructor(w){super("Unable to hash value");this.value=w}}var j0;(function(w){w[w.Undefined=0]="Undefined",w[w.Null=1]="Null",w[w.Boolean=2]="Boolean",w[w.Number=3]="Number",w[w.String=4]="String",w[w.Object=5]="Object",w[w.Array=6]="Array",w[w.Date=7]="Date",w[w.Uint8Array=8]="Uint8Array",w[w.Symbol=9]="Symbol",w[w.BigInt=10]="BigInt"})(j0||(j0={}));var G6=BigInt("14695981039346656037"),[QB,JB]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],YB=Array.from({length:256}).map((w,z)=>BigInt(z)),Cz=new Float64Array(1),Iz=new DataView(Cz.buffer),Fz=new Uint8Array(Cz.buffer);function*AB(w){let z=w===0?1:Math.ceil(Math.floor(Math.log2(w)+1)/8);for(let U=0;U<z;U++)yield w>>8*(z-1-U)&255}function PB(w){$0(j0.Array);for(let z of w)R6(z)}function SB(w){$0(j0.Boolean),$0(w?1:0)}function MB(w){$0(j0.BigInt),Iz.setBigInt64(0,w);for(let z of Fz)$0(z)}function LB(w){$0(j0.Date),R6(w.getTime())}function HB(w){$0(j0.Null)}function GB(w){$0(j0.Number),Iz.setFloat64(0,w);for(let z of Fz)$0(z)}function RB(w){$0(j0.Object);for(let z of globalThis.Object.getOwnPropertyNames(w).sort())R6(z),R6(w[z])}function NB(w){$0(j0.String);for(let z=0;z<w.length;z++)for(let U of AB(w.charCodeAt(z)))$0(U)}function bB(w){$0(j0.Symbol),R6(w.description)}function DB(w){$0(j0.Uint8Array);for(let z=0;z<w.length;z++)$0(w[z])}function OB(w){return $0(j0.Undefined)}function R6(w){if(h(w))return PB(w);if($1(w))return SB(w);if(e2(w))return MB(w);if(R0(w))return LB(w);if(R1(w))return HB(w);if(t(w))return GB(w);if(b2(w))return RB(w);if(m(w))return NB(w);if(J0(w))return bB(w);if(J6(w))return DB(w);if(x2(w))return OB(w);throw new Oz(w)}function $0(w){G6=G6^YB[w],G6=G6*QB%JB}function T1(w){return G6=BigInt("14695981039346656037"),R6(w),G6}var H;(function(w){w[w.ArrayContains=0]="ArrayContains",w[w.ArrayMaxContains=1]="ArrayMaxContains",w[w.ArrayMaxItems=2]="ArrayMaxItems",w[w.ArrayMinContains=3]="ArrayMinContains",w[w.ArrayMinItems=4]="ArrayMinItems",w[w.ArrayUniqueItems=5]="ArrayUniqueItems",w[w.Array=6]="Array",w[w.AsyncIterator=7]="AsyncIterator",w[w.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",w[w.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",w[w.BigIntMaximum=10]="BigIntMaximum",w[w.BigIntMinimum=11]="BigIntMinimum",w[w.BigIntMultipleOf=12]="BigIntMultipleOf",w[w.BigInt=13]="BigInt",w[w.Boolean=14]="Boolean",w[w.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",w[w.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",w[w.DateMaximumTimestamp=17]="DateMaximumTimestamp",w[w.DateMinimumTimestamp=18]="DateMinimumTimestamp",w[w.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",w[w.Date=20]="Date",w[w.Function=21]="Function",w[w.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",w[w.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",w[w.IntegerMaximum=24]="IntegerMaximum",w[w.IntegerMinimum=25]="IntegerMinimum",w[w.IntegerMultipleOf=26]="IntegerMultipleOf",w[w.Integer=27]="Integer",w[w.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",w[w.Intersect=29]="Intersect",w[w.Iterator=30]="Iterator",w[w.Kind=31]="Kind",w[w.Literal=32]="Literal",w[w.Never=33]="Never",w[w.Not=34]="Not",w[w.Null=35]="Null",w[w.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",w[w.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",w[w.NumberMaximum=38]="NumberMaximum",w[w.NumberMinimum=39]="NumberMinimum",w[w.NumberMultipleOf=40]="NumberMultipleOf",w[w.Number=41]="Number",w[w.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",w[w.ObjectMaxProperties=43]="ObjectMaxProperties",w[w.ObjectMinProperties=44]="ObjectMinProperties",w[w.ObjectRequiredProperty=45]="ObjectRequiredProperty",w[w.Object=46]="Object",w[w.Promise=47]="Promise",w[w.RegExp=48]="RegExp",w[w.StringFormatUnknown=49]="StringFormatUnknown",w[w.StringFormat=50]="StringFormat",w[w.StringMaxLength=51]="StringMaxLength",w[w.StringMinLength=52]="StringMinLength",w[w.StringPattern=53]="StringPattern",w[w.String=54]="String",w[w.Symbol=55]="Symbol",w[w.TupleLength=56]="TupleLength",w[w.Tuple=57]="Tuple",w[w.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",w[w.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",w[w.Uint8Array=60]="Uint8Array",w[w.Undefined=61]="Undefined",w[w.Union=62]="Union",w[w.Void=63]="Void"})(H||(H={}));class jz extends n{constructor(w){super("Unknown type");this.schema=w}}function j1(w){return w.replace(/~/g,"~0").replace(/\//g,"~1")}function a(w){return w!==void 0}class i4{constructor(w){this.iterator=w}[Symbol.iterator](){return this.iterator}First(){let w=this.iterator.next();return w.done?void 0:w.value}}function x(w,z,U,$){return{type:w,schema:z,path:U,value:$,message:bz()({errorType:w,path:U,schema:z,value:$})}}function*CB(w,z,U,$){}function*IB(w,z,U,$){if(!h($))return yield x(H.Array,w,U,$);if(a(w.minItems)&&!($.length>=w.minItems))yield x(H.ArrayMinItems,w,U,$);if(a(w.maxItems)&&!($.length<=w.maxItems))yield x(H.ArrayMaxItems,w,U,$);for(let q=0;q<$.length;q++)yield*w0(w.items,z,`${U}/${q}`,$[q]);if(w.uniqueItems===!0&&!function(){let q=new Set;for(let W of $){let X=T1(W);if(q.has(X))return!1;else q.add(X)}return!0}())yield x(H.ArrayUniqueItems,w,U,$);if(!(a(w.contains)||a(w.minContains)||a(w.maxContains)))return;let _=a(w.contains)?w.contains:Q2(),B=$.reduce((q,W,X)=>w0(_,z,`${U}${X}`,W).next().done===!0?q+1:q,0);if(B===0)yield x(H.ArrayContains,w,U,$);if(t(w.minContains)&&B<w.minContains)yield x(H.ArrayMinContains,w,U,$);if(t(w.maxContains)&&B>w.maxContains)yield x(H.ArrayMaxContains,w,U,$)}function*FB(w,z,U,$){if(!x4($))yield x(H.AsyncIterator,w,U,$)}function*jB(w,z,U,$){if(!e2($))return yield x(H.BigInt,w,U,$);if(a(w.exclusiveMaximum)&&!($<w.exclusiveMaximum))yield x(H.BigIntExclusiveMaximum,w,U,$);if(a(w.exclusiveMinimum)&&!($>w.exclusiveMinimum))yield x(H.BigIntExclusiveMinimum,w,U,$);if(a(w.maximum)&&!($<=w.maximum))yield x(H.BigIntMaximum,w,U,$);if(a(w.minimum)&&!($>=w.minimum))yield x(H.BigIntMinimum,w,U,$);if(a(w.multipleOf)&&$%w.multipleOf!==BigInt(0))yield x(H.BigIntMultipleOf,w,U,$)}function*KB(w,z,U,$){if(!$1($))yield x(H.Boolean,w,U,$)}function*EB(w,z,U,$){yield*w0(w.returns,z,U,$.prototype)}function*xB(w,z,U,$){if(!R0($))return yield x(H.Date,w,U,$);if(a(w.exclusiveMaximumTimestamp)&&!($.getTime()<w.exclusiveMaximumTimestamp))yield x(H.DateExclusiveMaximumTimestamp,w,U,$);if(a(w.exclusiveMinimumTimestamp)&&!($.getTime()>w.exclusiveMinimumTimestamp))yield x(H.DateExclusiveMinimumTimestamp,w,U,$);if(a(w.maximumTimestamp)&&!($.getTime()<=w.maximumTimestamp))yield x(H.DateMaximumTimestamp,w,U,$);if(a(w.minimumTimestamp)&&!($.getTime()>=w.minimumTimestamp))yield x(H.DateMinimumTimestamp,w,U,$);if(a(w.multipleOfTimestamp)&&$.getTime()%w.multipleOfTimestamp!==0)yield x(H.DateMultipleOfTimestamp,w,U,$)}function*kB(w,z,U,$){if(!g4($))yield x(H.Function,w,U,$)}function*VB(w,z,U,$){if(!f4($))return yield x(H.Integer,w,U,$);if(a(w.exclusiveMaximum)&&!($<w.exclusiveMaximum))yield x(H.IntegerExclusiveMaximum,w,U,$);if(a(w.exclusiveMinimum)&&!($>w.exclusiveMinimum))yield x(H.IntegerExclusiveMinimum,w,U,$);if(a(w.maximum)&&!($<=w.maximum))yield x(H.IntegerMaximum,w,U,$);if(a(w.minimum)&&!($>=w.minimum))yield x(H.IntegerMinimum,w,U,$);if(a(w.multipleOf)&&$%w.multipleOf!==0)yield x(H.IntegerMultipleOf,w,U,$)}function*fB(w,z,U,$){for(let _ of w.allOf){let B=w0(_,z,U,$).next();if(!B.done)yield x(H.Intersect,w,U,$),yield B.value}if(w.unevaluatedProperties===!1){let _=new RegExp(I1(w));for(let B of Object.getOwnPropertyNames($))if(!_.test(B))yield x(H.IntersectUnevaluatedProperties,w,`${U}/${B}`,$)}if(typeof w.unevaluatedProperties==="object"){let _=new RegExp(I1(w));for(let B of Object.getOwnPropertyNames($))if(!_.test(B)){let q=w0(w.unevaluatedProperties,z,`${U}/${B}`,$[B]).next();if(!q.done)yield q.value}}}function*gB(w,z,U,$){if(!k4($))yield x(H.Iterator,w,U,$)}function*TB(w,z,U,$){if($!==w.const)yield x(H.Literal,w,U,$)}function*dB(w,z,U,$){yield x(H.Never,w,U,$)}function*tB(w,z,U,$){if(w0(w.not,z,U,$).next().done===!0)yield x(H.Not,w,U,$)}function*cB(w,z,U,$){if(!R1($))yield x(H.Null,w,U,$)}function*yB(w,z,U,$){if(!d2.IsNumberLike($))return yield x(H.Number,w,U,$);if(a(w.exclusiveMaximum)&&!($<w.exclusiveMaximum))yield x(H.NumberExclusiveMaximum,w,U,$);if(a(w.exclusiveMinimum)&&!($>w.exclusiveMinimum))yield x(H.NumberExclusiveMinimum,w,U,$);if(a(w.maximum)&&!($<=w.maximum))yield x(H.NumberMaximum,w,U,$);if(a(w.minimum)&&!($>=w.minimum))yield x(H.NumberMinimum,w,U,$);if(a(w.multipleOf)&&$%w.multipleOf!==0)yield x(H.NumberMultipleOf,w,U,$)}function*iB(w,z,U,$){if(!d2.IsObjectLike($))return yield x(H.Object,w,U,$);if(a(w.minProperties)&&!(Object.getOwnPropertyNames($).length>=w.minProperties))yield x(H.ObjectMinProperties,w,U,$);if(a(w.maxProperties)&&!(Object.getOwnPropertyNames($).length<=w.maxProperties))yield x(H.ObjectMaxProperties,w,U,$);let _=Array.isArray(w.required)?w.required:[],B=Object.getOwnPropertyNames(w.properties),q=Object.getOwnPropertyNames($);for(let W of _){if(q.includes(W))continue;yield x(H.ObjectRequiredProperty,w.properties[W],`${U}/${j1(W)}`,void 0)}if(w.additionalProperties===!1){for(let W of q)if(!B.includes(W))yield x(H.ObjectAdditionalProperties,w,`${U}/${j1(W)}`,$[W])}if(typeof w.additionalProperties==="object")for(let W of q){if(B.includes(W))continue;yield*w0(w.additionalProperties,z,`${U}/${j1(W)}`,$[W])}for(let W of B){let X=w.properties[W];if(w.required&&w.required.includes(W)){if(yield*w0(X,z,`${U}/${j1(W)}`,$[W]),F1(w)&&!(W in $))yield x(H.ObjectRequiredProperty,X,`${U}/${j1(W)}`,void 0)}else if(d2.IsExactOptionalProperty($,W))yield*w0(X,z,`${U}/${j1(W)}`,$[W])}}function*hB(w,z,U,$){if(!V4($))yield x(H.Promise,w,U,$)}function*nB(w,z,U,$){if(!d2.IsRecordLike($))return yield x(H.Object,w,U,$);if(a(w.minProperties)&&!(Object.getOwnPropertyNames($).length>=w.minProperties))yield x(H.ObjectMinProperties,w,U,$);if(a(w.maxProperties)&&!(Object.getOwnPropertyNames($).length<=w.maxProperties))yield x(H.ObjectMaxProperties,w,U,$);let[_,B]=Object.entries(w.patternProperties)[0],q=new RegExp(_);for(let[W,X]of Object.entries($))if(q.test(W))yield*w0(B,z,`${U}/${j1(W)}`,X);if(typeof w.additionalProperties==="object"){for(let[W,X]of Object.entries($))if(!q.test(W))yield*w0(w.additionalProperties,z,`${U}/${j1(W)}`,X)}if(w.additionalProperties===!1)for(let[W,X]of Object.entries($)){if(q.test(W))continue;return yield x(H.ObjectAdditionalProperties,w,`${U}/${j1(W)}`,X)}}function*vB(w,z,U,$){yield*w0($2(w,z),z,U,$)}function*pB(w,z,U,$){if(!m($))return yield x(H.String,w,U,$);if(a(w.minLength)&&!($.length>=w.minLength))yield x(H.StringMinLength,w,U,$);if(a(w.maxLength)&&!($.length<=w.maxLength))yield x(H.StringMaxLength,w,U,$);if(!new RegExp(w.source,w.flags).test($))return yield x(H.RegExp,w,U,$)}function*oB(w,z,U,$){if(!m($))return yield x(H.String,w,U,$);if(a(w.minLength)&&!($.length>=w.minLength))yield x(H.StringMinLength,w,U,$);if(a(w.maxLength)&&!($.length<=w.maxLength))yield x(H.StringMaxLength,w,U,$);if(m(w.pattern)){if(!new RegExp(w.pattern).test($))yield x(H.StringPattern,w,U,$)}if(m(w.format)){if(!G2.Has(w.format))yield x(H.StringFormatUnknown,w,U,$);else if(!G2.Get(w.format)($))yield x(H.StringFormat,w,U,$)}}function*uB(w,z,U,$){if(!J0($))yield x(H.Symbol,w,U,$)}function*mB(w,z,U,$){if(!m($))return yield x(H.String,w,U,$);if(!new RegExp(w.pattern).test($))yield x(H.StringPattern,w,U,$)}function*sB(w,z,U,$){yield*w0($2(w,z),z,U,$)}function*lB(w,z,U,$){if(!h($))return yield x(H.Tuple,w,U,$);if(w.items===void 0&&$.length!==0)return yield x(H.TupleLength,w,U,$);if($.length!==w.maxItems)return yield x(H.TupleLength,w,U,$);if(!w.items)return;for(let _=0;_<w.items.length;_++)yield*w0(w.items[_],z,`${U}/${_}`,$[_])}function*rB(w,z,U,$){if(!x2($))yield x(H.Undefined,w,U,$)}function*aB(w,z,U,$){let _=0;for(let B of w.anyOf){let q=[...w0(B,z,U,$)];if(q.length===0)return;_+=q.length}if(_>0)yield x(H.Union,w,U,$)}function*eB(w,z,U,$){if(!J6($))return yield x(H.Uint8Array,w,U,$);if(a(w.maxByteLength)&&!($.length<=w.maxByteLength))yield x(H.Uint8ArrayMaxByteLength,w,U,$);if(a(w.minByteLength)&&!($.length>=w.minByteLength))yield x(H.Uint8ArrayMinByteLength,w,U,$)}function*wq(w,z,U,$){}function*zq(w,z,U,$){if(!d2.IsVoidLike($))yield x(H.Void,w,U,$)}function*Uq(w,z,U,$){if(!k2.Get(w[M])(w,$))yield x(H.Kind,w,U,$)}function*w0(w,z,U,$){let _=a(w.$id)?[...z,w]:z,B=w;switch(B[M]){case"Any":return yield*CB(B,_,U,$);case"Array":return yield*IB(B,_,U,$);case"AsyncIterator":return yield*FB(B,_,U,$);case"BigInt":return yield*jB(B,_,U,$);case"Boolean":return yield*KB(B,_,U,$);case"Constructor":return yield*EB(B,_,U,$);case"Date":return yield*xB(B,_,U,$);case"Function":return yield*kB(B,_,U,$);case"Integer":return yield*VB(B,_,U,$);case"Intersect":return yield*fB(B,_,U,$);case"Iterator":return yield*gB(B,_,U,$);case"Literal":return yield*TB(B,_,U,$);case"Never":return yield*dB(B,_,U,$);case"Not":return yield*tB(B,_,U,$);case"Null":return yield*cB(B,_,U,$);case"Number":return yield*yB(B,_,U,$);case"Object":return yield*iB(B,_,U,$);case"Promise":return yield*hB(B,_,U,$);case"Record":return yield*nB(B,_,U,$);case"Ref":return yield*vB(B,_,U,$);case"RegExp":return yield*pB(B,_,U,$);case"String":return yield*oB(B,_,U,$);case"Symbol":return yield*uB(B,_,U,$);case"TemplateLiteral":return yield*mB(B,_,U,$);case"This":return yield*sB(B,_,U,$);case"Tuple":return yield*lB(B,_,U,$);case"Undefined":return yield*rB(B,_,U,$);case"Union":return yield*aB(B,_,U,$);case"Uint8Array":return yield*eB(B,_,U,$);case"Unknown":return yield*wq(B,_,U,$);case"Void":return yield*zq(B,_,U,$);default:if(!k2.Has(B[M]))throw new jz(w);return yield*Uq(B,_,U,$)}}function r6(...w){let z=w.length===3?w0(w[0],w[1],"",w[2]):w0(w[0],[],"",w[1]);return new i4(z)}function K1(w={}){return{...w,[M]:"Any"}}function X1(w={}){return{...w,[M]:"Unknown"}}var A={};n1(A,{TypeGuardUnknownTypeError:()=>Kz,IsVoid:()=>AU,IsUnsafe:()=>YU,IsUnknown:()=>JU,IsUnionLiteral:()=>Qq,IsUnion:()=>F8,IsUndefined:()=>ZU,IsUint8Array:()=>QU,IsTuple:()=>XU,IsTransform:()=>C2,IsThis:()=>WU,IsTemplateLiteral:()=>qU,IsSymbol:()=>BU,IsString:()=>_U,IsSchema:()=>o,IsRegExp:()=>$U,IsRef:()=>UU,IsRecursive:()=>Zq,IsRecord:()=>zU,IsReadonly:()=>qq,IsProperties:()=>I8,IsPromise:()=>wU,IsOptional:()=>Wq,IsObject:()=>ez,IsNumber:()=>az,IsNull:()=>rz,IsNot:()=>lz,IsNever:()=>sz,IsMappedResult:()=>mz,IsMappedKey:()=>uz,IsLiteralValue:()=>oz,IsLiteralString:()=>vz,IsLiteralNumber:()=>pz,IsLiteralBoolean:()=>Xq,IsLiteral:()=>e6,IsKindOf:()=>w2,IsKind:()=>PU,IsIterator:()=>nz,IsIntersect:()=>hz,IsInteger:()=>iz,IsFunction:()=>yz,IsDate:()=>cz,IsConstructor:()=>tz,IsBoolean:()=>dz,IsBigInt:()=>Tz,IsAsyncIterator:()=>gz,IsArray:()=>fz,IsAny:()=>Vz});class Kz extends n{}var $q=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Ez(w){try{return new RegExp(w),!0}catch{return!1}}function O8(w){if(!O2(w))return!1;for(let z=0;z<w.length;z++){let U=w.charCodeAt(z);if(U>=7&&U<=13||U===27||U===127)return!1}return!0}function xz(w){return C8(w)||o(w)}function a6(w){return V2(w)||E6(w)}function R2(w){return V2(w)||o0(w)}function C8(w){return V2(w)||f1(w)}function S2(w){return V2(w)||O2(w)}function _q(w){return V2(w)||O2(w)&&O8(w)&&Ez(w)}function Bq(w){return V2(w)||O2(w)&&O8(w)}function kz(w){return V2(w)||o(w)}function qq(w){return D2(w)&&w[_1]==="Readonly"}function Wq(w){return D2(w)&&w[U0]==="Optional"}function Vz(w){return w2(w,"Any")&&S2(w.$id)}function fz(w){return w2(w,"Array")&&w.type==="array"&&S2(w.$id)&&o(w.items)&&R2(w.minItems)&&R2(w.maxItems)&&C8(w.uniqueItems)&&kz(w.contains)&&R2(w.minContains)&&R2(w.maxContains)}function gz(w){return w2(w,"AsyncIterator")&&w.type==="AsyncIterator"&&S2(w.$id)&&o(w.items)}function Tz(w){return w2(w,"BigInt")&&w.type==="bigint"&&S2(w.$id)&&a6(w.exclusiveMaximum)&&a6(w.exclusiveMinimum)&&a6(w.maximum)&&a6(w.minimum)&&a6(w.multipleOf)}function dz(w){return w2(w,"Boolean")&&w.type==="boolean"&&S2(w.$id)}function tz(w){return w2(w,"Constructor")&&w.type==="Constructor"&&S2(w.$id)&&Y0(w.parameters)&&w.parameters.every((z)=>o(z))&&o(w.returns)}function cz(w){return w2(w,"Date")&&w.type==="Date"&&S2(w.$id)&&R2(w.exclusiveMaximumTimestamp)&&R2(w.exclusiveMinimumTimestamp)&&R2(w.maximumTimestamp)&&R2(w.minimumTimestamp)&&R2(w.multipleOfTimestamp)}function yz(w){return w2(w,"Function")&&w.type==="Function"&&S2(w.$id)&&Y0(w.parameters)&&w.parameters.every((z)=>o(z))&&o(w.returns)}function iz(w){return w2(w,"Integer")&&w.type==="integer"&&S2(w.$id)&&R2(w.exclusiveMaximum)&&R2(w.exclusiveMinimum)&&R2(w.maximum)&&R2(w.minimum)&&R2(w.multipleOf)}function I8(w){return D2(w)&&Object.entries(w).every(([z,U])=>O8(z)&&o(U))}function hz(w){return w2(w,"Intersect")&&(O2(w.type)&&w.type!=="object"?!1:!0)&&Y0(w.allOf)&&w.allOf.every((z)=>o(z)&&!C2(z))&&S2(w.type)&&(C8(w.unevaluatedProperties)||kz(w.unevaluatedProperties))&&S2(w.$id)}function nz(w){return w2(w,"Iterator")&&w.type==="Iterator"&&S2(w.$id)&&o(w.items)}function w2(w,z){return D2(w)&&M in w&&w[M]===z}function vz(w){return e6(w)&&O2(w.const)}function pz(w){return e6(w)&&o0(w.const)}function Xq(w){return e6(w)&&f1(w.const)}function e6(w){return w2(w,"Literal")&&S2(w.$id)&&oz(w.const)}function oz(w){return f1(w)||o0(w)||O2(w)}function uz(w){return w2(w,"MappedKey")&&Y0(w.keys)&&w.keys.every((z)=>o0(z)||O2(z))}function mz(w){return w2(w,"MappedResult")&&I8(w.properties)}function sz(w){return w2(w,"Never")&&D2(w.not)&&Object.getOwnPropertyNames(w.not).length===0}function lz(w){return w2(w,"Not")&&o(w.not)}function rz(w){return w2(w,"Null")&&w.type==="null"&&S2(w.$id)}function az(w){return w2(w,"Number")&&w.type==="number"&&S2(w.$id)&&R2(w.exclusiveMaximum)&&R2(w.exclusiveMinimum)&&R2(w.maximum)&&R2(w.minimum)&&R2(w.multipleOf)}function ez(w){return w2(w,"Object")&&w.type==="object"&&S2(w.$id)&&I8(w.properties)&&xz(w.additionalProperties)&&R2(w.minProperties)&&R2(w.maxProperties)}function wU(w){return w2(w,"Promise")&&w.type==="Promise"&&S2(w.$id)&&o(w.item)}function zU(w){return w2(w,"Record")&&w.type==="object"&&S2(w.$id)&&xz(w.additionalProperties)&&D2(w.patternProperties)&&((z)=>{let U=Object.getOwnPropertyNames(z.patternProperties);return U.length===1&&Ez(U[0])&&D2(z.patternProperties)&&o(z.patternProperties[U[0]])})(w)}function Zq(w){return D2(w)&&b0 in w&&w[b0]==="Recursive"}function UU(w){return w2(w,"Ref")&&S2(w.$id)&&O2(w.$ref)}function $U(w){return w2(w,"RegExp")&&S2(w.$id)&&O2(w.source)&&O2(w.flags)&&R2(w.maxLength)&&R2(w.minLength)}function _U(w){return w2(w,"String")&&w.type==="string"&&S2(w.$id)&&R2(w.minLength)&&R2(w.maxLength)&&_q(w.pattern)&&Bq(w.format)}function BU(w){return w2(w,"Symbol")&&w.type==="symbol"&&S2(w.$id)}function qU(w){return w2(w,"TemplateLiteral")&&w.type==="string"&&O2(w.pattern)&&w.pattern[0]==="^"&&w.pattern[w.pattern.length-1]==="$"}function WU(w){return w2(w,"This")&&S2(w.$id)&&O2(w.$ref)}function C2(w){return D2(w)&&E2 in w}function XU(w){return w2(w,"Tuple")&&w.type==="array"&&S2(w.$id)&&o0(w.minItems)&&o0(w.maxItems)&&w.minItems===w.maxItems&&(V2(w.items)&&V2(w.additionalItems)&&w.minItems===0||Y0(w.items)&&w.items.every((z)=>o(z)))}function ZU(w){return w2(w,"Undefined")&&w.type==="undefined"&&S2(w.$id)}function Qq(w){return F8(w)&&w.anyOf.every((z)=>vz(z)||pz(z))}function F8(w){return w2(w,"Union")&&S2(w.$id)&&D2(w)&&Y0(w.anyOf)&&w.anyOf.every((z)=>o(z))}function QU(w){return w2(w,"Uint8Array")&&w.type==="Uint8Array"&&S2(w.$id)&&R2(w.minByteLength)&&R2(w.maxByteLength)}function JU(w){return w2(w,"Unknown")&&S2(w.$id)}function YU(w){return w2(w,"Unsafe")}function AU(w){return w2(w,"Void")&&w.type==="void"&&S2(w.$id)}function PU(w){return D2(w)&&M in w&&O2(w[M])&&!$q.includes(w[M])}function o(w){return D2(w)&&(Vz(w)||fz(w)||dz(w)||Tz(w)||gz(w)||tz(w)||cz(w)||yz(w)||iz(w)||hz(w)||nz(w)||e6(w)||uz(w)||mz(w)||sz(w)||lz(w)||rz(w)||az(w)||ez(w)||wU(w)||zU(w)||UU(w)||$U(w)||_U(w)||BU(w)||qU(w)||WU(w)||XU(w)||ZU(w)||F8(w)||QU(w)||JU(w)||YU(w)||AU(w)||PU(w))}class GU extends n{}var R;(function(w){w[w.Union=0]="Union",w[w.True=1]="True",w[w.False=2]="False"})(R||(R={}));function T0(w){return w===R.False?w:R.True}function N6(w){throw new GU(w)}function i2(w){return A.IsNever(w)||A.IsIntersect(w)||A.IsUnion(w)||A.IsUnknown(w)||A.IsAny(w)}function h2(w,z){return A.IsNever(z)?bU(w,z):A.IsIntersect(z)?h4(w,z):A.IsUnion(z)?k8(w,z):A.IsUnknown(z)?IU(w,z):A.IsAny(z)?x8(w,z):N6("StructuralRight")}function x8(w,z){return R.True}function Jq(w,z){return A.IsIntersect(z)?h4(w,z):A.IsUnion(z)&&z.anyOf.some((U)=>A.IsAny(U)||A.IsUnknown(U))?R.True:A.IsUnion(z)?R.Union:A.IsUnknown(z)?R.True:A.IsAny(z)?R.True:R.Union}function Yq(w,z){return A.IsUnknown(w)?R.False:A.IsAny(w)?R.Union:A.IsNever(w)?R.True:R.False}function Aq(w,z){return A.IsObject(z)&&n4(z)?R.True:i2(z)?h2(w,z):!A.IsArray(z)?R.False:T0(M2(w.items,z.items))}function Pq(w,z){return i2(z)?h2(w,z):!A.IsAsyncIterator(z)?R.False:T0(M2(w.items,z.items))}function Sq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsBigInt(z)?R.True:R.False}function RU(w,z){return A.IsLiteralBoolean(w)?R.True:A.IsBoolean(w)?R.True:R.False}function Mq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsBoolean(z)?R.True:R.False}function Lq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):!A.IsConstructor(z)?R.False:w.parameters.length>z.parameters.length?R.False:!w.parameters.every((U,$)=>T0(M2(z.parameters[$],U))===R.True)?R.False:T0(M2(w.returns,z.returns))}function Hq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsDate(z)?R.True:R.False}function Gq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):!A.IsFunction(z)?R.False:w.parameters.length>z.parameters.length?R.False:!w.parameters.every((U,$)=>T0(M2(z.parameters[$],U))===R.True)?R.False:T0(M2(w.returns,z.returns))}function NU(w,z){return A.IsLiteral(w)&&A0.IsNumber(w.const)?R.True:A.IsNumber(w)||A.IsInteger(w)?R.True:R.False}function Rq(w,z){return A.IsInteger(z)||A.IsNumber(z)?R.True:i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):R.False}function h4(w,z){return z.allOf.every((U)=>M2(w,U)===R.True)?R.True:R.False}function Nq(w,z){return w.allOf.some((U)=>M2(U,z)===R.True)?R.True:R.False}function bq(w,z){return i2(z)?h2(w,z):!A.IsIterator(z)?R.False:T0(M2(w.items,z.items))}function Dq(w,z){return A.IsLiteral(z)&&z.const===w.const?R.True:i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsString(z)?CU(w,z):A.IsNumber(z)?DU(w,z):A.IsInteger(z)?NU(w,z):A.IsBoolean(z)?RU(w,z):R.False}function bU(w,z){return R.False}function Oq(w,z){return R.True}function SU(w){let[z,U]=[w,0];while(!0){if(!A.IsNot(z))break;z=z.not,U+=1}return U%2===0?z:X1()}function Cq(w,z){return A.IsNot(w)?M2(SU(w),z):A.IsNot(z)?M2(w,SU(z)):N6("Invalid fallthrough for Not")}function Iq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsNull(z)?R.True:R.False}function DU(w,z){return A.IsLiteralNumber(w)?R.True:A.IsNumber(w)||A.IsInteger(w)?R.True:R.False}function Fq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsInteger(z)||A.IsNumber(z)?R.True:R.False}function M0(w,z){return Object.getOwnPropertyNames(w.properties).length===z}function MU(w){return n4(w)}function LU(w){return M0(w,0)||M0(w,1)&&"description"in w.properties&&A.IsUnion(w.properties.description)&&w.properties.description.anyOf.length===2&&(A.IsString(w.properties.description.anyOf[0])&&A.IsUndefined(w.properties.description.anyOf[1])||A.IsString(w.properties.description.anyOf[1])&&A.IsUndefined(w.properties.description.anyOf[0]))}function j8(w){return M0(w,0)}function HU(w){return M0(w,0)}function jq(w){return M0(w,0)}function Kq(w){return M0(w,0)}function Eq(w){return n4(w)}function xq(w){let z=m0();return M0(w,0)||M0(w,1)&&"length"in w.properties&&T0(M2(w.properties.length,z))===R.True}function kq(w){return M0(w,0)}function n4(w){let z=m0();return M0(w,0)||M0(w,1)&&"length"in w.properties&&T0(M2(w.properties.length,z))===R.True}function Vq(w){let z=N1([K1()],K1());return M0(w,0)||M0(w,1)&&"then"in w.properties&&T0(M2(w.properties.then,z))===R.True}function OU(w,z){return M2(w,z)===R.False?R.False:A.IsOptional(w)&&!A.IsOptional(z)?R.False:R.True}function _0(w,z){return A.IsUnknown(w)?R.False:A.IsAny(w)?R.Union:A.IsNever(w)||A.IsLiteralString(w)&&MU(z)||A.IsLiteralNumber(w)&&j8(z)||A.IsLiteralBoolean(w)&&HU(z)||A.IsSymbol(w)&&LU(z)||A.IsBigInt(w)&&jq(z)||A.IsString(w)&&MU(z)||A.IsSymbol(w)&&LU(z)||A.IsNumber(w)&&j8(z)||A.IsInteger(w)&&j8(z)||A.IsBoolean(w)&&HU(z)||A.IsUint8Array(w)&&Eq(z)||A.IsDate(w)&&Kq(z)||A.IsConstructor(w)&&kq(z)||A.IsFunction(w)&&xq(z)?R.True:A.IsRecord(w)&&A.IsString(K8(w))?(()=>{return z[b0]==="Record"?R.True:R.False})():A.IsRecord(w)&&A.IsNumber(K8(w))?(()=>{return M0(z,0)?R.True:R.False})():R.False}function fq(w,z){return i2(z)?h2(w,z):A.IsRecord(z)?d0(w,z):!A.IsObject(z)?R.False:(()=>{for(let U of Object.getOwnPropertyNames(z.properties)){if(!(U in w.properties)&&!A.IsOptional(z.properties[U]))return R.False;if(A.IsOptional(z.properties[U]))return R.True;if(OU(w.properties[U],z.properties[U])===R.False)return R.False}return R.True})()}function gq(w,z){return i2(z)?h2(w,z):A.IsObject(z)&&Vq(z)?R.True:!A.IsPromise(z)?R.False:T0(M2(w.item,z.item))}function K8(w){return C1 in w.patternProperties?m0():(g1 in w.patternProperties)?I0():N6("Unknown record key pattern")}function E8(w){return C1 in w.patternProperties?w.patternProperties[C1]:(g1 in w.patternProperties)?w.patternProperties[g1]:N6("Unable to get record value schema")}function d0(w,z){let[U,$]=[K8(z),E8(z)];return A.IsLiteralString(w)&&A.IsNumber(U)&&T0(M2(w,$))===R.True?R.True:A.IsUint8Array(w)&&A.IsNumber(U)?M2(w,$):A.IsString(w)&&A.IsNumber(U)?M2(w,$):A.IsArray(w)&&A.IsNumber(U)?M2(w,$):A.IsObject(w)?(()=>{for(let _ of Object.getOwnPropertyNames(w.properties))if(OU($,w.properties[_])===R.False)return R.False;return R.True})():R.False}function Tq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):!A.IsRecord(z)?R.False:M2(E8(w),E8(z))}function dq(w,z){let U=A.IsRegExp(w)?I0():w,$=A.IsRegExp(z)?I0():z;return M2(U,$)}function CU(w,z){return A.IsLiteral(w)&&A0.IsString(w.const)?R.True:A.IsString(w)?R.True:R.False}function tq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsString(z)?R.True:R.False}function cq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsSymbol(z)?R.True:R.False}function yq(w,z){return A.IsTemplateLiteral(w)?M2(l1(w),z):A.IsTemplateLiteral(z)?M2(w,l1(z)):N6("Invalid fallthrough for TemplateLiteral")}function iq(w,z){return A.IsArray(z)&&w.items!==void 0&&w.items.every((U)=>M2(U,z.items)===R.True)}function hq(w,z){return A.IsNever(w)?R.True:A.IsUnknown(w)?R.False:A.IsAny(w)?R.Union:R.False}function nq(w,z){return i2(z)?h2(w,z):A.IsObject(z)&&n4(z)?R.True:A.IsArray(z)&&iq(w,z)?R.True:!A.IsTuple(z)?R.False:A0.IsUndefined(w.items)&&!A0.IsUndefined(z.items)||!A0.IsUndefined(w.items)&&A0.IsUndefined(z.items)?R.False:A0.IsUndefined(w.items)&&!A0.IsUndefined(z.items)?R.True:w.items.every((U,$)=>M2(U,z.items[$])===R.True)?R.True:R.False}function vq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsUint8Array(z)?R.True:R.False}function pq(w,z){return i2(z)?h2(w,z):A.IsObject(z)?_0(w,z):A.IsRecord(z)?d0(w,z):A.IsVoid(z)?mq(w,z):A.IsUndefined(z)?R.True:R.False}function k8(w,z){return z.anyOf.some((U)=>M2(w,U)===R.True)?R.True:R.False}function oq(w,z){return w.anyOf.every((U)=>M2(U,z)===R.True)?R.True:R.False}function IU(w,z){return R.True}function uq(w,z){return A.IsNever(z)?bU(w,z):A.IsIntersect(z)?h4(w,z):A.IsUnion(z)?k8(w,z):A.IsAny(z)?x8(w,z):A.IsString(z)?CU(w,z):A.IsNumber(z)?DU(w,z):A.IsInteger(z)?NU(w,z):A.IsBoolean(z)?RU(w,z):A.IsArray(z)?Yq(w,z):A.IsTuple(z)?hq(w,z):A.IsObject(z)?_0(w,z):A.IsUnknown(z)?R.True:R.False}function mq(w,z){return A.IsUndefined(w)?R.True:A.IsUndefined(w)?R.True:R.False}function sq(w,z){return A.IsIntersect(z)?h4(w,z):A.IsUnion(z)?k8(w,z):A.IsUnknown(z)?IU(w,z):A.IsAny(z)?x8(w,z):A.IsObject(z)?_0(w,z):A.IsVoid(z)?R.True:R.False}function M2(w,z){return A.IsTemplateLiteral(w)||A.IsTemplateLiteral(z)?yq(w,z):A.IsRegExp(w)||A.IsRegExp(z)?dq(w,z):A.IsNot(w)||A.IsNot(z)?Cq(w,z):A.IsAny(w)?Jq(w,z):A.IsArray(w)?Aq(w,z):A.IsBigInt(w)?Sq(w,z):A.IsBoolean(w)?Mq(w,z):A.IsAsyncIterator(w)?Pq(w,z):A.IsConstructor(w)?Lq(w,z):A.IsDate(w)?Hq(w,z):A.IsFunction(w)?Gq(w,z):A.IsInteger(w)?Rq(w,z):A.IsIntersect(w)?Nq(w,z):A.IsIterator(w)?bq(w,z):A.IsLiteral(w)?Dq(w,z):A.IsNever(w)?Oq(w,z):A.IsNull(w)?Iq(w,z):A.IsNumber(w)?Fq(w,z):A.IsObject(w)?fq(w,z):A.IsRecord(w)?Tq(w,z):A.IsString(w)?tq(w,z):A.IsSymbol(w)?cq(w,z):A.IsTuple(w)?nq(w,z):A.IsPromise(w)?gq(w,z):A.IsUint8Array(w)?vq(w,z):A.IsUndefined(w)?pq(w,z):A.IsUnion(w)?oq(w,z):A.IsUnknown(w)?uq(w,z):A.IsVoid(w)?sq(w,z):N6(`Unknown left type operand '${w[M]}'`)}function d1(w,z){return M2(w,z)}function lq(w,z,U,$,_){let B={};for(let q of globalThis.Object.getOwnPropertyNames(w))B[q]=a1(w[q],z,U,$,_);return B}function rq(w,z,U,$,_){return lq(w.properties,z,U,$,_)}function FU(w,z,U,$,_){let B=rq(w,z,U,$,_);return z2(B)}function aq(w,z,U,$){let _=d1(w,z);return _===R.Union?J2([U,$]):_===R.True?U:$}function a1(w,z,U,$,_={}){return j2(w)?FU(w,z,U,$,_):D0(w)?E(jU(w,z,U,$,_)):E(aq(w,z,U,$),_)}function eq(w,z,U,$,_){return{[w]:a1(X2(w),z,U,$,_)}}function wW(w,z,U,$,_){return w.reduce((B,q)=>{return{...B,...eq(q,z,U,$,_)}},{})}function zW(w,z,U,$,_){return wW(w.keys,z,U,$,_)}function jU(w,z,U,$,_){let B=zW(w,z,U,$,_);return z2(B)}class KU extends n{constructor(w){super("Unknown type");this.schema=w}}function UW(w){return w[M]==="Any"||w[M]==="Unknown"}function e(w){return w!==void 0}function $W(w,z,U){return!0}function _W(w,z,U){if(!h(U))return!1;if(e(w.minItems)&&!(U.length>=w.minItems))return!1;if(e(w.maxItems)&&!(U.length<=w.maxItems))return!1;if(!U.every((B)=>z0(w.items,z,B)))return!1;if(w.uniqueItems===!0&&!function(){let B=new Set;for(let q of U){let W=T1(q);if(B.has(W))return!1;else B.add(W)}return!0}())return!1;if(!(e(w.contains)||t(w.minContains)||t(w.maxContains)))return!0;let $=e(w.contains)?w.contains:Q2(),_=U.reduce((B,q)=>z0($,z,q)?B+1:B,0);if(_===0)return!1;if(t(w.minContains)&&_<w.minContains)return!1;if(t(w.maxContains)&&_>w.maxContains)return!1;return!0}function BW(w,z,U){return x4(U)}function qW(w,z,U){if(!e2(U))return!1;if(e(w.exclusiveMaximum)&&!(U<w.exclusiveMaximum))return!1;if(e(w.exclusiveMinimum)&&!(U>w.exclusiveMinimum))return!1;if(e(w.maximum)&&!(U<=w.maximum))return!1;if(e(w.minimum)&&!(U>=w.minimum))return!1;if(e(w.multipleOf)&&U%w.multipleOf!==BigInt(0))return!1;return!0}function WW(w,z,U){return $1(U)}function XW(w,z,U){return z0(w.returns,z,U.prototype)}function ZW(w,z,U){if(!R0(U))return!1;if(e(w.exclusiveMaximumTimestamp)&&!(U.getTime()<w.exclusiveMaximumTimestamp))return!1;if(e(w.exclusiveMinimumTimestamp)&&!(U.getTime()>w.exclusiveMinimumTimestamp))return!1;if(e(w.maximumTimestamp)&&!(U.getTime()<=w.maximumTimestamp))return!1;if(e(w.minimumTimestamp)&&!(U.getTime()>=w.minimumTimestamp))return!1;if(e(w.multipleOfTimestamp)&&U.getTime()%w.multipleOfTimestamp!==0)return!1;return!0}function QW(w,z,U){return g4(U)}function JW(w,z,U){if(!f4(U))return!1;if(e(w.exclusiveMaximum)&&!(U<w.exclusiveMaximum))return!1;if(e(w.exclusiveMinimum)&&!(U>w.exclusiveMinimum))return!1;if(e(w.maximum)&&!(U<=w.maximum))return!1;if(e(w.minimum)&&!(U>=w.minimum))return!1;if(e(w.multipleOf)&&U%w.multipleOf!==0)return!1;return!0}function YW(w,z,U){let $=w.allOf.every((_)=>z0(_,z,U));if(w.unevaluatedProperties===!1){let _=new RegExp(I1(w)),B=Object.getOwnPropertyNames(U).every((q)=>_.test(q));return $&&B}else if(o(w.unevaluatedProperties)){let _=new RegExp(I1(w)),B=Object.getOwnPropertyNames(U).every((q)=>_.test(q)||z0(w.unevaluatedProperties,z,U[q]));return $&&B}else return $}function AW(w,z,U){return k4(U)}function PW(w,z,U){return U===w.const}function SW(w,z,U){return!1}function MW(w,z,U){return!z0(w.not,z,U)}function LW(w,z,U){return R1(U)}function HW(w,z,U){if(!d2.IsNumberLike(U))return!1;if(e(w.exclusiveMaximum)&&!(U<w.exclusiveMaximum))return!1;if(e(w.exclusiveMinimum)&&!(U>w.exclusiveMinimum))return!1;if(e(w.minimum)&&!(U>=w.minimum))return!1;if(e(w.maximum)&&!(U<=w.maximum))return!1;if(e(w.multipleOf)&&U%w.multipleOf!==0)return!1;return!0}function GW(w,z,U){if(!d2.IsObjectLike(U))return!1;if(e(w.minProperties)&&!(Object.getOwnPropertyNames(U).length>=w.minProperties))return!1;if(e(w.maxProperties)&&!(Object.getOwnPropertyNames(U).length<=w.maxProperties))return!1;let $=Object.getOwnPropertyNames(w.properties);for(let _ of $){let B=w.properties[_];if(w.required&&w.required.includes(_)){if(!z0(B,z,U[_]))return!1;if((F1(B)||UW(B))&&!(_ in U))return!1}else if(d2.IsExactOptionalProperty(U,_)&&!z0(B,z,U[_]))return!1}if(w.additionalProperties===!1){let _=Object.getOwnPropertyNames(U);if(w.required&&w.required.length===$.length&&_.length===$.length)return!0;else return _.every((B)=>$.includes(B))}else if(typeof w.additionalProperties==="object")return Object.getOwnPropertyNames(U).every((B)=>$.includes(B)||z0(w.additionalProperties,z,U[B]));else return!0}function RW(w,z,U){return V4(U)}function NW(w,z,U){if(!d2.IsRecordLike(U))return!1;if(e(w.minProperties)&&!(Object.getOwnPropertyNames(U).length>=w.minProperties))return!1;if(e(w.maxProperties)&&!(Object.getOwnPropertyNames(U).length<=w.maxProperties))return!1;let[$,_]=Object.entries(w.patternProperties)[0],B=new RegExp($),q=Object.entries(U).every(([J,Q])=>{return B.test(J)?z0(_,z,Q):!0}),W=typeof w.additionalProperties==="object"?Object.entries(U).every(([J,Q])=>{return!B.test(J)?z0(w.additionalProperties,z,Q):!0}):!0,X=w.additionalProperties===!1?Object.getOwnPropertyNames(U).every((J)=>{return B.test(J)}):!0;return q&&W&&X}function bW(w,z,U){return z0($2(w,z),z,U)}function DW(w,z,U){let $=new RegExp(w.source,w.flags);if(e(w.minLength)){if(!(U.length>=w.minLength))return!1}if(e(w.maxLength)){if(!(U.length<=w.maxLength))return!1}return $.test(U)}function OW(w,z,U){if(!m(U))return!1;if(e(w.minLength)){if(!(U.length>=w.minLength))return!1}if(e(w.maxLength)){if(!(U.length<=w.maxLength))return!1}if(e(w.pattern)){if(!new RegExp(w.pattern).test(U))return!1}if(e(w.format)){if(!G2.Has(w.format))return!1;return G2.Get(w.format)(U)}return!0}function CW(w,z,U){return J0(U)}function IW(w,z,U){return m(U)&&new RegExp(w.pattern).test(U)}function FW(w,z,U){return z0($2(w,z),z,U)}function jW(w,z,U){if(!h(U))return!1;if(w.items===void 0&&U.length!==0)return!1;if(U.length!==w.maxItems)return!1;if(!w.items)return!0;for(let $=0;$<w.items.length;$++)if(!z0(w.items[$],z,U[$]))return!1;return!0}function KW(w,z,U){return x2(U)}function EW(w,z,U){return w.anyOf.some(($)=>z0($,z,U))}function xW(w,z,U){if(!J6(U))return!1;if(e(w.maxByteLength)&&!(U.length<=w.maxByteLength))return!1;if(e(w.minByteLength)&&!(U.length>=w.minByteLength))return!1;return!0}function kW(w,z,U){return!0}function VW(w,z,U){return d2.IsVoidLike(U)}function fW(w,z,U){if(!k2.Has(w[M]))return!1;return k2.Get(w[M])(w,U)}function z0(w,z,U){let $=e(w.$id)?[...z,w]:z,_=w;switch(_[M]){case"Any":return $W(_,$,U);case"Array":return _W(_,$,U);case"AsyncIterator":return BW(_,$,U);case"BigInt":return qW(_,$,U);case"Boolean":return WW(_,$,U);case"Constructor":return XW(_,$,U);case"Date":return ZW(_,$,U);case"Function":return QW(_,$,U);case"Integer":return JW(_,$,U);case"Intersect":return YW(_,$,U);case"Iterator":return AW(_,$,U);case"Literal":return PW(_,$,U);case"Never":return SW(_,$,U);case"Not":return MW(_,$,U);case"Null":return LW(_,$,U);case"Number":return HW(_,$,U);case"Object":return GW(_,$,U);case"Promise":return RW(_,$,U);case"Record":return NW(_,$,U);case"Ref":return bW(_,$,U);case"RegExp":return DW(_,$,U);case"String":return OW(_,$,U);case"Symbol":return CW(_,$,U);case"TemplateLiteral":return IW(_,$,U);case"This":return FW(_,$,U);case"Tuple":return jW(_,$,U);case"Undefined":return KW(_,$,U);case"Union":return EW(_,$,U);case"Uint8Array":return xW(_,$,U);case"Unknown":return kW(_,$,U);case"Void":return VW(_,$,U);default:if(!k2.Has(_[M]))throw new KU(_);return fW(_,$,U)}}function Z2(...w){return w.length===3?z0(w[0],w[1],w[2]):z0(w[0],[],w[1])}function gW(w){let z={};for(let U of Object.getOwnPropertyNames(w))z[U]=L2(w[U]);for(let U of Object.getOwnPropertySymbols(w))z[U]=L2(w[U]);return z}function TW(w){return w.map((z)=>L2(z))}function dW(w){return w.slice()}function tW(w){return new Date(w.toISOString())}function cW(w){return w}function L2(w){if(h(w))return TW(w);if(R0(w))return tW(w);if(b2(w))return gW(w);if(f0(w))return dW(w);if(N0(w))return cW(w);throw new Error("ValueClone: Unable to clone value")}class t0 extends n{constructor(w,z){super(z);this.schema=w}}function _2(w){return typeof w==="function"?w:L2(w)}function yW(w,z){if(s(w,"default"))return _2(w.default);else return{}}function iW(w,z){if(w.uniqueItems===!0&&!s(w,"default"))throw new t0(w,"Array with the uniqueItems constraint requires a default value");else if("contains"in w&&!s(w,"default"))throw new t0(w,"Array with the contains constraint requires a default value");else if("default"in w)return _2(w.default);else if(w.minItems!==void 0)return Array.from({length:w.minItems}).map((U)=>{return K0(w.items,z)});else return[]}function hW(w,z){if(s(w,"default"))return _2(w.default);else return async function*(){}()}function nW(w,z){if(s(w,"default"))return _2(w.default);else return BigInt(0)}function vW(w,z){if(s(w,"default"))return _2(w.default);else return!1}function pW(w,z){if(s(w,"default"))return _2(w.default);else{let U=K0(w.returns,z);if(typeof U==="object"&&!Array.isArray(U))return class{constructor(){for(let[$,_]of Object.entries(U)){let B=this;B[$]=_}}};else return class{}}}function oW(w,z){if(s(w,"default"))return _2(w.default);else if(w.minimumTimestamp!==void 0)return new Date(w.minimumTimestamp);else return new Date}function uW(w,z){if(s(w,"default"))return _2(w.default);else return()=>K0(w.returns,z)}function mW(w,z){if(s(w,"default"))return _2(w.default);else if(w.minimum!==void 0)return w.minimum;else return 0}function sW(w,z){if(s(w,"default"))return _2(w.default);else{let U=w.allOf.reduce(($,_)=>{let B=K0(_,z);return typeof B==="object"?{...$,...B}:B},{});if(!Z2(w,z,U))throw new t0(w,"Intersect produced invalid value. Consider using a default value.");return U}}function lW(w,z){if(s(w,"default"))return _2(w.default);else return function*(){}()}function rW(w,z){if(s(w,"default"))return _2(w.default);else return w.const}function aW(w,z){if(s(w,"default"))return _2(w.default);else throw new t0(w,"Never types cannot be created. Consider using a default value.")}function eW(w,z){if(s(w,"default"))return _2(w.default);else throw new t0(w,"Not types must have a default value")}function wX(w,z){if(s(w,"default"))return _2(w.default);else return null}function zX(w,z){if(s(w,"default"))return _2(w.default);else if(w.minimum!==void 0)return w.minimum;else return 0}function UX(w,z){if(s(w,"default"))return _2(w.default);else{let U=new Set(w.required),$={};for(let[_,B]of Object.entries(w.properties)){if(!U.has(_))continue;$[_]=K0(B,z)}return $}}function $X(w,z){if(s(w,"default"))return _2(w.default);else return Promise.resolve(K0(w.item,z))}function _X(w,z){let[U,$]=Object.entries(w.patternProperties)[0];if(s(w,"default"))return _2(w.default);else if(!(U===g1||U===C1)){let _=U.slice(1,U.length-1).split("|"),B={};for(let q of _)B[q]=K0($,z);return B}else return{}}function BX(w,z){if(s(w,"default"))return _2(w.default);else return K0($2(w,z),z)}function qX(w,z){if(s(w,"default"))return _2(w.default);else throw new t0(w,"RegExp types cannot be created. Consider using a default value.")}function WX(w,z){if(w.pattern!==void 0)if(!s(w,"default"))throw new t0(w,"String types with patterns must specify a default value");else return _2(w.default);else if(w.format!==void 0)if(!s(w,"default"))throw new t0(w,"String types with formats must specify a default value");else return _2(w.default);else if(s(w,"default"))return _2(w.default);else if(w.minLength!==void 0)return Array.from({length:w.minLength}).map(()=>" ").join("");else return""}function XX(w,z){if(s(w,"default"))return _2(w.default);else if("value"in w)return Symbol.for(w.value);else return Symbol()}function ZX(w,z){if(s(w,"default"))return _2(w.default);if(!t4(w))throw new t0(w,"Can only create template literals that produce a finite variants. Consider using a default value.");return H6(w)[0]}function QX(w,z){if(EU++>HX)throw new t0(w,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(s(w,"default"))return _2(w.default);else return K0($2(w,z),z)}function JX(w,z){if(s(w,"default"))return _2(w.default);if(w.items===void 0)return[];else return Array.from({length:w.minItems}).map((U,$)=>K0(w.items[$],z))}function YX(w,z){if(s(w,"default"))return _2(w.default);else return}function AX(w,z){if(s(w,"default"))return _2(w.default);else if(w.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return K0(w.anyOf[0],z)}function PX(w,z){if(s(w,"default"))return _2(w.default);else if(w.minByteLength!==void 0)return new Uint8Array(w.minByteLength);else return new Uint8Array(0)}function SX(w,z){if(s(w,"default"))return _2(w.default);else return{}}function MX(w,z){if(s(w,"default"))return _2(w.default);else return}function LX(w,z){if(s(w,"default"))return _2(w.default);else throw new Error("User defined types must specify a default value")}function K0(w,z){let U=m(w.$id)?[...z,w]:z,$=w;switch($[M]){case"Any":return yW($,U);case"Array":return iW($,U);case"AsyncIterator":return hW($,U);case"BigInt":return nW($,U);case"Boolean":return vW($,U);case"Constructor":return pW($,U);case"Date":return oW($,U);case"Function":return uW($,U);case"Integer":return mW($,U);case"Intersect":return sW($,U);case"Iterator":return lW($,U);case"Literal":return rW($,U);case"Never":return aW($,U);case"Not":return eW($,U);case"Null":return wX($,U);case"Number":return zX($,U);case"Object":return UX($,U);case"Promise":return $X($,U);case"Record":return _X($,U);case"Ref":return BX($,U);case"RegExp":return qX($,U);case"String":return WX($,U);case"Symbol":return XX($,U);case"TemplateLiteral":return ZX($,U);case"This":return QX($,U);case"Tuple":return JX($,U);case"Undefined":return YX($,U);case"Union":return AX($,U);case"Uint8Array":return PX($,U);case"Unknown":return SX($,U);case"Void":return MX($,U);default:if(!k2.Has($[M]))throw new t0($,"Unknown type");return LX($,U)}}var HX=512,EU=0;function E0(...w){return EU=0,w.length===2?K0(w[0],w[1]):K0(w[0],[])}class V8 extends n{constructor(w,z){super(z);this.schema=w}}function GX(w,z,U){if(w[M]==="Object"&&typeof U==="object"&&!R1(U)){let $=w,_=Object.getOwnPropertyNames(U),B=Object.entries($.properties),[q,W]=[1/B.length,B.length];return B.reduce((X,[J,Q])=>{let P=Q[M]==="Literal"&&Q.const===U[J]?W:0,N=Z2(Q,z,U[J])?q:0,Z=_.includes(J)?q:0;return X+(P+N+Z)},0)}else return Z2(w,z,U)?1:0}function RX(w,z,U){let $=w.anyOf.map((q)=>$2(q,z)),[_,B]=[$[0],0];for(let q of $){let W=GX(q,z,U);if(W>B)_=q,B=W}return _}function NX(w,z,U){if("default"in w)return typeof U==="function"?w.default:L2(w.default);else{let $=RX(w,z,U);return v4($,z,U)}}function bX(w,z,U){return Z2(w,z,U)?L2(U):E0(w,z)}function DX(w,z,U){return Z2(w,z,U)?U:E0(w,z)}function OX(w,z,U){if(Z2(w,z,U))return L2(U);let $=h(U)?L2(U):E0(w,z),_=t(w.minItems)&&$.length<w.minItems?[...$,...Array.from({length:w.minItems-$.length},()=>null)]:$,q=(t(w.maxItems)&&_.length>w.maxItems?_.slice(0,w.maxItems):_).map((X)=>Z1(w.items,z,X));if(w.uniqueItems!==!0)return q;let W=[...new Set(q)];if(!Z2(w,z,W))throw new V8(w,"Array cast produced invalid data due to uniqueItems constraint");return W}function CX(w,z,U){if(Z2(w,z,U))return E0(w,z);let $=new Set(w.returns.required||[]),_=function(){};for(let[B,q]of Object.entries(w.returns.properties)){if(!$.has(B)&&U.prototype[B]===void 0)continue;_.prototype[B]=Z1(q,z,U.prototype[B])}return _}function IX(w,z,U){let $=E0(w,z),_=b2($)&&b2(U)?{...$,...U}:U;return Z2(w,z,_)?_:E0(w,z)}function FX(w,z,U){throw new V8(w,"Never types cannot be cast")}function jX(w,z,U){if(Z2(w,z,U))return U;if(U===null||typeof U!=="object")return E0(w,z);let $=new Set(w.required||[]),_={};for(let[B,q]of Object.entries(w.properties)){if(!$.has(B)&&U[B]===void 0)continue;_[B]=Z1(q,z,U[B])}if(typeof w.additionalProperties==="object"){let B=Object.getOwnPropertyNames(w.properties);for(let q of Object.getOwnPropertyNames(U)){if(B.includes(q))continue;_[q]=Z1(w.additionalProperties,z,U[q])}}return _}function KX(w,z,U){if(Z2(w,z,U))return L2(U);if(U===null||typeof U!=="object"||Array.isArray(U)||U instanceof Date)return E0(w,z);let $=Object.getOwnPropertyNames(w.patternProperties)[0],_=w.patternProperties[$],B={};for(let[q,W]of Object.entries(U))B[q]=Z1(_,z,W);return B}function EX(w,z,U){return Z1($2(w,z),z,U)}function xX(w,z,U){return Z1($2(w,z),z,U)}function kX(w,z,U){if(Z2(w,z,U))return L2(U);if(!h(U))return E0(w,z);if(w.items===void 0)return[];return w.items.map(($,_)=>Z1($,z,U[_]))}function VX(w,z,U){return Z2(w,z,U)?L2(U):NX(w,z,U)}function Z1(w,z,U){let $=m(w.$id)?[...z,w]:z,_=w;switch(w[M]){case"Array":return OX(_,$,U);case"Constructor":return CX(_,$,U);case"Intersect":return IX(_,$,U);case"Never":return FX(_,$,U);case"Object":return jX(_,$,U);case"Record":return KX(_,$,U);case"Ref":return EX(_,$,U);case"This":return xX(_,$,U);case"Tuple":return kX(_,$,U);case"Union":return VX(_,$,U);case"Date":case"Symbol":case"Uint8Array":return bX(w,z,U);default:return DX(_,$,U)}}function v4(...w){return w.length===3?Z1(w[0],w[1],w[2]):Z1(w[0],[],w[1])}function fX(w){return o(w)&&w[M]!=="Unsafe"}function gX(w,z,U){if(!h(U))return U;return U.map(($)=>x0(w.items,z,$))}function TX(w,z,U){let $=w.unevaluatedProperties,B=w.allOf.map((W)=>x0(W,z,L2(U))).reduce((W,X)=>a2(X)?{...W,...X}:X,{});if(!a2(U)||!a2(B)||!o($))return B;let q=S0(w);for(let W of Object.getOwnPropertyNames(U)){if(q.includes(W))continue;if(Z2($,z,U[W]))B[W]=x0($,z,U[W])}return B}function dX(w,z,U){if(!a2(U)||h(U))return U;let $=w.additionalProperties;for(let _ of Object.getOwnPropertyNames(U)){if(_ in w.properties){U[_]=x0(w.properties[_],z,U[_]);continue}if(o($)&&Z2($,z,U[_])){U[_]=x0($,z,U[_]);continue}delete U[_]}return U}function tX(w,z,U){if(!a2(U))return U;let $=w.additionalProperties,_=Object.getOwnPropertyNames(U),[B,q]=Object.entries(w.patternProperties)[0],W=new RegExp(B);for(let X of _){if(W.test(X)){U[X]=x0(q,z,U[X]);continue}if(o($)&&Z2($,z,U[X])){U[X]=x0($,z,U[X]);continue}delete U[X]}return U}function cX(w,z,U){return x0($2(w,z),z,U)}function yX(w,z,U){return x0($2(w,z),z,U)}function iX(w,z,U){if(!h(U))return U;if(x2(w.items))return[];let $=Math.min(U.length,w.items.length);for(let _=0;_<$;_++)U[_]=x0(w.items[_],z,U[_]);return U.length>$?U.slice(0,$):U}function hX(w,z,U){for(let $ of w.anyOf)if(fX($)&&Z2($,z,U))return x0($,z,U);return U}function x0(w,z,U){let $=m(w.$id)?[...z,w]:z,_=w;switch(_[M]){case"Array":return gX(_,$,U);case"Intersect":return TX(_,$,U);case"Object":return dX(_,$,U);case"Record":return tX(_,$,U);case"Ref":return cX(_,$,U);case"This":return yX(_,$,U);case"Tuple":return iX(_,$,U);case"Union":return hX(_,$,U);default:return U}}function f8(...w){return w.length===3?x0(w[0],w[1],w[2]):x0(w[0],[],w[1])}function p4(w){return m(w)&&!isNaN(w)&&!isNaN(parseFloat(w))}function nX(w){return e2(w)||$1(w)||t(w)}function w4(w){return w===!0||t(w)&&w===1||e2(w)&&w===BigInt("1")||m(w)&&(w.toLowerCase()==="true"||w==="1")}function z4(w){return w===!1||t(w)&&(w===0||Object.is(w,-0))||e2(w)&&w===BigInt("0")||m(w)&&(w.toLowerCase()==="false"||w==="0"||w==="-0")}function vX(w){return m(w)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(w)}function pX(w){return m(w)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(w)}function oX(w){return m(w)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(w)}function uX(w){return m(w)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(w)}function mX(w){return m(w)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(w)}function sX(w,z){let U=kU(w);return U===z?U:w}function lX(w,z){let U=VU(w);return U===z?U:w}function rX(w,z){let U=xU(w);return U===z?U:w}function aX(w,z){return m(w.const)?sX(z,w.const):t(w.const)?lX(z,w.const):$1(w.const)?rX(z,w.const):L2(z)}function xU(w){return w4(w)?!0:z4(w)?!1:w}function eX(w){return p4(w)?BigInt(parseInt(w)):t(w)?BigInt(w|0):z4(w)?BigInt(0):w4(w)?BigInt(1):w}function kU(w){return nX(w)?w.toString():J0(w)&&w.description!==void 0?w.description.toString():w}function VU(w){return p4(w)?parseFloat(w):w4(w)?1:z4(w)?0:w}function wZ(w){return p4(w)?parseInt(w):t(w)?w|0:w4(w)?1:z4(w)?0:w}function zZ(w){return m(w)&&w.toLowerCase()==="null"?null:w}function UZ(w){return m(w)&&w==="undefined"?void 0:w}function $Z(w){return R0(w)?w:t(w)?new Date(w):w4(w)?new Date(1):z4(w)?new Date(0):p4(w)?new Date(parseInt(w)):pX(w)?new Date(`1970-01-01T${w}.000Z`):vX(w)?new Date(`1970-01-01T${w}`):uX(w)?new Date(`${w}.000Z`):oX(w)?new Date(w):mX(w)?new Date(`${w}T00:00:00.000Z`):w}function _Z(w){return w}function BZ(w,z,U){return(h(U)?U:[U]).map((_)=>Q1(w.items,z,_))}function qZ(w,z,U){return eX(U)}function WZ(w,z,U){return xU(U)}function XZ(w,z,U){return $Z(U)}function ZZ(w,z,U){return wZ(U)}function QZ(w,z,U){return w.allOf.reduce(($,_)=>Q1(_,z,$),U)}function JZ(w,z,U){return aX(w,U)}function YZ(w,z,U){return zZ(U)}function AZ(w,z,U){return VU(U)}function PZ(w,z,U){if(!a2(U))return U;let _={};for(let B of Object.keys(U))_[B]=s(w.properties,B)?Q1(w.properties[B],z,U[B]):U[B];return _}function SZ(w,z,U){let $=Object.getOwnPropertyNames(w.patternProperties)[0],_=w.patternProperties[$],B={};for(let[q,W]of Object.entries(U))B[q]=Q1(_,z,W);return B}function MZ(w,z,U){return Q1($2(w,z),z,U)}function LZ(w,z,U){return kU(U)}function HZ(w,z,U){return m(U)||t(U)?Symbol(U):U}function GZ(w,z,U){return Q1($2(w,z),z,U)}function RZ(w,z,U){if(!(h(U)&&!x2(w.items)))return U;return U.map((_,B)=>{return B<w.items.length?Q1(w.items[B],z,_):_})}function NZ(w,z,U){return UZ(U)}function bZ(w,z,U){for(let $ of w.anyOf){let _=Q1($,z,U);if(!Z2($,z,_))continue;return _}return U}function Q1(w,z,U){let $=m(w.$id)?[...z,w]:z,_=w;switch(w[M]){case"Array":return BZ(_,$,U);case"BigInt":return qZ(_,$,U);case"Boolean":return WZ(_,$,U);case"Date":return XZ(_,$,U);case"Integer":return ZZ(_,$,U);case"Intersect":return QZ(_,$,U);case"Literal":return JZ(_,$,U);case"Null":return YZ(_,$,U);case"Number":return AZ(_,$,U);case"Object":return PZ(_,$,U);case"Record":return SZ(_,$,U);case"Ref":return MZ(_,$,U);case"String":return LZ(_,$,U);case"Symbol":return HZ(_,$,U);case"This":return GZ(_,$,U);case"Tuple":return RZ(_,$,U);case"Undefined":return NZ(_,$,U);case"Union":return bZ(_,$,U);default:return _Z(U)}}function g8(...w){return w.length===3?Q1(w[0],w[1],w[2]):Q1(w[0],[],w[1])}function t1(w,z){return z===void 0&&"default"in w?L2(w.default):z}function DZ(w){return o(w)&&w[M]!=="Unsafe"}function o4(w){return o(w)&&"default"in w}function OZ(w,z,U){let $=t1(w,U);if(!h($))return $;for(let _=0;_<$.length;_++)$[_]=c0(w.items,z,$[_]);return $}function CZ(w,z,U){let $=t1(w,U);return w.allOf.reduce((_,B)=>{let q=c0(B,z,$);return a2(q)?{..._,...q}:q},{})}function IZ(w,z,U){let $=t1(w,U);if(!a2($))return $;let _=w.additionalProperties,B=Object.getOwnPropertyNames(w.properties);for(let q of B){if(!o4(w.properties[q]))continue;$[q]=c0(w.properties[q],z,$[q])}if(!o4(_))return $;for(let q of Object.getOwnPropertyNames($)){if(B.includes(q))continue;$[q]=c0(_,z,$[q])}return $}function FZ(w,z,U){let $=t1(w,U);if(!a2($))return $;let _=w.additionalProperties,[B,q]=Object.entries(w.patternProperties)[0],W=new RegExp(B);for(let X of Object.getOwnPropertyNames($)){if(!(W.test(X)&&o4(q)))continue;$[X]=c0(q,z,$[X])}if(!o4(_))return $;for(let X of Object.getOwnPropertyNames($)){if(W.test(X))continue;$[X]=c0(_,z,$[X])}return $}function jZ(w,z,U){return c0($2(w,z),z,t1(w,U))}function KZ(w,z,U){return c0($2(w,z),z,U)}function EZ(w,z,U){let $=t1(w,U);if(!h($)||x2(w.items))return $;let[_,B]=[w.items,Math.max(w.items.length,$.length)];for(let q=0;q<B;q++)if(q<_.length)$[q]=c0(_[q],z,$[q]);return $}function xZ(w,z,U){let $=t1(w,U);for(let _ of w.anyOf){let B=c0(_,z,$);if(DZ(_)&&Z2(_,B))return B}return $}function c0(w,z,U){let $=m(w.$id)?[...z,w]:z,_=w;switch(_[M]){case"Array":return OZ(_,$,U);case"Intersect":return CZ(_,$,U);case"Object":return IZ(_,$,U);case"Record":return FZ(_,$,U);case"Ref":return jZ(_,$,U);case"This":return KZ(_,$,U);case"Tuple":return EZ(_,$,U);case"Union":return xZ(_,$,U);default:return t1(_,U)}}function T8(...w){return w.length===3?c0(w[0],w[1],w[2]):c0(w[0],[],w[1])}var l0={};n1(l0,{ValuePointerRootSetError:()=>d8,ValuePointerRootDeleteError:()=>t8,Set:()=>kZ,Has:()=>fZ,Get:()=>gZ,Format:()=>U4,Delete:()=>VZ});class d8 extends n{constructor(w,z,U){super("Cannot set root value");this.value=w,this.path=z,this.update=U}}class t8 extends n{constructor(w,z){super("Cannot delete root value");this.value=w,this.path=z}}function fU(w){return w.indexOf("~")===-1?w:w.replace(/~1/g,"/").replace(/~0/g,"~")}function*U4(w){if(w==="")return;let[z,U]=[0,0];for(let $=0;$<w.length;$++)if(w.charAt($)==="/")if($===0)z=$+1;else U=$,yield fU(w.slice(z,U)),z=$+1;else U=$;yield fU(w.slice(z))}function kZ(w,z,U){if(z==="")throw new d8(w,z,U);let[$,_,B]=[null,w,""];for(let q of U4(z)){if(_[q]===void 0)_[q]={};$=_,_=_[q],B=q}$[B]=U}function VZ(w,z){if(z==="")throw new t8(w,z);let[U,$,_]=[null,w,""];for(let B of U4(z)){if($[B]===void 0||$[B]===null)return;U=$,$=$[B],_=B}if(Array.isArray(U)){let B=parseInt(_);U.splice(B,1)}else delete U[_]}function fZ(w,z){if(z==="")return!0;let[U,$,_]=[null,w,""];for(let B of U4(z)){if($[B]===void 0)return!1;U=$,$=$[B],_=B}return Object.getOwnPropertyNames(U).includes(_)}function gZ(w,z){if(z==="")return w;let U=w;for(let $ of U4(z)){if(U[$]===void 0)return;U=U[$]}return U}var TZ=P2({type:X2("insert"),path:I0(),value:X1()}),dZ=P2({type:X2("update"),path:I0(),value:X1()}),tZ=P2({type:X2("delete"),path:I0()}),cb=J2([TZ,dZ,tZ]);class c8 extends n{constructor(w,z){super(z);this.value=w}}class $4 extends c8{constructor(w){super(w,"Cannot diff objects with symbol keys");this.value=w}}function _4(w,z){return{type:"update",path:w,value:z}}function gU(w,z){return{type:"insert",path:w,value:z}}function TU(w){return{type:"delete",path:w}}function*cZ(w,z,U){if(!b2(U))return yield _4(w,U);let $=[...globalThis.Object.keys(z),...globalThis.Object.getOwnPropertySymbols(z)],_=[...globalThis.Object.keys(U),...globalThis.Object.getOwnPropertySymbols(U)];for(let B of $){if(J0(B))throw new $4(B);if(x2(U[B])&&_.includes(B))yield _4(`${w}/${globalThis.String(B)}`,void 0)}for(let B of _){if(x2(z[B])||x2(U[B]))continue;if(J0(B))throw new $4(B);yield*u4(`${w}/${globalThis.String(B)}`,z[B],U[B])}for(let B of _){if(J0(B))throw new $4(B);if(x2(z[B]))yield gU(`${w}/${globalThis.String(B)}`,U[B])}for(let B of $.reverse()){if(J0(B))throw new $4(B);if(x2(U[B])&&!_.includes(B))yield TU(`${w}/${globalThis.String(B)}`)}}function*yZ(w,z,U){if(!h(U))return yield _4(w,U);for(let $=0;$<Math.min(z.length,U.length);$++)yield*u4(`${w}/${$}`,z[$],U[$]);for(let $=0;$<U.length;$++){if($<z.length)continue;yield gU(`${w}/${$}`,U[$])}for(let $=z.length-1;$>=0;$--){if($<U.length)continue;yield TU(`${w}/${$}`)}}function*iZ(w,z,U){if(!f0(U)||z.length!==U.length||globalThis.Object.getPrototypeOf(z).constructor.name!==globalThis.Object.getPrototypeOf(U).constructor.name)return yield _4(w,U);for(let $=0;$<Math.min(z.length,U.length);$++)yield*u4(`${w}/${$}`,z[$],U[$])}function*hZ(w,z,U){if(z===U)return;yield _4(w,U)}function*u4(w,z,U){if(b2(z))return yield*cZ(w,z,U);if(h(z))return yield*yZ(w,z,U);if(f0(z))return yield*iZ(w,z,U);if(N0(z))return yield*hZ(w,z,U);throw new c8(z,"Unable to create diff edits for unknown value")}function dU(w,z){return[...u4("",w,z)]}function nZ(w){return w.length>0&&w[0].path===""&&w[0].type==="update"}function vZ(w){return w.length===0}function tU(w,z){if(nZ(z))return L2(z[0].value);if(vZ(z))return L2(w);let U=L2(w);for(let $ of z)switch($.type){case"insert":{l0.Set(U,$.path,$.value);break}case"update":{l0.Set(U,$.path,$.value);break}case"delete":{l0.Delete(U,$.path);break}}return U}function pZ(w,z){if(!b2(z))return!1;let U=[...Object.keys(w),...Object.getOwnPropertySymbols(w)],$=[...Object.keys(z),...Object.getOwnPropertySymbols(z)];if(U.length!==$.length)return!1;return U.every((_)=>B4(w[_],z[_]))}function oZ(w,z){return R0(z)&&w.getTime()===z.getTime()}function uZ(w,z){if(!h(z)||w.length!==z.length)return!1;return w.every((U,$)=>B4(U,z[$]))}function mZ(w,z){if(!f0(z)||w.length!==z.length||Object.getPrototypeOf(w).constructor.name!==Object.getPrototypeOf(z).constructor.name)return!1;return w.every((U,$)=>B4(U,z[$]))}function sZ(w,z){return w===z}function B4(w,z){if(b2(w))return pZ(w,z);if(R0(w))return oZ(w,z);if(f0(w))return mZ(w,z);if(h(w))return uZ(w,z);if(N0(w))return sZ(w,z);throw new Error("ValueEquals: Unable to compare value")}class y8 extends n{constructor(w){super(w)}}function lZ(w,z,U,$){if(!b2(U))l0.Set(w,z,L2($));else{let _=Object.getOwnPropertyNames(U),B=Object.getOwnPropertyNames($);for(let q of _)if(!B.includes(q))delete U[q];for(let q of B)if(!_.includes(q))U[q]=null;for(let q of B)i8(w,`${z}/${q}`,U[q],$[q])}}function rZ(w,z,U,$){if(!h(U))l0.Set(w,z,L2($));else{for(let _=0;_<$.length;_++)i8(w,`${z}/${_}`,U[_],$[_]);U.splice($.length)}}function aZ(w,z,U,$){if(f0(U)&&U.length===$.length)for(let _=0;_<U.length;_++)U[_]=$[_];else l0.Set(w,z,L2($))}function eZ(w,z,U,$){if(U===$)return;l0.Set(w,z,$)}function i8(w,z,U,$){if(h($))return rZ(w,z,U,$);if(f0($))return aZ(w,z,U,$);if(b2($))return lZ(w,z,U,$);if(N0($))return eZ(w,z,U,$)}function cU(w){return f0(w)||N0(w)}function wQ(w,z){return b2(w)&&h(z)||h(w)&&b2(z)}function yU(w,z){if(cU(w)||cU(z))throw new y8("Only object and array types can be mutated at the root level");if(wQ(w,z))throw new y8("Cannot assign due type mismatch of assignable values");i8(w,"",w,z)}class q4 extends n{constructor(w,z,U){super("Unable to decode value as it does not match the expected schema");this.schema=w,this.value=z,this.error=U}}class m4 extends n{constructor(w,z,U,$){super($ instanceof Error?$.message:"Unknown error");this.schema=w,this.path=z,this.value=U,this.error=$}}function f2(w,z,U){try{return C2(w)?w[E2].Decode(U):U}catch($){throw new m4(w,z,U,$)}}function zQ(w,z,U,$){return h($)?f2(w,U,$.map((_,B)=>J1(w.items,z,`${U}/${B}`,_))):f2(w,U,$)}function UQ(w,z,U,$){if(!b2($)||N0($))return f2(w,U,$);let _=y4(w),B=_.map((Q)=>Q[0]),q={...$};for(let[Q,P]of _)if(Q in q)q[Q]=J1(P,z,`${U}/${Q}`,q[Q]);if(!C2(w.unevaluatedProperties))return f2(w,U,q);let W=Object.getOwnPropertyNames(q),X=w.unevaluatedProperties,J={...q};for(let Q of W)if(!B.includes(Q))J[Q]=f2(X,`${U}/${Q}`,J[Q]);return f2(w,U,J)}function $Q(w,z,U,$){return f2(w,U,J1(w.not,z,U,$))}function _Q(w,z,U,$){if(!b2($))return f2(w,U,$);let _=S0(w),B={...$};for(let J of _)if(J in B)B[J]=J1(w.properties[J],z,`${U}/${J}`,B[J]);if(!o(w.additionalProperties))return f2(w,U,B);let q=Object.getOwnPropertyNames(B),W=w.additionalProperties,X={...B};for(let J of q)if(!_.includes(J))X[J]=f2(W,`${U}/${J}`,X[J]);return f2(w,U,X)}function BQ(w,z,U,$){if(!b2($))return f2(w,U,$);let _=Object.getOwnPropertyNames(w.patternProperties)[0],B=new RegExp(_),q={...$};for(let Q of Object.getOwnPropertyNames($))if(B.test(Q))q[Q]=J1(w.patternProperties[_],z,`${U}/${Q}`,q[Q]);if(!o(w.additionalProperties))return f2(w,U,q);let W=Object.getOwnPropertyNames(q),X=w.additionalProperties,J={...q};for(let Q of W)if(!B.test(Q))J[Q]=f2(X,`${U}/${Q}`,J[Q]);return f2(w,U,J)}function qQ(w,z,U,$){let _=$2(w,z);return f2(w,U,J1(_,z,U,$))}function WQ(w,z,U,$){let _=$2(w,z);return f2(w,U,J1(_,z,U,$))}function XQ(w,z,U,$){return h($)&&h(w.items)?f2(w,U,w.items.map((_,B)=>J1(_,z,`${U}/${B}`,$[B]))):f2(w,U,$)}function ZQ(w,z,U,$){for(let _ of w.anyOf){if(!Z2(_,z,$))continue;let B=J1(_,z,U,$);return f2(w,U,B)}return f2(w,U,$)}function J1(w,z,U,$){let _=typeof w.$id==="string"?[...z,w]:z,B=w;switch(w[M]){case"Array":return zQ(B,_,U,$);case"Intersect":return UQ(B,_,U,$);case"Not":return $Q(B,_,U,$);case"Object":return _Q(B,_,U,$);case"Record":return BQ(B,_,U,$);case"Ref":return qQ(B,_,U,$);case"Symbol":return f2(B,U,$);case"This":return WQ(B,_,U,$);case"Tuple":return XQ(B,_,U,$);case"Union":return ZQ(B,_,U,$);default:return f2(B,U,$)}}function s4(w,z,U){return J1(w,z,"",U)}class W4 extends n{constructor(w,z,U){super("The encoded value does not match the expected schema");this.schema=w,this.value=z,this.error=U}}class iU extends n{constructor(w,z,U,$){super(`${$ instanceof Error?$.message:"Unknown error"}`);this.schema=w,this.path=z,this.value=U,this.error=$}}function u2(w,z,U){try{return C2(w)?w[E2].Encode(U):U}catch($){throw new iU(w,z,U,$)}}function QQ(w,z,U,$){let _=u2(w,U,$);return h(_)?_.map((B,q)=>Y1(w.items,z,`${U}/${q}`,B)):_}function JQ(w,z,U,$){let _=u2(w,U,$);if(!b2($)||N0($))return _;let B=y4(w),q=B.map((P)=>P[0]),W={..._};for(let[P,N]of B)if(P in W)W[P]=Y1(N,z,`${U}/${P}`,W[P]);if(!C2(w.unevaluatedProperties))return u2(w,U,W);let X=Object.getOwnPropertyNames(W),J=w.unevaluatedProperties,Q={...W};for(let P of X)if(!q.includes(P))Q[P]=u2(J,`${U}/${P}`,Q[P]);return Q}function YQ(w,z,U,$){return u2(w.not,U,u2(w,U,$))}function AQ(w,z,U,$){let _=u2(w,U,$);if(!b2(_))return _;let B=S0(w),q={..._};for(let Q of B)if(Q in q)q[Q]=Y1(w.properties[Q],z,`${U}/${Q}`,q[Q]);if(!o(w.additionalProperties))return q;let W=Object.getOwnPropertyNames(q),X=w.additionalProperties,J={...q};for(let Q of W)if(!B.includes(Q))J[Q]=u2(X,`${U}/${Q}`,J[Q]);return J}function PQ(w,z,U,$){let _=u2(w,U,$);if(!b2($))return _;let B=Object.getOwnPropertyNames(w.patternProperties)[0],q=new RegExp(B),W={..._};for(let P of Object.getOwnPropertyNames($))if(q.test(P))W[P]=Y1(w.patternProperties[B],z,`${U}/${P}`,W[P]);if(!o(w.additionalProperties))return u2(w,U,W);let X=Object.getOwnPropertyNames(W),J=w.additionalProperties,Q={...W};for(let P of X)if(!q.test(P))Q[P]=u2(J,`${U}/${P}`,Q[P]);return Q}function SQ(w,z,U,$){let _=$2(w,z),B=Y1(_,z,U,$);return u2(w,U,B)}function MQ(w,z,U,$){let _=$2(w,z),B=Y1(_,z,U,$);return u2(w,U,B)}function LQ(w,z,U,$){let _=u2(w,U,$);return h(w.items)?w.items.map((B,q)=>Y1(B,z,`${U}/${q}`,_[q])):[]}function HQ(w,z,U,$){for(let _ of w.anyOf){if(!Z2(_,z,$))continue;let B=Y1(_,z,U,$);return u2(w,U,B)}for(let _ of w.anyOf){let B=Y1(_,z,U,$);if(!Z2(w,z,B))continue;return u2(w,U,B)}return u2(w,U,$)}function Y1(w,z,U,$){let _=typeof w.$id==="string"?[...z,w]:z,B=w;switch(w[M]){case"Array":return QQ(B,_,U,$);case"Intersect":return JQ(B,_,U,$);case"Not":return YQ(B,_,U,$);case"Object":return AQ(B,_,U,$);case"Record":return PQ(B,_,U,$);case"Ref":return SQ(B,_,U,$);case"This":return MQ(B,_,U,$);case"Tuple":return LQ(B,_,U,$);case"Union":return HQ(B,_,U,$);default:return u2(B,U,$)}}function l4(w,z,U){return Y1(w,z,"",U)}function GQ(w,z){return C2(w)||m2(w.items,z)}function RQ(w,z){return C2(w)||m2(w.items,z)}function NQ(w,z){return C2(w)||m2(w.returns,z)||w.parameters.some((U)=>m2(U,z))}function bQ(w,z){return C2(w)||m2(w.returns,z)||w.parameters.some((U)=>m2(U,z))}function DQ(w,z){return C2(w)||C2(w.unevaluatedProperties)||w.allOf.some((U)=>m2(U,z))}function OQ(w,z){return C2(w)||m2(w.items,z)}function CQ(w,z){return C2(w)||m2(w.not,z)}function IQ(w,z){return C2(w)||Object.values(w.properties).some((U)=>m2(U,z))||o(w.additionalProperties)&&m2(w.additionalProperties,z)}function FQ(w,z){return C2(w)||m2(w.item,z)}function jQ(w,z){let U=Object.getOwnPropertyNames(w.patternProperties)[0],$=w.patternProperties[U];return C2(w)||m2($,z)||o(w.additionalProperties)&&C2(w.additionalProperties)}function KQ(w,z){if(C2(w))return!0;return m2($2(w,z),z)}function EQ(w,z){if(C2(w))return!0;return m2($2(w,z),z)}function xQ(w,z){return C2(w)||!x2(w.items)&&w.items.some((U)=>m2(U,z))}function kQ(w,z){return C2(w)||w.anyOf.some((U)=>m2(U,z))}function m2(w,z){let U=m(w.$id)?[...z,w]:z,$=w;if(w.$id&&h8.has(w.$id))return!1;if(w.$id)h8.add(w.$id);switch(w[M]){case"Array":return GQ($,U);case"AsyncIterator":return RQ($,U);case"Constructor":return NQ($,U);case"Function":return bQ($,U);case"Intersect":return DQ($,U);case"Iterator":return OQ($,U);case"Not":return CQ($,U);case"Object":return IQ($,U);case"Promise":return FQ($,U);case"Record":return jQ($,U);case"Ref":return KQ($,U);case"This":return EQ($,U);case"Tuple":return xQ($,U);case"Union":return kQ($,U);default:return C2(w)}}var h8=new Set;function X4(w,z){return h8.clear(),m2(w,z)}var u={};n1(u,{Patch:()=>vQ,Mutate:()=>pQ,Hash:()=>nQ,Errors:()=>v8,Equal:()=>iQ,Encode:()=>yQ,Diff:()=>hQ,Default:()=>cQ,Decode:()=>tQ,Create:()=>fQ,Convert:()=>TQ,Clone:()=>dQ,Clean:()=>gQ,Check:()=>n8,Cast:()=>VQ});function VQ(...w){return v4.apply(v4,w)}function fQ(...w){return E0.apply(E0,w)}function n8(...w){return Z2.apply(Z2,w)}function gQ(...w){return f8.apply(f8,w)}function TQ(...w){return g8.apply(g8,w)}function dQ(w){return L2(w)}function tQ(...w){let[z,U,$]=w.length===3?[w[0],w[1],w[2]]:[w[0],[],w[1]];if(!n8(z,U,$))throw new q4(z,$,v8(z,U,$).First());return X4(z,U)?s4(z,U,$):$}function cQ(...w){return T8.apply(T8,w)}function yQ(...w){let[z,U,$]=w.length===3?[w[0],w[1],w[2]]:[w[0],[],w[1]],_=X4(z,U)?l4(z,U,$):$;if(!n8(z,U,_))throw new W4(z,_,v8(z,U,_).First());return _}function v8(...w){return r6.apply(r6,w)}function iQ(w,z){return B4(w,z)}function hQ(w,z){return dU(w,z)}function nQ(w){return T1(w)}function vQ(w,z){return tU(w,z)}function pQ(w,z){yU(w,z)}function hU(w){return w.map((z)=>p8(z))}function oQ(w){return X0(hU(w))}function uQ(w){return J2(hU(w))}function mQ(w){return p8(w)}function p8(w){return y2(w)?oQ(w.allOf):W2(w)?uQ(w.anyOf):u1(w)?mQ(w.item):w}function o8(w,z={}){return E(p8(w),z)}function sQ(w){let z=[];for(let U of w)z.push(...S0(U));return Mz(z)}function lQ(w){return w.filter((z)=>!P6(z))}function rQ(w,z){let U=[];for(let $ of w)U.push(...o6($,[z]));return lQ(U)}function aQ(w,z){let U={};for(let $ of z)U[$]=d4(rQ(w,$));return U}function u8(w,z={}){let U=sQ(w),$=aQ(w,U);return P2($,z)}function Z4(w={}){return{...w,[M]:"Date",type:"Date"}}function Q4(w={}){return{...w,[M]:"Null",type:"null"}}function J4(w){return{...w,[M]:"Symbol",type:"symbol"}}function Y4(w={}){return{...w,[M]:"Undefined",type:"undefined"}}function A4(w={}){return{...w,[M]:"Uint8Array",type:"Uint8Array"}}function eQ(w){return w.map((z)=>m8(z,!1))}function wJ(w){let z={};for(let U of globalThis.Object.getOwnPropertyNames(w))z[U]=F0(m8(w[U],!1));return z}function r4(w,z){return z===!0?w:F0(w)}function m8(w,z){return W8(w)?r4(K1(),z):Z8(w)?r4(K1(),z):Y0(w)?F0(s0(eQ(w))):v1(w)?A4():x6(w)?Z4():D2(w)?r4(P2(wJ(w)),z):X8(w)?r4(N1([],X1()),z):V2(w)?Y4():Q8(w)?Q4():Y8(w)?J4():E6(w)?s1():o0(w)?X2(w):f1(w)?X2(w):O2(w)?X2(w):P2({})}function s8(w,z={}){return E(m8(w,!0),z)}function l8(w,z={}){return s0(t2(w.parameters),{...z})}function P4(w,z){return w.map((U)=>y0(U,z))}function zJ(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=y0(w[$],z);return U}function UJ(w,z){return w.parameters=P4(w.parameters,z),w.returns=y0(w.returns,z),w}function $J(w,z){return w.parameters=P4(w.parameters,z),w.returns=y0(w.returns,z),w}function _J(w,z){return w.allOf=P4(w.allOf,z),w}function BJ(w,z){return w.anyOf=P4(w.anyOf,z),w}function qJ(w,z){if(V2(w.items))return w;return w.items=P4(w.items,z),w}function WJ(w,z){return w.items=y0(w.items,z),w}function XJ(w,z){return w.properties=zJ(w.properties,z),w}function ZJ(w,z){return w.item=y0(w.item,z),w}function QJ(w,z){return w.items=y0(w.items,z),w}function JJ(w,z){return w.items=y0(w.items,z),w}function YJ(w,z){let U=z.find((_)=>_.$id===w.$ref);if(U===void 0)throw Error(`Unable to dereference schema with \$id ${w.$ref}`);let $=c2(U,["$id"]);return y0($,z)}function AJ(w,z){return T6(w)?UJ(w,z):d6(w)?$J(w,z):y2(w)?_J(w,z):W2(w)?BJ(w,z):u0(w)?qJ(w,z):b1(w)?WJ(w,z):v2(w)?XJ(w,z):u1(w)?ZJ(w,z):g6(w)?QJ(w,z):t6(w)?JJ(w,z):M8(w)?YJ(w,z):w}function y0(w,z){return AJ(E(w),t2(z))}function r8(w,z={}){if(V2(w))throw new Error("Enum undefined or empty");let U=globalThis.Object.getOwnPropertyNames(w).filter((B)=>isNaN(B)).map((B)=>w[B]),_=[...new Set(U)].map((B)=>X2(B));return J2(_,{...z,[b0]:"Enum"})}function nU(w,z){return e1(l1(w),z)}function PJ(w,z){let U=w.filter(($)=>d1($,z)===R.False);return U.length===1?U[0]:J2(U)}function e1(w,z,U={}){if(O0(w))return E(nU(w,z),U);if(j2(w))return E(vU(w,z),U);return E(W2(w)?PJ(w.anyOf,z):d1(w,z)!==R.False?Q2():w,U)}function SJ(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=e1(w[$],z);return U}function MJ(w,z){return SJ(w.properties,z)}function vU(w,z){let U=MJ(w,z);return z2(U)}function pU(w,z){return w6(l1(w),z)}function LJ(w,z){let U=w.filter(($)=>d1($,z)!==R.False);return U.length===1?U[0]:J2(U)}function w6(w,z,U={}){if(O0(w))return E(pU(w,z),U);if(j2(w))return E(oU(w,z),U);return E(W2(w)?LJ(w.anyOf,z):d1(w,z)!==R.False?w:Q2(),U)}function HJ(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=w6(w[$],z);return U}function GJ(w,z){return HJ(w.properties,z)}function oU(w,z){let U=GJ(w,z);return z2(U)}function a8(w,z={}){return E(w.returns,z)}function e8(w={}){return{...w,[M]:"Integer",type:"integer"}}function RJ(w,z,U){return{[w]:r0(X2(w),z,U)}}function NJ(w,z,U){return w.reduce(($,_)=>{return{...$,...RJ(_,z,U)}},{})}function bJ(w,z,U){return NJ(w.keys,z,U)}function uU(w,z,U){let $=bJ(w,z,U);return z2($)}function DJ(w){let[z,U]=[w.slice(0,1),w.slice(1)];return[z.toLowerCase(),U].join("")}function OJ(w){let[z,U]=[w.slice(0,1),w.slice(1)];return[z.toUpperCase(),U].join("")}function CJ(w){return w.toUpperCase()}function IJ(w){return w.toLowerCase()}function FJ(w,z,U){let $=L6(w.pattern);if(!m1($))return{...w,pattern:mU(w.pattern,z)};let q=[...n6($)].map((J)=>X2(J)),W=sU(q,z),X=J2(W);return p6([X],U)}function mU(w,z){return typeof w==="string"?z==="Uncapitalize"?DJ(w):z==="Capitalize"?OJ(w):z==="Uppercase"?CJ(w):z==="Lowercase"?IJ(w):w:w.toString()}function sU(w,z){return w.map((U)=>r0(U,z))}function r0(w,z,U={}){return D0(w)?uU(w,z,U):O0(w)?FJ(w,z,w):W2(w)?J2(sU(w.anyOf,z),U):D1(w)?X2(mU(w.const,z),U):w}function w5(w,z={}){return r0(w,"Capitalize",z)}function z5(w,z={}){return r0(w,"Lowercase",z)}function U5(w,z={}){return r0(w,"Uncapitalize",z)}function $5(w,z={}){return r0(w,"Uppercase",z)}function _5(w,z){return{...z,[M]:"Not",not:E(w)}}function jJ(w,z,U){let $={};for(let _ of globalThis.Object.getOwnPropertyNames(w))$[_]=z6(w[_],z,U);return $}function KJ(w,z,U){return jJ(w.properties,z,U)}function lU(w,z,U){let $=KJ(w,z,U);return z2($)}function EJ(w,z){return w.map((U)=>B5(U,z))}function xJ(w,z){return w.map((U)=>B5(U,z))}function kJ(w,z){let{[z]:U,...$}=w;return $}function VJ(w,z){return z.reduce((U,$)=>kJ(U,$),w)}function B5(w,z){return y2(w)?X0(EJ(w.allOf,z)):W2(w)?J2(xJ(w.anyOf,z)):v2(w)?P2(VJ(w.properties,z)):P2({})}function z6(w,z,U={}){if(D0(z))return rU(w,z,U);if(j2(w))return lU(w,z,U);let $=C0(z)?P0(z):z,_=c2(w,[E2,"$id","required"]),B=E(B5(w,$),U);return{..._,...B}}function fJ(w,z,U){return{[z]:z6(w,[z],U)}}function gJ(w,z,U){return z.reduce(($,_)=>{return{...$,...fJ(w,_,U)}},{})}function TJ(w,z,U){return gJ(w,z.keys,U)}function rU(w,z,U){let $=TJ(w,z,U);return z2($)}function q5(w,z={}){return s0(t2(w.parameters),{...z})}function aU(w){return w.map((z)=>eU(z))}function dJ(w){let z={};for(let U of globalThis.Object.getOwnPropertyNames(w))z[U]=W0(w[U]);return z}function eU(w){return y2(w)?X0(aU(w.allOf)):W2(w)?J2(aU(w.anyOf)):v2(w)?P2(dJ(w.properties)):P2({})}function S4(w,z={}){if(j2(w))return w9(w,z);let U=c2(w,[E2,"$id","required"]),$=E(eU(w),z);return{...U,...$}}function tJ(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=S4(w[$],z);return U}function cJ(w,z){return tJ(w.properties,z)}function w9(w,z){let U=cJ(w,z);return z2(U)}function yJ(w,z,U){let $={};for(let _ of globalThis.Object.getOwnPropertyNames(w))$[_]=U6(w[_],z,U);return $}function iJ(w,z,U){return yJ(w.properties,z,U)}function z9(w,z,U){let $=iJ(w,z,U);return z2($)}function hJ(w,z){return w.map((U)=>W5(U,z))}function nJ(w,z){return w.map((U)=>W5(U,z))}function vJ(w,z){let U={};for(let $ of z)if($ in w)U[$]=w[$];return U}function W5(w,z){return y2(w)?X0(hJ(w.allOf,z)):W2(w)?J2(nJ(w.anyOf,z)):v2(w)?P2(vJ(w.properties,z)):P2({})}function U6(w,z,U={}){if(D0(z))return U9(w,z,U);if(j2(w))return z9(w,z,U);let $=C0(z)?P0(z):z,_=c2(w,[E2,"$id","required"]),B=E(W5(w,$),U);return{..._,...B}}function pJ(w,z,U){return{[z]:U6(w,[z],U)}}function oJ(w,z,U){return z.reduce(($,_)=>{return{...$,...pJ(w,_,U)}},{})}function uJ(w,z,U){return oJ(w,z.keys,U)}function U9(w,z,U){let $=uJ(w,z,U);return z2($)}function X5(w){return F0(W0(w))}function M4(w,z,U){return{...U,[M]:"Record",type:"object",patternProperties:{[w]:E(z)}}}function Z5(w,z,U){let $={};for(let _ of w)$[_]=E(z);return P2($,{...U,[b0]:"Record"})}function mJ(w,z,U){return t4(w)?Z5(P0(w),z,U):M4(w.pattern,z,U)}function sJ(w,z,U){return Z5(P0(J2(w)),z,U)}function lJ(w,z,U){return Z5([w.toString()],z,U)}function rJ(w,z,U){return M4(w.source,z,U)}function aJ(w,z,U){let $=V2(w.pattern)?g1:w.pattern;return M4($,z,U)}function eJ(w,z,U){return M4(C1,z,U)}function wY(w,z,U){return M4(C1,z,U)}function Q5(w,z,U={}){return W2(w)?sJ(w.anyOf,z,U):O0(w)?mJ(w,z,U):D1(w)?lJ(w.const,z,U):p1(w)?eJ(w,z,U):o1(w)?wY(w,z,U):L8(w)?rJ(w,z,U):c6(w)?aJ(w,z,U):Q2(U)}var zY=0;function J5(w,z={}){if(V2(z.$id))z.$id=`T${zY++}`;let U=w({[M]:"This",$ref:`${z.$id}`});return U.$id=z.$id,E({...z,[b0]:"Recursive",...U})}function Y5(w,z={}){if(O2(w))return{...z,[M]:"Ref",$ref:w};if(V2(w.$id))throw new Error("Reference target type must specify an $id");return{...z,[M]:"Ref",$ref:w.$id}}function A5(w,z={}){let U=O2(w)?new globalThis.RegExp(w):w;return{...z,[M]:"RegExp",type:"RegExp",source:U.source,flags:U.flags}}function $9(w){return w.map((z)=>_9(z))}function UY(w){let z={};for(let U of globalThis.Object.getOwnPropertyNames(w))z[U]=c2(w[U],[U0]);return z}function _9(w){return y2(w)?X0($9(w.allOf)):W2(w)?J2($9(w.anyOf)):v2(w)?P2(UY(w.properties)):P2({})}function L4(w,z={}){if(j2(w))return B9(w,z);else{let U=c2(w,[E2,"$id","required"]),$=E(_9(w),z);return{...U,...$}}}function $Y(w,z){let U={};for(let $ of globalThis.Object.getOwnPropertyNames(w))U[$]=L4(w[$],z);return U}function _Y(w,z){return $Y(w.properties,z)}function B9(w,z){let U=_Y(w,z);return z2(U)}function BY(w){return y2(w)?t2(w.allOf):W2(w)?t2(w.anyOf):u0(w)?t2(w.items??[]):[]}function P5(w){return t2(BY(w))}function S5(w,z={}){return E(w.returns,z)}function M5(w){return JSON.parse(JSON.stringify(w))}class q9{constructor(w){this.schema=w}Decode(w){return new W9(this.schema,w)}}class W9{constructor(w,z){this.schema=w,this.decode=z}EncodeTransform(w,z){let _={Encode:(B)=>z[E2].Encode(w(B)),Decode:(B)=>this.decode(z[E2].Decode(B))};return{...z,[E2]:_}}EncodeSchema(w,z){let U={Decode:this.decode,Encode:w};return{...z,[E2]:U}}Encode(w){let z=E(this.schema);return S6(z)?this.EncodeTransform(w,z):this.EncodeSchema(w,z)}}function L5(w){return new q9(w)}function H5(w={}){return{...w,[M]:"Void",type:"void"}}var G5={};n1(G5,{Void:()=>H5,Uppercase:()=>$5,Unsafe:()=>K6,Unknown:()=>X1,Union:()=>J2,Undefined:()=>Y4,Uncapitalize:()=>U5,Uint8Array:()=>A4,Tuple:()=>s0,Transform:()=>L5,TemplateLiteral:()=>p6,Symbol:()=>J4,String:()=>I0,Strict:()=>M5,ReturnType:()=>S5,Rest:()=>P5,Required:()=>L4,RegExp:()=>A5,Ref:()=>Y5,Recursive:()=>J5,Record:()=>Q5,ReadonlyOptional:()=>X5,Readonly:()=>F0,Promise:()=>m6,Pick:()=>U6,Partial:()=>S4,Parameters:()=>q5,Optional:()=>W0,Omit:()=>z6,Object:()=>P2,Number:()=>m0,Null:()=>Q4,Not:()=>_5,Never:()=>Q2,Mapped:()=>b8,Lowercase:()=>z5,Literal:()=>X2,KeyOf:()=>l6,Iterator:()=>u6,Intersect:()=>X0,Integer:()=>e8,InstanceType:()=>a8,Index:()=>r1,Function:()=>N1,Extract:()=>w6,Extends:()=>a1,Exclude:()=>e1,Enum:()=>r8,Deref:()=>y0,Date:()=>Z4,ConstructorParameters:()=>l8,Constructor:()=>f6,Const:()=>s8,Composite:()=>u8,Capitalize:()=>w5,Boolean:()=>v6,BigInt:()=>s1,Awaited:()=>o8,AsyncIterator:()=>V6,Array:()=>k6,Any:()=>K1});var b6=G5;class D5{constructor(w,z,U,$){this.schema=w,this.references=z,this.checkFunc=U,this.code=$,this.hasTransform=X4(w,z)}Code(){return this.code}Errors(w){return r6(this.schema,this.references,w)}Check(w){return this.checkFunc(w)}Decode(w){if(!this.checkFunc(w))throw new q4(this.schema,w,this.Errors(w).First());return this.hasTransform?s4(this.schema,this.references,w):w}Encode(w){let z=this.hasTransform?l4(this.schema,this.references,w):w;if(!this.checkFunc(z))throw new W4(this.schema,w,this.Errors(w).First());return z}}var E1;(function(w){function z(B){return B===36}w.DollarSign=z;function U(B){return B===95}w.IsUnderscore=U;function $(B){return B>=65&&B<=90||B>=97&&B<=122}w.IsAlpha=$;function _(B){return B>=48&&B<=57}w.IsNumeric=_})(E1||(E1={}));var a4;(function(w){function z(B){if(B.length===0)return!1;return E1.IsNumeric(B.charCodeAt(0))}function U(B){if(z(B))return!1;for(let q=0;q<B.length;q++){let W=B.charCodeAt(q);if(!(E1.IsAlpha(W)||E1.IsNumeric(W)||E1.DollarSign(W)||E1.IsUnderscore(W)))return!1}return!0}function $(B){return B.replace(/'/g,"\\'")}function _(B,q){return U(q)?`${B}.${q}`:`${B}['${$(q)}']`}w.Encode=_})(a4||(a4={}));var R5;(function(w){function z(U){let $=[];for(let _=0;_<U.length;_++){let B=U.charCodeAt(_);if(E1.IsNumeric(B)||E1.IsAlpha(B))$.push(U.charAt(_));else $.push(`_${B}_`)}return $.join("").replace(/__/g,"_")}w.Encode=z})(R5||(R5={}));var N5;(function(w){function z(U){return U.replace(/'/g,"\\'")}w.Escape=z})(N5||(N5={}));class X9 extends n{constructor(w){super("Unknown type");this.schema=w}}class b5 extends n{constructor(w){super("Preflight validation check failed to guard for the given schema");this.schema=w}}var $6;(function(w){function z(q,W,X){return d2.ExactOptionalPropertyTypes?`('${W}' in ${q} ? ${X} : true)`:`(${a4.Encode(q,W)} !== undefined ? ${X} : true)`}w.IsExactOptionalProperty=z;function U(q){return!d2.AllowArrayObject?`(typeof ${q} === 'object' && ${q} !== null && !Array.isArray(${q}))`:`(typeof ${q} === 'object' && ${q} !== null)`}w.IsObjectLike=U;function $(q){return!d2.AllowArrayObject?`(typeof ${q} === 'object' && ${q} !== null && !Array.isArray(${q}) && !(${q} instanceof Date) && !(${q} instanceof Uint8Array))`:`(typeof ${q} === 'object' && ${q} !== null && !(${q} instanceof Date) && !(${q} instanceof Uint8Array))`}w.IsRecordLike=$;function _(q){return d2.AllowNaN?`typeof ${q} === 'number'`:`Number.isFinite(${q})`}w.IsNumberLike=_;function B(q){return d2.AllowNullVoid?`(${q} === undefined || ${q} === null)`:`${q} === undefined`}w.IsVoidLike=B})($6||($6={}));var x1;(function(w){function z(Y){return Y[M]==="Any"||Y[M]==="Unknown"}function*U(Y,f,S){yield"true"}function*$(Y,f,S){yield`Array.isArray(${S})`;let[p,g]=[r2("value","any"),r2("acc","number")];if(t(Y.maxItems))yield`${S}.length <= ${Y.maxItems}`;if(t(Y.minItems))yield`${S}.length >= ${Y.minItems}`;let T=D(Y.items,f,"value");if(yield`${S}.every((${p}) => ${T})`,o(Y.contains)||t(Y.minContains)||t(Y.maxContains)){let F2=o(Y.contains)?Y.contains:Q2(),Q0=D(F2,f,"value"),G1=t(Y.minContains)?[`(count >= ${Y.minContains})`]:[],p0=t(Y.maxContains)?[`(count <= ${Y.maxContains})`]:[],U1=`const count = value.reduce((${g}, ${p}) => ${Q0} ? acc + 1 : acc, 0)`,E4=["(count > 0)",...G1,...p0].join(" && ");yield`((${p}) => { ${U1}; return ${E4}})(${S})`}if(Y.uniqueItems===!0)yield`((${p}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${S})`}function*_(Y,f,S){yield`(typeof value === 'object' && Symbol.asyncIterator in ${S})`}function*B(Y,f,S){if(yield`(typeof ${S} === 'bigint')`,e2(Y.exclusiveMaximum))yield`${S} < BigInt(${Y.exclusiveMaximum})`;if(e2(Y.exclusiveMinimum))yield`${S} > BigInt(${Y.exclusiveMinimum})`;if(e2(Y.maximum))yield`${S} <= BigInt(${Y.maximum})`;if(e2(Y.minimum))yield`${S} >= BigInt(${Y.minimum})`;if(e2(Y.multipleOf))yield`(${S} % BigInt(${Y.multipleOf})) === 0`}function*q(Y,f,S){yield`(typeof ${S} === 'boolean')`}function*W(Y,f,S){yield*H1(Y.returns,f,`${S}.prototype`)}function*X(Y,f,S){if(yield`(${S} instanceof Date) && Number.isFinite(${S}.getTime())`,t(Y.exclusiveMaximumTimestamp))yield`${S}.getTime() < ${Y.exclusiveMaximumTimestamp}`;if(t(Y.exclusiveMinimumTimestamp))yield`${S}.getTime() > ${Y.exclusiveMinimumTimestamp}`;if(t(Y.maximumTimestamp))yield`${S}.getTime() <= ${Y.maximumTimestamp}`;if(t(Y.minimumTimestamp))yield`${S}.getTime() >= ${Y.minimumTimestamp}`;if(t(Y.multipleOfTimestamp))yield`(${S}.getTime() % ${Y.multipleOfTimestamp}) === 0`}function*J(Y,f,S){yield`(typeof ${S} === 'function')`}function*Q(Y,f,S){if(yield`Number.isInteger(${S})`,t(Y.exclusiveMaximum))yield`${S} < ${Y.exclusiveMaximum}`;if(t(Y.exclusiveMinimum))yield`${S} > ${Y.exclusiveMinimum}`;if(t(Y.maximum))yield`${S} <= ${Y.maximum}`;if(t(Y.minimum))yield`${S} >= ${Y.minimum}`;if(t(Y.multipleOf))yield`(${S} % ${Y.multipleOf}) === 0`}function*P(Y,f,S){let p=Y.allOf.map((g)=>D(g,f,S)).join(" && ");if(Y.unevaluatedProperties===!1){let g=d(`${new RegExp(I1(Y))};`),T=`Object.getOwnPropertyNames(${S}).every(key => ${g}.test(key))`;yield`(${p} && ${T})`}else if(o(Y.unevaluatedProperties)){let g=d(`${new RegExp(I1(Y))};`),T=`Object.getOwnPropertyNames(${S}).every(key => ${g}.test(key) || ${D(Y.unevaluatedProperties,f,`${S}[key]`)})`;yield`(${p} && ${T})`}else yield`(${p})`}function*N(Y,f,S){yield`(typeof value === 'object' && Symbol.iterator in ${S})`}function*Z(Y,f,S){if(typeof Y.const==="number"||typeof Y.const==="boolean")yield`(${S} === ${Y.const})`;else yield`(${S} === '${N5.Escape(Y.const)}')`}function*O(Y,f,S){yield"false"}function*C(Y,f,S){yield`(!${D(Y.not,f,S)})`}function*b(Y,f,S){yield`(${S} === null)`}function*I(Y,f,S){if(yield $6.IsNumberLike(S),t(Y.exclusiveMaximum))yield`${S} < ${Y.exclusiveMaximum}`;if(t(Y.exclusiveMinimum))yield`${S} > ${Y.exclusiveMinimum}`;if(t(Y.maximum))yield`${S} <= ${Y.maximum}`;if(t(Y.minimum))yield`${S} >= ${Y.minimum}`;if(t(Y.multipleOf))yield`(${S} % ${Y.multipleOf}) === 0`}function*k(Y,f,S){if(yield $6.IsObjectLike(S),t(Y.minProperties))yield`Object.getOwnPropertyNames(${S}).length >= ${Y.minProperties}`;if(t(Y.maxProperties))yield`Object.getOwnPropertyNames(${S}).length <= ${Y.maxProperties}`;let p=Object.getOwnPropertyNames(Y.properties);for(let g of p){let T=a4.Encode(S,g),F2=Y.properties[g];if(Y.required&&Y.required.includes(g)){if(yield*H1(F2,f,T),F1(F2)||z(F2))yield`('${g}' in ${S})`}else{let Q0=D(F2,f,T);yield $6.IsExactOptionalProperty(S,g,Q0)}}if(Y.additionalProperties===!1)if(Y.required&&Y.required.length===p.length)yield`Object.getOwnPropertyNames(${S}).length === ${p.length}`;else{let g=`[${p.map((T)=>`'${T}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${S}).every(key => ${g}.includes(key))`}if(typeof Y.additionalProperties==="object"){let g=D(Y.additionalProperties,f,`${S}[key]`),T=`[${p.map((F2)=>`'${F2}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${S}).every(key => ${T}.includes(key) || ${g}))`}}function*j(Y,f,S){yield`(typeof value === 'object' && typeof ${S}.then === 'function')`}function*v(Y,f,S){if(yield $6.IsRecordLike(S),t(Y.minProperties))yield`Object.getOwnPropertyNames(${S}).length >= ${Y.minProperties}`;if(t(Y.maxProperties))yield`Object.getOwnPropertyNames(${S}).length <= ${Y.maxProperties}`;let[p,g]=Object.entries(Y.patternProperties)[0],T=d(`${new RegExp(p)}`),F2=D(g,f,"value"),Q0=o(Y.additionalProperties)?D(Y.additionalProperties,f,S):Y.additionalProperties===!1?"false":"true",G1=`(${T}.test(key) ? ${F2} : ${Q0})`;yield`(Object.entries(${S}).every(([key, value]) => ${G1}))`}function*y(Y,f,S){let p=$2(Y,f);if(F.functions.has(Y.$ref))return yield`${V(Y.$ref)}(${S})`;yield*H1(p,f,S)}function*H2(Y,f,S){let p=d(`${new RegExp(Y.source,Y.flags)};`);if(yield`(typeof ${S} === 'string')`,t(Y.maxLength))yield`${S}.length <= ${Y.maxLength}`;if(t(Y.minLength))yield`${S}.length >= ${Y.minLength}`;yield`${p}.test(${S})`}function*Y2(Y,f,S){if(yield`(typeof ${S} === 'string')`,t(Y.maxLength))yield`${S}.length <= ${Y.maxLength}`;if(t(Y.minLength))yield`${S}.length >= ${Y.minLength}`;if(Y.pattern!==void 0)yield`${d(`${new RegExp(Y.pattern)};`)}.test(${S})`;if(Y.format!==void 0)yield`format('${Y.format}', ${S})`}function*A2(Y,f,S){yield`(typeof ${S} === 'symbol')`}function*q2(Y,f,S){yield`(typeof ${S} === 'string')`,yield`${d(`${new RegExp(Y.pattern)};`)}.test(${S})`}function*l(Y,f,S){yield`${V(Y.$ref)}(${S})`}function*K2(Y,f,S){if(yield`Array.isArray(${S})`,Y.items===void 0)return yield`${S}.length === 0`;yield`(${S}.length === ${Y.maxItems})`;for(let p=0;p<Y.items.length;p++)yield`${D(Y.items[p],f,`${S}[${p}]`)}`}function*G0(Y,f,S){yield`${S} === undefined`}function*h1(Y,f,S){yield`(${Y.anyOf.map((g)=>D(g,f,S)).join(" || ")})`}function*U8(Y,f,S){if(yield`${S} instanceof Uint8Array`,t(Y.maxByteLength))yield`(${S}.length <= ${Y.maxByteLength})`;if(t(Y.minByteLength))yield`(${S}.length >= ${Y.minByteLength})`}function*Q6(Y,f,S){yield"true"}function*Z0(Y,f,S){yield $6.IsVoidLike(S)}function*$8(Y,f,S){let p=F.instances.size;F.instances.set(p,Y),yield`kind('${Y[M]}', ${p}, ${S})`}function*H1(Y,f,S,p=!0){let g=m(Y.$id)?[...f,Y]:f,T=Y;if(p&&m(Y.$id)){let F2=V(Y.$id);if(F.functions.has(F2))return yield`${F2}(${S})`;else{let Q0=i(F2,Y,f,"value",!1);return F.functions.set(F2,Q0),yield`${F2}(${S})`}}switch(T[M]){case"Any":return yield*U(T,g,S);case"Array":return yield*$(T,g,S);case"AsyncIterator":return yield*_(T,g,S);case"BigInt":return yield*B(T,g,S);case"Boolean":return yield*q(T,g,S);case"Constructor":return yield*W(T,g,S);case"Date":return yield*X(T,g,S);case"Function":return yield*J(T,g,S);case"Integer":return yield*Q(T,g,S);case"Intersect":return yield*P(T,g,S);case"Iterator":return yield*N(T,g,S);case"Literal":return yield*Z(T,g,S);case"Never":return yield*O(T,g,S);case"Not":return yield*C(T,g,S);case"Null":return yield*b(T,g,S);case"Number":return yield*I(T,g,S);case"Object":return yield*k(T,g,S);case"Promise":return yield*j(T,g,S);case"Record":return yield*v(T,g,S);case"Ref":return yield*y(T,g,S);case"RegExp":return yield*H2(T,g,S);case"String":return yield*Y2(T,g,S);case"Symbol":return yield*A2(T,g,S);case"TemplateLiteral":return yield*q2(T,g,S);case"This":return yield*l(T,g,S);case"Tuple":return yield*K2(T,g,S);case"Undefined":return yield*G0(T,g,S);case"Union":return yield*h1(T,g,S);case"Uint8Array":return yield*U8(T,g,S);case"Unknown":return yield*Q6(T,g,S);case"Void":return yield*Z0(T,g,S);default:if(!k2.Has(T[M]))throw new X9(Y);return yield*$8(T,g,S)}}let F={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function D(Y,f,S,p=!0){return`(${[...H1(Y,f,S,p)].join(" && ")})`}function V(Y){return`check_${R5.Encode(Y)}`}function d(Y){let f=`local_${F.variables.size}`;return F.variables.set(f,`const ${f} = ${Y}`),f}function i(Y,f,S,p,g=!0){let[T,F2]=["\n",(U1)=>"".padStart(U1," ")],Q0=r2("value","any"),G1=r("boolean"),p0=[...H1(f,S,p,g)].map((U1)=>`${F2(4)}${U1}`).join(` &&${T}`);return`function ${Y}(${Q0})${G1} {${T}${F2(2)}return (${T}${p0}${T}${F2(2)})\n}`}function r2(Y,f){let S=F.language==="typescript"?`: ${f}`:"";return`${Y}${S}`}function r(Y){return F.language==="typescript"?`: ${Y}`:""}function v0(Y,f,S){let p=i("check",Y,f,"value"),g=r2("value","any"),T=r("boolean"),F2=[...F.functions.values()],Q0=[...F.variables.values()],G1=m(Y.$id)?`return function check(${g})${T} {\n  return ${V(Y.$id)}(value)\n}`:`return ${p}`;return[...Q0,...F2,G1].join("\n")}function n2(...Y){let f={language:"javascript"},[S,p,g]=Y.length===2&&h(Y[1])?[Y[0],Y[1],f]:Y.length===2&&!h(Y[1])?[Y[0],[],Y[1]]:Y.length===3?[Y[0],Y[1],Y[2]]:Y.length===1?[Y[0],[],f]:[null,[],f];if(F.language=g.language,F.variables.clear(),F.functions.clear(),F.instances.clear(),!o(S))throw new b5(S);for(let T of p)if(!o(T))throw new b5(T);return v0(S,p,g)}w.Code=n2;function V0(Y,f=[]){let S=n2(Y,f,{language:"javascript"}),p=globalThis.Function("kind","format","hash",S),g=new Map(F.instances);function T(p0,U1,E4){if(!k2.Has(p0)||!g.has(U1))return!1;let Q$=k2.Get(p0),J$=g.get(U1);return Q$(J$,E4)}function F2(p0,U1){if(!G2.Has(p0))return!1;return G2.Get(p0)(U1)}function Q0(p0){return T1(p0)}let G1=p(T,F2,Q0);return new D5(Y,f,G1,S)}w.Compile=V0})(x1||(x1={}));var o9=j6(O5(),1),u9=j6(O5(),1),m9=j6(e4(),1);var X6=j6(e4(),1),_7=j6(e4(),1);var D6=(w,z)=>{let U=z?.length?{}:null;if(U)for(let $ of z)U[$.part.charCodeAt(0)]=$;return{part:w,store:null,inert:U,params:null,wildcardStore:null}},S9=(w,z)=>({...w,part:z}),M9=(w)=>({name:w,store:null,inert:null}),I5=class w{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(z,U,$,{ignoreError:_=!1,ignoreHistory:B=!1}={}){if(typeof U!=="string")throw new TypeError("Route path must be a string");if(U==="")U="/";else if(U[0]!=="/")U=`/${U}`;let q=U[U.length-1]==="*",W=U.match(w.regex.optionalParams);if(W){let N=U.replaceAll("?","");this.add(z,N,$,{ignoreError:_});for(let Z=0;Z<W.length;Z++){let O=U.replace("/"+W[Z],"");this.add(z,O,$,{ignoreError:!0})}return $}if(W)U=U.replaceAll("?","");if(this.history.find(([N,Z,O])=>N===z&&Z===U))return $;if(q||W&&U.charCodeAt(U.length-1)===63)U=U.slice(0,-1);if(!B)this.history.push([z,U,$]);let X=U.split(w.regex.static),J=U.match(w.regex.params)||[];if(X[X.length-1]==="")X.pop();let Q;if(!this.root[z])Q=this.root[z]=D6("/");else Q=this.root[z];let P=0;for(let N=0;N<X.length;++N){let Z=X[N];if(N>0){let O=J[P++].slice(1);if(Q.params===null)Q.params=M9(O);else if(Q.params.name!==O)if(_)return $;else throw new Error(`Cannot create route "${U}" with parameter "${O}" because a route already exists with a different parameter name ("${Q.params.name}") in the same location`);let C=Q.params;if(C.inert===null){Q=C.inert=D6(Z);continue}Q=C.inert}for(let O=0;;){if(O===Z.length){if(O<Q.part.length){let C=S9(Q,Q.part.slice(O));Object.assign(Q,D6(Z,[C]))}break}if(O===Q.part.length){if(Q.inert===null)Q.inert={};let C=Q.inert[Z.charCodeAt(O)];if(C){Q=C,Z=Z.slice(O),O=0;continue}let b=D6(Z.slice(O));Q.inert[Z.charCodeAt(O)]=b,Q=b;break}if(Z[O]!==Q.part[O]){let C=S9(Q,Q.part.slice(O)),b=D6(Z.slice(O));Object.assign(Q,D6(Q.part.slice(0,O),[C,b])),Q=b;break}++O}}if(P<J.length){let Z=J[P].slice(1);if(Q.params===null)Q.params=M9(Z);else if(Q.params.name!==Z)if(_)return $;else throw new Error(`Cannot create route "${U}" with parameter "${Z}" because a route already exists with a different parameter name ("${Q.params.name}") in the same location`);if(Q.params.store===null)Q.params.store=$;return Q.params.store}if(q){if(Q.wildcardStore===null)Q.wildcardStore=$;return Q.wildcardStore}if(Q.store===null)Q.store=$;return Q.store}find(z,U){let $=this.root[z];if(!$)return null;return k5(U,U.length,$,0)}},k5=(w,z,U,$)=>{let _=U.part,B=_.length,q=$+B;if(B>1){if(q>z)return null;if(B<15){for(let W=1,X=$+1;W<B;++W,++X)if(_.charCodeAt(W)!==w.charCodeAt(X))return null}else if(w.slice($,q)!==_)return null}if(q===z){if(U.store!==null)return{store:U.store,params:{}};if(U.wildcardStore!==null)return{store:U.wildcardStore,params:{"*":""}};return null}if(U.inert!==null){let W=U.inert[w.charCodeAt(q)];if(W!==void 0){let X=k5(w,z,W,q);if(X!==null)return X}}if(U.params!==null){let{store:W,name:X,inert:J}=U.params,Q=w.indexOf("/",q);if(Q!==q){if(Q===-1||Q>=z){if(W!==null){let P={};return P[X]=w.substring(q,z),{store:W,params:P}}}else if(J!==null){let P=k5(w,z,J,Q);if(P!==null)return P.params[X]=w.substring(q,Q),P}}}if(U.wildcardStore!==null)return{store:U.wildcardStore,params:{"*":w.substring(q,z)}};return null},R4=(w)=>{let z=typeof w==="object"?w.fn.toString():typeof w==="string"?w.toString():w,U=z.indexOf(")");if(z.charCodeAt(U+2)===61&&z.charCodeAt(U+5)!==123)return!0;return z.includes("return")},bY=(w)=>{if(w.startsWith("async"))w=w.slice(5);w=w.trimStart();let z=-1;if(w.charCodeAt(0)===40){if(z=w.indexOf("=>",w.indexOf(")")),z!==-1){let _=z;while(_>0)if(w.charCodeAt(--_)===41)break;let B=w.slice(z+2);if(B.charCodeAt(0)===32)B=B.trimStart();return[w.slice(1,_),B,{isArrowReturn:B.charCodeAt(0)!==123}]}}if(w.startsWith("function")){z=w.indexOf("(");let _=w.indexOf(")");return[w.slice(z+1,_),w.slice(_+2),{isArrowReturn:!1}]}let U=w.indexOf("(");if(U!==-1){let _=w.indexOf("\n",2),B=w.slice(0,_),q=B.lastIndexOf(")")+1,W=w.slice(_+1);return[B.slice(U,q),"{"+W,{isArrowReturn:!1}]}let $=w.split("\n",2);return[$[0],$[1],{isArrowReturn:!1}]},DY=(w)=>{let z=w.indexOf("{");if(z===-1)return[-1,0];let U=z+1,$=1;for(;U<w.length;U++){let _=w.charCodeAt(U);if(_===123)$++;else if(_===125)$--;if($===0)break}if($!==0)return[0,w.length];return[z,U+1]},OY=(w)=>{let z=w.lastIndexOf("}");if(z===-1)return[-1,0];let U=z-1,$=1;for(;U>=0;U--){let _=w.charCodeAt(U);if(_===125)$++;else if(_===123)$--;if($===0)break}if($!==0)return[-1,0];return[U,z+1]},t9=(w)=>{while(!0){let z=w.indexOf(":");if(z===-1)break;let U=w.indexOf(",",z);if(U===-1)U=w.indexOf("}",z)-1;if(U===-2)U=w.length;w=w.slice(0,z)+w.slice(U)}return w},c9=(w)=>{let z=!1;if(w.charCodeAt(0)===40)w=w.slice(1,-1);if(w.charCodeAt(0)===123)z=!0,w=w.slice(1,-1);w=w.replace(/( |\t|\n)/g,"").trim();let U=[];while(!0){let[_,B]=DY(w);if(_===-1)break;if(U.push(w.slice(0,_-1)),w.charCodeAt(B)===44)B++;w=w.slice(B)}if(w=t9(w),w)U=U.concat(w.split(","));let $=[];for(let _ of U){if(_.indexOf(",")===-1){$.push(_);continue}for(let B of _.split(","))$.push(B.trim())}return U=$,{hasParenthesis:z,parameters:U}},CY=(w,z)=>{let{parameters:U,hasParenthesis:$}=c9(w);if(!z.query&&U.includes("query"))z.query=!0;if(!z.headers&&U.includes("headers"))z.headers=!0;if(!z.body&&U.includes("body"))z.body=!0;if(!z.cookie&&U.includes("cookie"))z.cookie=!0;if(!z.set&&U.includes("set"))z.set=!0;if(!z.server&&U.includes("server"))z.server=!0;if($)return`{ ${U.join(", ")} }`;return U.join(", ")},IY=(w,z,U)=>{let $=z.indexOf(w+"\n",U),_=z.indexOf(w+"	",U),B=z.indexOf(w+",",U),q=z.indexOf(w+";",U),W=z.indexOf(w+" ",U);return[$,_,B,q,W].filter((X)=>X>0).sort((X,J)=>X-J)[0]||-1},y9=(w,z,U=0)=>{if(U>5)return[];let $=[],_=z;while(!0){let B=IY(" = "+w,_);if(B===-1){let X=_.indexOf(" = "+w);if(X+3+w.length!==_.length)break;B=X}let q=_.slice(0,B),W=q.slice(q.lastIndexOf(" ")+1);if(W==="}"){let[X,J]=OY(q);$.push(t9(_.slice(X,J))),_=_.slice(B+3+w.length);continue}while(W.charCodeAt(0)===44)W=W.slice(1);while(W.charCodeAt(0)===9)W=W.slice(1);if(!W.includes("("))$.push(W);_=_.slice(B+3+w.length)}for(let B of $){if(B.charCodeAt(0)===123)continue;let q=y9(B,z);if(q.length>0)$.push(...q)}return $},FY=(w)=>{if(!w)return;if(w.charCodeAt(0)!==123)return w;if(w=w.slice(2,-2),!w.includes(",")){if(w.includes("..."))return w.slice(w.indexOf("...")+3);return}let U=w.indexOf("...");if(U===-1)return;return w.slice(U+3).trimEnd()},jY=(w,z,U)=>{let $=(_,B)=>w.includes(B+"."+_)||w.includes(B+'["'+_+'"]')||w.includes(B+"['"+_+"']");for(let _ of z){if(!_)continue;if(_.charCodeAt(0)===123){let B=c9(_).parameters;if(!U.query&&B.includes("query"))U.query=!0;if(!U.headers&&B.includes("headers"))U.headers=!0;if(!U.body&&B.includes("body"))U.body=!0;if(!U.cookie&&B.includes("cookie"))U.cookie=!0;if(!U.set&&B.includes("set"))U.set=!0;if(!U.query&&B.includes("server"))U.server=!0;continue}if(!U.query&&$("query",_))U.query=!0;if(w.includes("return "+_)||w.includes("return "+_+".query"))U.query=!0;if(!U.headers&&$("headers",_))U.headers=!0;if(!U.body&&$("body",_))U.body=!0;if(!U.cookie&&$("cookie",_))U.cookie=!0;if(!U.set&&$("set",_))U.set=!0;if(!U.server&&$("server",_))U.server=!0;if(U.query&&U.headers&&U.body&&U.cookie&&U.set&&U.server)break}return z},KY=(w,z,U)=>{try{let $=new RegExp(`(?:\\w)\\((?:.*)?${w}`,"gs");$.test(z);let _=z.charCodeAt($.lastIndex);if(_===41||_===44)return U.query=!0,U.headers=!0,U.body=!0,U.cookie=!0,U.set=!0,U.server=!0,!0;return!1}catch($){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(z),console.log("--- context ---"),console.log(w),!0}},i9=(w,z={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{let U=[];if(w.handler&&typeof w.handler==="function")U.push(w.handler);if(w.request?.length)U.push(...w.request);if(w.beforeHandle?.length)U.push(...w.beforeHandle);if(w.parse?.length)U.push(...w.parse);if(w.error?.length)U.push(...w.error);if(w.transform?.length)U.push(...w.transform);if(w.afterHandle?.length)U.push(...w.afterHandle);if(w.mapResponse?.length)U.push(...w.mapResponse);if(w.afterResponse?.length)U.push(...w.afterResponse);for(let $ of U){if(!$)continue;let _="fn"in $?$.fn:$,[B,q,{isArrowReturn:W}]=bY(_.toString()),X=CY(B,z),J=FY(X);if(J){let Q=y9(J,q);if(Q.splice(0,-1,J),!KY(J,q,z))jY(q,Q,z);if(!z.query&&q.includes("return "+J+".query"))z.query=!0}if(z.query&&z.headers&&z.body&&z.cookie&&z.set&&z.server)break}return z},d5={date:h9,time:V5(!0),"date-time":L9(!0),"iso-time":V5(!1),"iso-date-time":L9(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:dY,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:vY,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:tY,int32:{type:"number",validate:iY},int64:{type:"number",validate:hY},float:{type:"number",validate:G9},double:{type:"number",validate:G9},password:!0,binary:!0};function EY(w){return w%4===0&&(w%100!==0||w%400===0)}var xY=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,kY=[0,31,28,31,30,31,30,31,31,30,31,30,31];function h9(w){let z=xY.exec(w);if(!z)return!1;let U=+z[1],$=+z[2],_=+z[3];return $>=1&&$<=12&&_>=1&&_<=($===2&&EY(U)?29:kY[$])}var VY=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function V5(w){return function z(U){let $=VY.exec(U);if(!$)return!1;let _=+$[1],B=+$[2],q=+$[3],W=$[4],X=$[5]==="-"?-1:1,J=+($[6]||0),Q=+($[7]||0);if(J>23||Q>59||w&&!W)return!1;if(_<=23&&B<=59&&q<60)return!0;let P=B-Q*X,N=_-J*X-(P<0?1:0);return(N===23||N===-1)&&(P===59||P===-1)&&q<61}}var fY=/t|\s/i;function L9(w){let z=V5(w);return function U($){let _=$.split(fY);return _.length===2&&h9(_[0])&&z(_[1])}}var gY=/\/|:/,TY=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function dY(w){return gY.test(w)&&TY.test(w)}var H9=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function tY(w){return H9.lastIndex=0,H9.test(w)}var cY=-2147483648,yY=2147483647;function iY(w){return Number.isInteger(w)&&w<=yY&&w>=cY}function hY(w){return Number.isInteger(w)}function G9(){return!0}var nY=/[^\\]\\Z/;function vY(w){if(nY.test(w))return!1;try{return new RegExp(w),!0}catch(z){return!1}}var n9=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,v9=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,p9=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,pY=d5.date,oY=d5["date-time"];if(!G2.Has("date"))B1.Format("date",(w)=>{let z=w.replace(/"/g,"");if(n9.test(z)||v9.test(z)||p9.test(z)||pY(z)){let U=new Date(z);if(!Number.isNaN(U.getTime()))return!0}return!1});if(!G2.Has("date-time"))B1.Format("date-time",(w)=>{let z=w.replace(/"/g,"");if(n9.test(z)||v9.test(z)||p9.test(z)||oY(z)){let U=new Date(z);if(!Number.isNaN(U.getTime()))return!0}return!1});Object.entries(d5).forEach((w)=>{let[z,U]=w;if(!G2.Has(z)){if(U instanceof RegExp)B1.Format(z,($)=>U.test($));else if(typeof U==="function")B1.Format(z,U)}});var c=Object.assign({},b6),R9=(w)=>{if(typeof w==="string")switch(w.slice(-1)){case"k":return+w.slice(0,w.length-1)*1024;case"m":return+w.slice(0,w.length-1)*1048576;default:return+w}return w},f5=(w,z)=>{if(!(z instanceof Blob))return!1;if(w.minSize&&z.size<R9(w.minSize))return!1;if(w.maxSize&&z.size>R9(w.maxSize))return!1;if(w.extension)if(typeof w.extension==="string"){if(!z.type.startsWith(w.extension))return!1}else{for(let U=0;U<w.extension.length;U++)if(z.type.startsWith(w.extension[U]))return!0;return!1}return!0},uY=k2.Get("Files")??B1.Type("File",f5),mY=k2.Get("Files")??B1.Type("Files",(w,z)=>{if(!Array.isArray(z))return f5(w,z);if(w.minItems&&z.length<w.minItems)return!1;if(w.maxItems&&z.length>w.maxItems)return!1;for(let U=0;U<z.length;U++)if(!f5(w,z[U]))return!1;return!0});if(!G2.Has("numeric"))G2.Set("numeric",(w)=>!!w&&!isNaN(+w));if(!G2.Has("boolean"))G2.Set("boolean",(w)=>w==="true"||w==="false");if(!G2.Has("ObjectString"))G2.Set("ObjectString",(w)=>{let z=w.charCodeAt(0);if(z===9||z===10||z===32)z=w.trimStart().charCodeAt(0);if(z!==123&&z!==91)return!1;try{return JSON.parse(w),!0}catch{return!1}});if(!G2.Has("ArrayString"))G2.Set("ArrayString",(w)=>{let z=w.charCodeAt(0);if(z===9||z===10||z===32)z=w.trimStart().charCodeAt(0);if(z!==123&&z!==91)return!1;try{return JSON.parse(w),!0}catch{return!1}});k2.Set("UnionEnum",(w,z)=>{return(typeof z==="number"||typeof z==="string"||z===null)&&w.enum.includes(z)});var z1={Numeric:(w)=>{let z=b6.Number(w);return c.Transform(c.Union([c.String({format:"numeric",default:0}),c.Number(w)],w)).Decode((U)=>{let $=+U;if(isNaN($))return U;if(w&&!u.Check(z,$))throw new N2("property",z,$);return $}).Encode((U)=>U)},Date:(w)=>{let z=b6.Date(w);return c.Transform(c.Union([b6.Date(w),c.String({format:"date",default:new Date().toISOString()}),c.String({format:"date-time",default:new Date().toISOString()})],w)).Decode((U)=>{if(U instanceof Date)return U;let $=new Date(U);if(!u.Check(z,$))throw new N2("property",z,$);return $}).Encode((U)=>{if(typeof U==="string")return new Date(U);return U})},BooleanString:(w)=>{let z=b6.Boolean(w);return c.Transform(c.Union([c.String({format:"boolean",default:!1}),c.Boolean(w)],w)).Decode((U)=>{if(typeof U==="string")return U==="true";if(w&&!u.Check(z,U))throw new N2("property",z,U);return U}).Encode((U)=>U)},ObjectString:(w,z)=>{let U=c.Object(w,z),$=JSON.stringify(u.Create(U)),_;try{_=x1.Compile(U)}catch{}return c.Transform(c.Union([c.String({format:"ObjectString",default:$}),U])).Decode((B)=>{if(typeof B==="string"){if(B.charCodeAt(0)!==123)throw new N2("property",U,B);try{B=JSON.parse(B)}catch{throw new N2("property",U,B)}if(_){if(!_.Check(B))throw new N2("property",U,B);return _.Decode(B)}if(!u.Check(U,B))throw new N2("property",U,B);return u.Decode(U,B)}return B}).Encode((B)=>{if(typeof B==="string")try{B=JSON.parse(B)}catch{throw new N2("property",U,B)}if(!u.Check(U,B))throw new N2("property",U,B);return JSON.stringify(B)})},ArrayString:(w={},z)=>{let U=c.Array(w,z),$=JSON.stringify(u.Create(U)),_;try{_=x1.Compile(U)}catch{}return c.Transform(c.Union([c.String({format:"ArrayString",default:$}),U])).Decode((B)=>{if(typeof B==="string"){if(B.charCodeAt(0)!==91)throw new N2("property",U,B);try{B=JSON.parse(B)}catch{throw new N2("property",U,B)}if(_){if(!_.Check(B))throw new N2("property",U,B);return _.Decode(B)}if(!u.Check(U,B))throw new N2("property",U,B);return u.Decode(U,B)}return B}).Encode((B)=>{if(typeof B==="string")try{B=JSON.parse(B)}catch{throw new N2("property",U,B)}if(!u.Check(U,B))throw new N2("property",U,B);return JSON.stringify(B)})},File:uY,Files:(w={})=>c.Transform(mY(w)).Decode((z)=>{if(Array.isArray(z))return z;return[z]}).Encode((z)=>z),Nullable:(w)=>c.Union([w,c.Null()]),MaybeEmpty:(w)=>c.Union([w,c.Null(),c.Undefined()]),Cookie:(w,{domain:z,expires:U,httpOnly:$,maxAge:_,path:B,priority:q,sameSite:W,secure:X,secrets:J,sign:Q,...P}={})=>{let N=c.Object(w,P);return N.config={domain:z,expires:U,httpOnly:$,maxAge:_,path:B,priority:q,sameSite:W,secure:X,secrets:J,sign:Q},N},UnionEnum:(w,z={})=>{let U=w.every(($)=>typeof $==="string")?{type:"string"}:w.every(($)=>typeof $==="number")?{type:"number"}:w.every(($)=>$===null)?{type:"null"}:{};if(w.some(($)=>typeof $==="object"&&$!==null))throw new Error("This type does not support objects or arrays");return{default:w[0],...z,[M]:"UnionEnum",...U,enum:w}}};c.BooleanString=z1.BooleanString;c.ObjectString=z1.ObjectString;c.ArrayString=z1.ArrayString;c.Numeric=z1.Numeric;c.File=(w={})=>z1.File({default:"File",...w,extension:w?.type,type:"string",format:"binary"});c.Files=(w={})=>z1.Files({...w,elysiaMeta:"Files",default:"Files",extension:w?.type,type:"array",items:{...w,default:"Files",type:"string",format:"binary"}});c.Nullable=(w)=>z1.Nullable(w);c.MaybeEmpty=z1.MaybeEmpty;c.Cookie=z1.Cookie;c.Date=z1.Date;c.UnionEnum=z1.UnionEnum;var C6=class{constructor(w,z,U={}){this.name=w,this.jar=z,this.initial=U}get cookie(){return this.jar[this.name]??this.initial}set cookie(w){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=w}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie(w){this.cookie=w}get value(){return this.cookie.value}set value(w){this.setCookie.value=w}get expires(){return this.cookie.expires}set expires(w){this.setCookie.expires=w}get maxAge(){return this.cookie.maxAge}set maxAge(w){this.setCookie.maxAge=w}get domain(){return this.cookie.domain}set domain(w){this.setCookie.domain=w}get path(){return this.cookie.path}set path(w){this.setCookie.path=w}get secure(){return this.cookie.secure}set secure(w){this.setCookie.secure=w}get httpOnly(){return this.cookie.httpOnly}set httpOnly(w){this.setCookie.httpOnly=w}get sameSite(){return this.cookie.sameSite}set sameSite(w){this.setCookie.sameSite=w}get priority(){return this.cookie.priority}set priority(w){this.setCookie.priority=w}get partitioned(){return this.cookie.partitioned}set partitioned(w){this.setCookie.partitioned=w}get secrets(){return this.cookie.secrets}set secrets(w){this.setCookie.secrets=w}update(w){return this.setCookie=Object.assign(this.cookie,typeof w==="function"?w(this.cookie):w),this}set(w){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof w==="function"?w(this.cookie):w),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}},N9=(w,z,U)=>{if(!w.cookie)w.cookie={};return new Proxy(z,{get($,_){if(_ in z)return new C6(_,w.cookie,Object.assign({},U??{},z[_]));return new C6(_,w.cookie,Object.assign({},U))}})},s9=async(w,z,{secrets:U,sign:$,..._}={})=>{if(!z)return N9(w,{},_);let B=typeof U==="string";if($&&$!==!0&&!Array.isArray($))$=[$];let q={},W=u9.parse(z);for(let[X,J]of Object.entries(W)){let Q=m9.default(J);if($===!0||$?.includes(X)){if(!U)throw new Error("No secret is provided to cookie plugin");if(B){let P=await K9(Q,U);if(P===!1)throw new V9(X);Q=P}else{let P=!0;for(let N=0;N<U.length;N++){let Z=await K9(Q,U[N]);if(Z!==!1){P=!0,Q=Z;break}}if(!P)throw new V9(X)}}q[X]={value:Q}}return N9(w,q,_)},l9="toJSON"in new Headers,w1=(w)=>{if(!w)return!1;for(let z in w)return!0;return!1},N4=(w,z)=>{let U=w.size;if(!z&&U||U&&z&&z.status!==206&&z.status!==304&&z.status!==412&&z.status!==416){if(z&&w1(z.headers)){if(z.headers instanceof Headers){if(l9)z.headers=z.headers.toJSON();else for(let[$,_]of z.headers.entries())if($ in z.headers)z.headers[$]=_}return new Response(w,{status:z.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${U-1}/${U}`},z.headers)})}return new Response(w,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${U-1}/${U}`,"transfer-encoding":"chunked"}})}return new Response(w)},r9=(w,z)=>{if(!w)return w;w.delete("set-cookie");for(let U=0;U<z.length;U++){let $=z[U].indexOf("=");w.append("set-cookie",`${z[U].slice(0,$)}=${z[U].slice($+1)||""}`)}return w},a9=(w)=>{if(!w||!w1(w))return;let z=[];for(let[U,$]of Object.entries(w)){if(!U||!$)continue;let _=$.value;if(_===void 0||_===null)continue;z.push(o9.serialize(U,typeof _==="object"?JSON.stringify(_):_+"",$))}if(z.length===0)return;if(z.length===1)return z[0];return z},P1=async(w,z,U)=>{let $=w.next();if($ instanceof Promise)$=await $;if($.done){if(z)return g2($.value,z,U);return V1($.value,U)}return new Response(new ReadableStream({async start(_){let B=!1;if(U?.signal.addEventListener("abort",()=>{B=!0;try{_.close()}catch{}}),$.value!==void 0&&$.value!==null)if(typeof $.value==="object")try{_.enqueue(Buffer.from(JSON.stringify($.value)))}catch{_.enqueue(Buffer.from($.value.toString()))}else _.enqueue(Buffer.from($.value.toString()));for await(let q of w){if(B)break;if(q===void 0||q===null)continue;if(typeof q==="object")try{_.enqueue(Buffer.from(JSON.stringify(q)))}catch{_.enqueue(Buffer.from(q.toString()))}else _.enqueue(Buffer.from(q.toString()));await new Promise((W)=>setTimeout(()=>W(),0))}try{_.close()}catch{}}}),{...z,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8",...z?.headers}})};async function*b4(w){let z=w.body;if(!z)return;let U=z.getReader(),$=new TextDecoder;try{while(!0){let{done:_,value:B}=await U.read();if(_)break;yield $.decode(B)}}finally{U.releaseLock()}}var g2=(w,z,U)=>{if(w1(z.headers)||z.status!==200||z.redirect||z.cookie){if(typeof z.status==="string")z.status=D4[z.status];if(z.redirect){if(z.headers.Location=z.redirect,!z.status||z.status<300||z.status>=400)z.status=302}if(z.cookie&&w1(z.cookie)){let $=a9(z.cookie);if($)z.headers["set-cookie"]=$}if(z.headers["set-cookie"]&&Array.isArray(z.headers["set-cookie"]))z.headers=r9(new Headers(z.headers),z.headers["set-cookie"]);switch(w?.constructor?.name){case"String":return new Response(w,z);case"Blob":return N4(w,z);case"Array":return Response.json(w,z);case"Object":return Response.json(w,z);case"ElysiaCustomStatusResponse":return z.status=w.code,g2(w.response,z,U);case"ReadableStream":if(!z.headers["content-type"]?.startsWith("text/event-stream"))z.headers["content-type"]="text/event-stream; charset=utf-8";return U?.signal.addEventListener("abort",{handleEvent(){if(!U?.signal.aborted)w.cancel(U)}},{once:!0}),new Response(w,z);case void 0:if(!w)return new Response("",z);return Response.json(w,z);case"Response":let $=!1;if(z.headers instanceof Headers)for(let _ of z.headers.keys())if(_==="set-cookie"){if($)continue;$=!0;for(let B of z.headers.getSetCookie())w.headers.append("set-cookie",B)}else w.headers.append(_,z.headers?.get(_)??"");else for(let _ in z.headers)w.headers.append(_,z.headers[_]);if(w.status!==z.status)z.status=w.status;if(w.headers.get("transfer-encoding")==="chunked")return P1(b4(w),z,U);return w;case"Error":return S1(w,z);case"Promise":return w.then((_)=>g2(_,z));case"Function":return g2(w(),z);case"Number":case"Boolean":return new Response(w.toString(),z);case"Cookie":if(w instanceof C6)return new Response(w.value,z);return new Response(w?.toString(),z);case"FormData":return new Response(w,z);default:if(w instanceof Response){let _=!1;if(z.headers instanceof Headers)for(let B of z.headers.keys())if(B==="set-cookie"){if(_)continue;_=!0;for(let q of z.headers.getSetCookie())w.headers.append("set-cookie",q)}else w.headers.append(B,z.headers?.get(B)??"");else for(let B in z.headers)w.headers.append(B,z.headers[B]);if(l9)z.headers=w.headers.toJSON();else for(let[B,q]of w.headers.entries())if(B in z.headers)z.headers[B]=q;return w}if(w instanceof Promise)return w.then((_)=>g2(_,z));if(w instanceof Error)return S1(w,z);if(w instanceof M1)return z.status=w.code,g2(w.response,z,U);if(typeof w?.next==="function")return P1(w,z,U);if(typeof w?.then==="function")return w.then((_)=>g2(_,z));if(typeof w?.toResponse==="function")return g2(w.toResponse(),z);if("charCodeAt"in w){let _=w.charCodeAt(0);if(_===123||_===91){if(!z.headers["Content-Type"])z.headers["Content-Type"]="application/json";return new Response(JSON.stringify(w),z)}}return new Response(w,z)}}else switch(w?.constructor?.name){case"String":return new Response(w);case"Blob":return N4(w,z);case"Array":return Response.json(w);case"Object":return Response.json(w,z);case"ElysiaCustomStatusResponse":return z.status=w.code,g2(w.response,z,U);case"ReadableStream":return U?.signal.addEventListener("abort",{handleEvent(){if(!U?.signal.aborted)w.cancel(U)}},{once:!0}),new Response(w,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!w)return new Response("");return new Response(JSON.stringify(w),{headers:{"content-type":"application/json"}});case"Response":if(w.headers.get("transfer-encoding")==="chunked")return P1(b4(w),z,U);return w;case"Error":return S1(w,z);case"Promise":return w.then(($)=>{let _=V1($,U);if(_!==void 0)return _;return new Response("")});case"Function":return V1(w(),U);case"Number":case"Boolean":return new Response(w.toString());case"Cookie":if(w instanceof C6)return new Response(w.value,z);return new Response(w?.toString(),z);case"FormData":return new Response(w,z);default:if(w instanceof Response)return w;if(w instanceof Promise)return w.then(($)=>g2($,z));if(w instanceof Error)return S1(w,z);if(w instanceof M1)return z.status=w.code,g2(w.response,z,U);if(typeof w?.next==="function")return P1(w,z,U);if(typeof w?.then==="function")return w.then(($)=>g2($,z));if(typeof w?.toResponse==="function")return g2(w.toResponse(),z);if("charCodeAt"in w){let $=w.charCodeAt(0);if($===123||$===91){if(!z.headers["Content-Type"])z.headers["Content-Type"]="application/json";return new Response(JSON.stringify(w),z)}}return new Response(w)}},s2=(w,z,U)=>{if(w===void 0||w===null)return;if(w1(z.headers)||z.status!==200||z.redirect||z.cookie){if(typeof z.status==="string")z.status=D4[z.status];if(z.redirect){if(z.headers.Location=z.redirect,!z.status||z.status<300||z.status>=400)z.status=302}if(z.cookie&&w1(z.cookie)){let $=a9(z.cookie);if($)z.headers["set-cookie"]=$}if(z.headers["set-cookie"]&&Array.isArray(z.headers["set-cookie"]))z.headers=r9(new Headers(z.headers),z.headers["set-cookie"]);switch(w?.constructor?.name){case"String":return new Response(w,z);case"Blob":return N4(w,z);case"Array":return Response.json(w,z);case"Object":return Response.json(w,z);case"ElysiaCustomStatusResponse":return z.status=w.code,s2(w.response,z,U);case"ReadableStream":if(!z.headers["content-type"]?.startsWith("text/event-stream"))z.headers["content-type"]="text/event-stream; charset=utf-8";return U?.signal.addEventListener("abort",{handleEvent(){if(!U?.signal.aborted)w.cancel(U)}},{once:!0}),new Response(w,z);case void 0:if(!w)return;return Response.json(w,z);case"Response":let $=!1;if(z.headers instanceof Headers)for(let _ of z.headers.keys())if(_==="set-cookie"){if($)continue;$=!0;for(let B of z.headers.getSetCookie())w.headers.append("set-cookie",B)}else w.headers.append(_,z.headers?.get(_)??"");else for(let _ in z.headers)w.headers.append(_,z.headers[_]);if(w.status!==z.status)z.status=w.status;if(w.headers.get("transfer-encoding")==="chunked")return P1(b4(w),z,U);return w;case"Promise":return w.then((_)=>{let B=s2(_,z);if(B!==void 0)return B});case"Error":return S1(w,z);case"Function":return s2(w(),z);case"Number":case"Boolean":return new Response(w.toString(),z);case"FormData":return new Response(w);case"Cookie":if(w instanceof C6)return new Response(w.value,z);return new Response(w?.toString(),z);default:if(w instanceof Response){let _=!1;if(z.headers instanceof Headers)for(let B of z.headers.keys())if(B==="set-cookie"){if(_)continue;_=!0;for(let q of z.headers.getSetCookie())w.headers.append("set-cookie",q)}else w.headers.append(B,z.headers?.get(B)??"");else for(let B in z.headers)w.headers.append(B,z.headers[B]);if(w.status!==z.status)z.status=w.status;return w}if(w instanceof Promise)return w.then((_)=>s2(_,z));if(w instanceof Error)return S1(w,z);if(w instanceof M1)return z.status=w.code,s2(w.response,z,U);if(typeof w?.next==="function")return P1(w,z,U);if(typeof w?.then==="function")return w.then((_)=>s2(_,z));if(typeof w?.toResponse==="function")return s2(w.toResponse(),z);if("charCodeAt"in w){let _=w.charCodeAt(0);if(_===123||_===91){if(!z.headers["Content-Type"])z.headers["Content-Type"]="application/json";return new Response(JSON.stringify(w),z)}}return new Response(w,z)}}else switch(w?.constructor?.name){case"String":return new Response(w);case"Blob":return N4(w,z);case"Array":return Response.json(w);case"Object":return Response.json(w,z);case"ElysiaCustomStatusResponse":return z.status=w.code,s2(w.response,z,U);case"ReadableStream":return U?.signal.addEventListener("abort",{handleEvent(){if(!U?.signal.aborted)w.cancel(U)}},{once:!0}),new Response(w,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!w)return new Response("");return new Response(JSON.stringify(w),{headers:{"content-type":"application/json"}});case"Response":if(w.headers.get("transfer-encoding")==="chunked")return P1(b4(w));return w;case"Promise":return w.then(($)=>{let _=s2($,z);if(_!==void 0)return _});case"Error":return S1(w,z);case"Function":return V1(w(),U);case"Number":case"Boolean":return new Response(w.toString());case"Cookie":if(w instanceof C6)return new Response(w.value,z);return new Response(w?.toString(),z);case"FormData":return new Response(w);default:if(w instanceof Response)return w;if(w instanceof Promise)return w.then(($)=>s2($,z));if(w instanceof Error)return S1(w,z);if(w instanceof M1)return z.status=w.code,s2(w.response,z,U);if(typeof w?.next==="function")return P1(w,z,U);if(typeof w?.then==="function")return w.then(($)=>s2($,z));if(typeof w?.toResponse==="function")return s2(w.toResponse(),z);if("charCodeAt"in w){let $=w.charCodeAt(0);if($===123||$===91){if(!z.headers["Content-Type"])z.headers["Content-Type"]="application/json";return new Response(JSON.stringify(w),z)}}return new Response(w)}},V1=(w,z)=>{switch(w?.constructor?.name){case"String":return new Response(w);case"Blob":return N4(w);case"Array":return Response.json(w);case"Object":return Response.json(w);case"ElysiaCustomStatusResponse":return g2(w.response,{status:w.code,headers:{}});case"ReadableStream":return z?.signal.addEventListener("abort",{handleEvent(){if(!z?.signal.aborted)w.cancel(z)}},{once:!0}),new Response(w,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!w)return new Response("");return new Response(JSON.stringify(w),{headers:{"content-type":"application/json"}});case"Response":if(w.headers.get("transfer-encoding")==="chunked")return P1(b4(w));return w;case"Error":return S1(w);case"Promise":return w.then((U)=>V1(U,z));case"Function":return V1(w(),z);case"Number":case"Boolean":return new Response(w.toString());case"FormData":return new Response(w);default:if(w instanceof Response)return w;if(w instanceof Promise)return w.then((U)=>V1(U,z));if(w instanceof Error)return S1(w);if(w instanceof M1)return g2(w.response,{status:w.code,headers:{}});if(typeof w?.next==="function")return P1(w,void 0,z);if(typeof w?.then==="function")return w.then((U)=>g2(U,set));if(typeof w?.toResponse==="function")return V1(w.toResponse());if("charCodeAt"in w){let U=w.charCodeAt(0);if(U===123||U===91)return new Response(JSON.stringify(w),{headers:{"Content-Type":"application/json"}})}return new Response(w)}},S1=(w,z)=>new Response(JSON.stringify({name:w?.name,message:w?.message,cause:w?.cause}),{status:z?.status!==200?z?.status??500:500,headers:z?.headers}),sY=(w,z,U={})=>{if(typeof w==="function")return;let $=g2(w,{headers:U});if(z.parse.length===0&&z.transform.length===0&&z.beforeHandle.length===0&&z.afterHandle.length===0)return $.clone.bind($)},lY=(w,z,U={})=>{if(typeof w==="function"||w instanceof Blob)return;let $=g2(w,{headers:U});if(z.parse.length===0&&z.transform.length===0&&z.beforeHandle.length===0&&z.afterHandle.length===0){if(!$.headers.has("content-type"))$.headers.append("content-type","text/plain;charset=utf-8");return $.clone.bind($)}},ww=(w,z)=>{let U=new URL(w);return U.pathname=z,U.toString()},rY=(w)=>typeof w==="function"&&/^\s*class\s+/.test(w.toString())||w.toString().startsWith("[object ")&&w.toString()!=="[object Object]"||w1(Object.getPrototypeOf(w)),F5=(w)=>w&&typeof w==="object"&&!Array.isArray(w),H0=(w,z,{skipKeys:U,override:$=!0}={})=>{if(!F5(w)||!F5(z))return w;for(let[_,B]of Object.entries(z)){if(U?.includes(_))continue;if(!F5(B)||!(_ in w)||rY(B)){if($||!(_ in w))w[_]=B;continue}w[_]=H0(w[_],B,{skipKeys:U,override:$})}return w},aY=(w,z)=>{let{properties:U,...$}=w??{},{properties:_,...B}=z??{};return H0($,B)},o2=(w=[],z=[])=>{if(!w)return[];if(!z)return w;let U=[],$=[];if(!Array.isArray(w))w=[w];if(!Array.isArray(z))z=[z];for(let _ of w)if(U.push(_),_.checksum)$.push(_.checksum);for(let _ of z)if(!$.includes(_.checksum))U.push(_);return U},eY=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],wA=eY.reduce((w,z)=>(w[z]=!0,w),{}),e9=(w,z)=>{let U=($)=>typeof $==="object"&&Object.keys($).every(g5);if(U(w)&&U(z))return{...w,...z};else if(w&&!U(w)&&U(z))return{200:w,...z};return z??w},H4=(w,z)=>{return{body:z?.body??w?.body,headers:z?.headers??w?.headers,params:z?.params??w?.params,query:z?.query??w?.query,cookie:z?.cookie??w?.cookie,response:e9(w?.response,z?.response)}},i0=(w,z)=>{return{...w,...z,body:z?.body??w?.body,headers:z?.headers??w?.headers,params:z?.params??w?.params,query:z?.query??w?.query,cookie:z?.cookie??w?.cookie,response:e9(w?.response,z?.response),type:w?.type||z?.type,detail:H0(z?.detail??{},w?.detail??{}),parse:o2(w?.parse,z?.parse),transform:o2(w?.transform,z?.transform),beforeHandle:o2(w?.beforeHandle,z?.beforeHandle),afterHandle:o2(w?.afterHandle,z?.afterHandle),mapResponse:o2(w?.mapResponse,z?.mapResponse),afterResponse:o2(w?.afterResponse,z?.afterResponse),trace:o2(w?.trace,z?.trace),error:o2(w?.error,z?.error)}},b9=(w,z,U=!0)=>{if(!Array.isArray(z))return q0(w,z,U);for(let $ of z)w=q0(w,$,U);return w},q0=(w,z,U=!0)=>{if(!w)return w;if(z.untilObjectFound&&!U&&w.type==="object")return w;let $=z.from[M];if(w.oneOf){for(let q=0;q<w.oneOf.length;q++)w.oneOf[q]=q0(w.oneOf[q],z,U);return w}if(w.anyOf){for(let q=0;q<w.anyOf.length;q++)w.anyOf[q]=q0(w.anyOf[q],z,U);return w}if(w.allOf){for(let q=0;q<w.allOf.length;q++)w.allOf[q]=q0(w.allOf[q],z,U);return w}if(w.not){for(let q=0;q<w.not.length;q++)w.not[q]=q0(w.not[q],z,U);return w}let _=U&&!!z.excludeRoot;if(w[M]===$){let{anyOf:q,oneOf:W,allOf:X,not:J,properties:Q,items:P,...N}=w,Z=z.to(N),O,C=(b)=>{if(Q&&b.type==="object"){let k={};for(let[j,v]of Object.entries(Q))k[j]=q0(v,z,!1);return{...N,...b,properties:k}}if(P&&b.type==="array")return{...N,...b,items:q0(P,z,!1)};let I={...N,...b};if(delete I.required,Q&&b.type==="string"&&b.format==="ObjectString"&&b.default==="{}")O=c.ObjectString(Q,N),I.default=JSON.stringify(u.Create(c.Object(Q))),I.properties=Q;if(P&&b.type==="string"&&b.format==="ArrayString"&&b.default==="[]")O=c.ArrayString(P,N),I.default=JSON.stringify(u.Create(c.Array(P))),I.items=P;return I};if(_){if(Q){let b={};for(let[I,k]of Object.entries(Q))b[I]=q0(k,z,!1);return{...N,properties:b}}else if(P?.map)return{...N,items:P.map((b)=>q0(b,z,!1))};return N}if(Z.anyOf)for(let b=0;b<Z.anyOf.length;b++)Z.anyOf[b]=C(Z.anyOf[b]);else if(Z.oneOf)for(let b=0;b<Z.oneOf.length;b++)Z.oneOf[b]=C(Z.oneOf[b]);else if(Z.allOf)for(let b=0;b<Z.allOf.length;b++)Z.allOf[b]=C(Z.allOf[b]);else if(Z.not)for(let b=0;b<Z.not.length;b++)Z.not[b]=C(Z.not[b]);if(O)Z[E2]=O[E2];if(Z.anyOf||Z.oneOf||Z.allOf||Z.not)return Z;if(Q){let b={};for(let[I,k]of Object.entries(Q))b[I]=q0(k,z,!1);return{...N,...Z,properties:b}}else if(P?.map)return{...N,...Z,items:P.map((b)=>q0(b,z,!1))};return{...N,...Z}}let B=w?.properties;if(B&&U&&z.rootOnly!==!0)for(let[q,W]of Object.entries(B))switch(W[M]){case $:let{anyOf:X,oneOf:J,allOf:Q,not:P,type:N,...Z}=W,O=z.to(Z);if(O.anyOf)for(let C=0;C<O.anyOf.length;C++)O.anyOf[C]={...Z,...O.anyOf[C]};else if(O.oneOf)for(let C=0;C<O.oneOf.length;C++)O.oneOf[C]={...Z,...O.oneOf[C]};else if(O.allOf)for(let C=0;C<O.allOf.length;C++)O.allOf[C]={...Z,...O.allOf[C]};else if(O.not)for(let C=0;C<O.not.length;C++)O.not[C]={...Z,...O.not[C]};B[q]={...Z,...q0(Z,z,!1)};break;case"Object":case"Union":B[q]=q0(W,z,!1);break;default:if(W.items)for(let C=0;C<W.items.length;C++)W.items[C]=q0(W.items[C],z,!1);else if(W.anyOf||W.oneOf||W.allOf||W.not)B[q]=q0(W,z,!1);break}return w},L0=(w,{models:z={},dynamic:U=!1,normalize:$=!1,additionalProperties:_=!1,coerce:B=!1,additionalCoerce:q=[]}={})=>{if(!w)return;if(typeof w==="string"&&!(w in z))return;let W=typeof w==="string"?z[w]:w;if(B||q)if(B)W=b9(W,[{from:c.Number(),to:(Q)=>c.Numeric(Q),untilObjectFound:!0},{from:c.Boolean(),to:(Q)=>c.BooleanString(Q),untilObjectFound:!0},...Array.isArray(q)?q:[q]]);else W=b9(W,[...Array.isArray(q)?q:[q]]);if(W.type==="object"&&"additionalProperties"in W===!1)W.additionalProperties=_;let X=(Q)=>u.Clean(W,Q);if(U){let Q={schema:W,references:"",checkFunc:()=>{},code:"",Check:(P)=>u.Check(W,P),Errors:(P)=>u.Errors(W,P),Code:()=>"",Clean:X,Decode:(P)=>u.Decode(W,P),Encode:(P)=>u.Encode(W,P)};if($&&W.additionalProperties===!1)Q.Clean=X;if(W.config){if(Q.config=W.config,Q?.schema?.config)delete Q.schema.config}return Q.parse=(P)=>{try{return Q.Decode(P)}catch(N){throw[...Q.Errors(P)].map(A1)}},Q.safeParse=(P)=>{try{return{success:!0,data:Q.Decode(P),error:null}}catch(N){let Z=[...J.Errors(P)].map(A1);return{success:!1,data:null,error:Z[0]?.summary,errors:Z}}},Q}let J=x1.Compile(W,Object.values(z));if(J.Clean=X,W.config){if(J.config=W.config,J?.schema?.config)delete J.schema.config}return J.parse=(Q)=>{try{return J.Decode(Q)}catch(P){throw[...J.Errors(Q)].map(A1)}},J.safeParse=(Q)=>{try{return{success:!0,data:J.Decode(Q),error:null}}catch(P){let N=[...J.Errors(Q)].map(A1);return{success:!1,data:null,error:N[0]?.summary,errors:N}}},J},D9=(w,{models:z={},dynamic:U=!1,normalize:$=!1,additionalProperties:_=!1})=>{if(!w)return;if(typeof w==="string"&&!(w in z))return;let B=typeof w==="string"?z[w]:w,q=(X,J)=>{let Q=(N)=>{if(!N||typeof N!=="object")return u.Clean(X,N);if(Array.isArray(N))N=u.Clean(X,N);else N=u.Clean(X,N);return N};if(U)return{schema:X,references:"",checkFunc:()=>{},code:"",Check:(N)=>u.Check(X,N),Errors:(N)=>u.Errors(X,N),Code:()=>"",Decode:(N)=>u.Decode(X,N),Encode:(N)=>u.Encode(X,N)};let P=x1.Compile(X,J);if($&&X.additionalProperties===!1)P.Clean=Q;return P};if(M in B){if("additionalProperties"in B===!1)B.additionalProperties=_;return{200:q(B,Object.values(z))}}let W={};return Object.keys(B).forEach((X)=>{let J=B[+X];if(typeof J==="string"){if(J in z){let Q=z[J];Q.type==="object"&&"additionalProperties"in Q,W[+X]=M in Q?q(Q,Object.values(z)):Q}return}if(J.type==="object"&&"additionalProperties"in J===!1)J.additionalProperties=_;W[+X]=M in J?q(J,Object.values(z)):J}),W},zA=typeof Bun!=="undefined",UA=zA&&typeof Bun.hash==="function",G4=(w)=>{if(UA)return Bun.hash(w);let z=9;for(let U=0;U<w.length;)z=Math.imul(z^w.charCodeAt(U++),387420489);return z=z^z>>>9},j5,_6=()=>{if(!j5)j5=[{from:c.Object({}),to:()=>c.ObjectString({}),excludeRoot:!0},{from:c.Array(c.Any()),to:()=>c.ArrayString(c.Any())}];return j5},K5,O9=()=>{if(!K5)K5=[{from:c.Number(),to:(w)=>c.Numeric(w),rootOnly:!0},{from:c.Boolean(),to:(w)=>c.BooleanString(w),rootOnly:!0}];return K5},w7=({validator:w,defaultConfig:z={},config:U,dynamic:$,models:_})=>{let B=L0(w,{dynamic:$,models:_,additionalProperties:!0,coerce:!0,additionalCoerce:_6()});if(w1(z))if(B)B.config=aY(B.config,U);else B=L0(c.Cookie({}),{dynamic:$,models:_,additionalProperties:!0}),B.config=z;return B},a0=(w,z)=>{if(!z)return;if(!Array.isArray(z)){let $=z;if(w&&!$.checksum)$.checksum=w;if($.scope==="scoped")$.scope="local";return $}let U=[...z];for(let $ of U){if(w&&!$.checksum)$.checksum=w;if($.scope==="scoped")$.scope="local"}return U},C9=(w,z,U)=>{return{start:o2(w.start,a0(U,z?.start)),request:o2(w.request,a0(U,z?.request)),parse:o2(w.parse,a0(U,z?.parse)),transform:o2(w.transform,a0(U,z?.transform)),beforeHandle:o2(w.beforeHandle,a0(U,z?.beforeHandle)),afterHandle:o2(w.afterHandle,a0(U,z?.afterHandle)),mapResponse:o2(w.mapResponse,a0(U,z?.mapResponse)),afterResponse:o2(w.afterResponse,a0(U,z?.afterResponse)),trace:o2(w.trace,a0(U,z?.trace)),error:o2(w.error,a0(U,z?.error)),stop:o2(w.stop,a0(U,z?.stop))}},$A=(w,z,{skipIfHasType:U=!1}={})=>{if(!w)return w;if(!Array.isArray(w)){if(U)w.scope??=z;else w.scope=z;return w}for(let $ of w)if(U)$.scope??=z;else $.scope=z;return w},c1=(w)=>{if(!w)return w;if(!Array.isArray(w))switch(w.scope){case"global":case"scoped":return{...w};default:return{fn:w}}let z=[];for(let U of w)switch(U.scope){case"global":case"scoped":z.push({...U});break}return z},I9=(w)=>{return{...w,type:w?.type,detail:w?.detail,parse:c1(w?.parse),transform:c1(w?.transform),beforeHandle:c1(w?.beforeHandle),afterHandle:c1(w?.afterHandle),mapResponse:c1(w?.mapResponse),afterResponse:c1(w?.afterResponse),error:c1(w?.error),trace:c1(w?.trace)}},D4={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},F9=Object.fromEntries(Object.entries(D4).map(([w,z])=>[z,w]));function _A(w){let z=w;while(z.endsWith("="))z=z.slice(0,-1);return z}var j9=new TextEncoder,$w=async(w,z)=>{if(typeof w!=="string")throw new TypeError("Cookie value must be provided as a string.");if(z===null)throw new TypeError("Secret key must be provided.");let U=await crypto.subtle.importKey("raw",j9.encode(z),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),$=await crypto.subtle.sign("HMAC",U,j9.encode(w));return w+"."+_A(Buffer.from($).toString("base64"))},K9=async(w,z)=>{if(typeof w!=="string")throw new TypeError("Signed cookie string must be provided.");if(z===null)throw new TypeError("Secret key must be provided.");let U=w.slice(0,w.lastIndexOf("."));return await $w(U,z)===w?U:!1},BA=(w,z)=>{if(!w||typeof w!=="object"||!z)return;for(let[U,$]of Object.entries(z)){if(U in wA||!(U in w))continue;let _=w[U];if(typeof _==="function")_($),delete z[U]}},qA=({globalHook:w,localHook:z})=>(U)=>($,_)=>{if(typeof $==="function")$={fn:$};if("fn"in $||Array.isArray($)){if(!z[U])z[U]=[];if(typeof z[U]==="function")z[U]=[z[U]];if(Array.isArray($))z[U]=z[U].concat($);else z[U].push($);return}let{insert:B="after",stack:q="local"}=$;if(typeof _==="function")_={fn:_};if(q==="global")if(!Array.isArray(_))if(B==="before")w[U].unshift(_);else w[U].push(_);else if(B==="before")w[U]=_.concat(w[U]);else w[U]=w[U].concat(_);else{if(!z[U])z[U]=[];if(typeof z[U]==="function")z[U]=[z[U]];if(!Array.isArray(_))if(B==="before")z[U].unshift(_);else z[U].push(_);else if(B==="before")z[U]=_.concat(z[U]);else z[U]=z[U].concat(_)}},WA=(w)=>{if(typeof w==="number")return w;if(w.length<16){if(w.trim().length===0)return null;let z=Number(w);if(Number.isNaN(z))return null;return z}if(w.length===16){if(w.trim().length===0)return null;let z=Number(w);if(Number.isNaN(z)||z.toString()!==w)return null;return z}return null},g5=(w)=>WA(w)!==null,XA=class{constructor(w=console.error){this.onError=w,this.root=null,this.promises=[]}get size(){return this.promises.length}add(w){return this.promises.push(w),this.root||=this.drain(),w}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch(w){this.onError(w)}this.promises.shift()}this.root=null}then(w,z){return(this.root??Promise.resolve()).then(w,z)}},h0=(w)=>{if(!w)return w;if(!Array.isArray(w)){if(typeof w==="function")return{fn:w};else if("fn"in w)return w}let z=[];for(let U of w)if(typeof U==="function")z.push({fn:U});else if("fn"in U)z.push(U);return z},ZA=(w)=>{return{...w,start:h0(w?.start),request:h0(w?.request),parse:h0(w?.parse),transform:h0(w?.transform),beforeHandle:h0(w?.beforeHandle),afterHandle:h0(w?.afterHandle),mapResponse:h0(w?.mapResponse),afterResponse:h0(w?.afterResponse),trace:h0(w?.trace),error:h0(w?.error),stop:h0(w?.stop)}},E9=(w)=>{return{...w,start:w.start?.map((z)=>z.fn),request:w.request?.map((z)=>z.fn),parse:w.parse?.map((z)=>z.fn),transform:w.transform?.map((z)=>z.fn),beforeHandle:w.beforeHandle?.map((z)=>z.fn),afterHandle:w.afterHandle?.map((z)=>z.fn),afterResponse:w.afterResponse?.map((z)=>z.fn),mapResponse:w.mapResponse?.map((z)=>z.fn),trace:w.trace?.map((z)=>z.fn),error:w.error?.map((z)=>z.fn),stop:w.stop?.map((z)=>z.fn)}},E5=(w)=>({body:w.body,cookie:w.cookie,headers:w.headers,query:w.query,set:w.set,server:w.server}),z7=(w,z=302)=>Response.redirect(w,z),Ek=Symbol("ElysiaFormData"),qw=Symbol("ElysiaRequestId");var U7=()=>crypto.getRandomValues(new Uint32Array(1))[0],x9=(w)=>{let z=[];for(let U=0;U<w.length;U++){let $=w[U];if($.checksum){if(z.includes($.checksum))w.splice(U,1),U--;z.push($.checksum)}}return w},B0=(w,z="scoped")=>{if(z==="scoped"){for(let U of w)if("scope"in U&&U.scope==="local")U.scope="scoped";return}for(let U of w)if("scope"in U)U.scope="global"},k9=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,_w=Symbol("ElysiaErrorCode"),Bw=(k9?.NODE_ENV??k9?.ENV)==="production",M1=class{constructor(w,z){let U=z??(w in F9?F9[w]:w);this.code=D4[w]??w,this.response=U}},QA=(w,z)=>new M1(w,z),JA=class extends Error{constructor(w){super(w??"INTERNAL_SERVER_ERROR");this.code="INTERNAL_SERVER_ERROR",this.status=500}},t5=class extends Error{constructor(w){super(w??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},YA=class extends Error{constructor(){super("Failed to parse body");this.code="PARSE",this.status=400}},V9=class extends Error{constructor(w,z){super(z??`"${w}" has invalid cookie signature`);this.key=w,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},A1=(w)=>{if(!w)return{summary:void 0};let{message:z,path:U,value:$,type:_}=w,B=U.slice(1).replaceAll("/","."),q=U==="";switch(_){case 42:return{...w,summary:q?"Value should not be provided":`Property '${B}' should not be provided`};case 45:return{...w,summary:q?"Value is missing":`Property '${B}' is missing`};case 50:let W=z.indexOf("'"),X=z.slice(W+1,z.indexOf("'",W+1));return{...w,summary:q?"Value should be an email":`Property '${B}' should be ${X}`};case 54:return{...w,summary:`${z.slice(0,9)} property '${B}' to be ${z.slice(8)} but found: ${$}`};case 62:let J=w.schema.anyOf.map((Q)=>`'${Q?.format??Q.type}'`).join(", ");return{...w,summary:q?`Value should be one of ${J}`:`Property '${B}' should be one of: ${J}`};default:return{summary:z,...w}}},N2=class w extends Error{constructor(z,U,$){if($&&typeof $==="object"&&$ instanceof M1)$=$.response;let _=Bw?void 0:("Errors"in U)?U.Errors($).First():u.Errors(U,$).First(),B=_?.schema.error!==void 0?typeof _.schema.error==="function"?_.schema.error({type:z,validator:U,value:$,get errors(){return[...U.Errors($)].map(A1)}}):_.schema.error:void 0,q=_?.path||"root",W="";if(B!==void 0)W=typeof B==="object"?JSON.stringify(B):B+"";else if(Bw)W=JSON.stringify({type:"validation",on:z,summary:A1(_).summary,message:_?.message,found:$});else{let X=U?.schema??U,J="Errors"in U?[...U.Errors($)].map(A1):[...u.Errors(U,$)].map(A1),Q;try{Q=u.Create(X)}catch(P){Q={type:"Could not create expected value",message:P?.message,error:P}}W=JSON.stringify({type:"validation",on:z,summary:J[0]?.summary,property:q,message:_?.message,expected:Q,found:$,errors:J},null,2)}super(W);this.type=z,this.validator=U,this.value=$,this.code="VALIDATION",this.status=422,Object.setPrototypeOf(this,w.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(A1):[...u.Errors(this.validator,this.value)].map(A1)}static simplifyModel(z){let U="schema"in z?z.schema:z;try{return u.Create(U)}catch{return U}}get model(){return w.simplifyModel(this.validator)}toResponse(z){return new Response(this.message,{status:400,headers:{...z,"content-type":"application/json"}})}},f9={open(w){w.data.open?.(w)},message(w,z){w.data.message?.(w,z)},drain(w){w.data.drain?.(w)},close(w,z,U){w.data.close?.(w,z,U)}},zw=class{constructor(w,z){if(this.raw=w,this.data=z,this.validator=w.data.validator,w.data.id)this.id=w.data.id;else this.id=U7().toString()}get id(){return this.raw.data.id}set id(w){this.raw.data.id=w}get publish(){return(w,z=void 0,U)=>{if(this.validator?.Check(z)===!1)throw new N2("message",this.validator,z);if(typeof z==="object")z=JSON.stringify(z);return this.raw.publish(w,z,U),this}}get send(){return(w)=>{if(this.validator?.Check(w)===!1)throw new N2("message",this.validator,w);if(Buffer.isBuffer(w))return this.raw.send(w),this;if(typeof w==="object")w=JSON.stringify(w);return this.raw.send(w),this}}get subscribe(){return(w)=>{return this.raw.subscribe(w),this}}get unsubscribe(){return(w)=>{return this.raw.unsubscribe(w),this}}get cork(){return(w)=>{return this.raw.cork(w),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}},g9="1.1.24",O6=/\+/g;function $7(w){let z={};if(typeof w!=="string")return z;let U="",$="",_=-1,B=-1,q=0,W=w.length;for(let X=0;X<W;X++)switch(w.charCodeAt(X)){case 38:let J=B>_;if(!J)B=X;if(U=w.slice(_+1,B),J||U.length>0){if(q&1)U=U.replace(O6," ");if(q&2)U=X6.default(U)||U;if(!z[U]){if(J){if($=w.slice(B+1,X),q&4)$=$.replace(O6," ");if(q&8)$=X6.default($)||$}z[U]=$}}U="",$="",_=X,B=X,q=0;break;case 61:if(B<=_)B=X;else q|=8;break;case 43:if(B>_)q|=4;else q|=1;break;case 37:if(B>_)q|=8;else q|=2;break}if(_<W){let X=B>_;if(U=w.slice(_+1,X?B:W),X||U.length>0){if(q&1)U=U.replace(O6," ");if(q&2)U=X6.default(U)||U;if(!z[U]){if(X){if($=w.slice(B+1,W),q&4)$=$.replace(O6," ");if(q&8)$=X6.default($)||$}z[U]=$}}}return z}var T5=(w)=>{let z={};if(typeof w!=="string")return z;let U=w.length,$="",_="",B=-1,q=-1,W=!1,X=!1,J=!1,Q=!1,P=!1,N=0;for(let Z=0;Z<U+1;Z++){if(Z!==U)N=w.charCodeAt(Z);else N=38;switch(N){case 38:{if(P=q>B,!P)q=Z;if($=w.slice(B+1,q),P||$.length>0){if(J)$=$.replace(O6," ");if(W)$=X6.default($)||$;if(P){if(_=w.slice(q+1,Z),Q)_=_.replace(O6," ");if(X)_=X6.default(_)||_}let O=z[$];if(O===void 0)z[$]=_;else if(O.pop)O.push(_);else z[$]=[O,_]}_="",B=Z,q=Z,W=!1,X=!1,J=!1,Q=!1;break}case 61:if(q<=B)q=Z;else X=!0;break;case 43:if(q>B)Q=!0;else J=!0;break;case 37:if(q>B)X=!0;else W=!0;break}}return z},c5=Symbol("ElysiaTrace"),k1=()=>{let{promise:w,resolve:z}=Promise.withResolvers(),{promise:U,resolve:$}=Promise.withResolvers(),{promise:_,resolve:B}=Promise.withResolvers(),q=[],W=[];return[(X)=>{if(X)q.push(X);return w},(X)=>{let J=[],Q=[],P=null;for(let Z=0;Z<(X.total??0);Z++){let{promise:O,resolve:C}=Promise.withResolvers(),{promise:b,resolve:I}=Promise.withResolvers(),{promise:k,resolve:j}=Promise.withResolvers(),v=[],y=[];J.push((H2)=>{if(H2)v.push(H2);return O}),Q.push((H2)=>{let Y2={...H2,end:b,error:k,index:Z,onStop(A2){if(A2)y.push(A2);return b}};C(Y2);for(let A2=0;A2<v.length;A2++)v[A2](Y2);return(A2=null)=>{let q2=performance.now();if(A2)P=A2;let l={end:q2,error:A2,get elapsed(){return q2-H2.begin}};for(let K2=0;K2<y.length;K2++)y[K2](l);I(q2),j(A2)}})}let N={...X,end:U,error:_,onEvent(Z){for(let O=0;O<J.length;O++)J[O](Z)},onStop(Z){if(Z)W.push(Z);return U}};z(N);for(let Z=0;Z<q.length;Z++)q[Z](N);return{resolveChild:Q,resolve(Z=null){let O=performance.now();if(!Z&&P)Z=P;let C={end:O,error:Z,get elapsed(){return O-X.begin}};for(let b=0;b<W.length;b++)W[b](C);$(O),B(Z)}}}]},AA=(w)=>{return(z)=>{let[U,$]=k1(),[_,B]=k1(),[q,W]=k1(),[X,J]=k1(),[Q,P]=k1(),[N,Z]=k1(),[O,C]=k1(),[b,I]=k1(),[k,j]=k1();return w({id:z[qw],context:z,set:z.set,onRequest:U,onParse:_,onTransform:q,onBeforeHandle:X,onHandle:Q,onAfterHandle:N,onMapResponse:b,onAfterResponse:k,onError:O}),{request:$,parse:B,transform:W,beforeHandle:J,handle:P,afterHandle:Z,error:C,mapResponse:I,afterResponse:j}}},PA=new Headers().toJSON,B7={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},k0=(w)=>{if(!w)return!1;let z=w?.schema;return!!z&&B7.optional in z},e0=(w)=>{if(!w)return!1;let z=w?.schema??w;if(z.anyOf)return z.anyOf.some(e0);if(z.someOf)return z.someOf.some(e0);if(z.allOf)return z.allOf.some(e0);if(z.not)return z.not.some(e0);if(z.type==="object"){let U=z.properties;if("additionalProperties"in z)return z.additionalProperties;if("patternProperties"in z)return!1;for(let $ of Object.keys(U)){let _=U[$];if(_.type==="object"){if(e0(_))return!0}else if(_.anyOf){for(let B=0;B<_.anyOf.length;B++)if(e0(_.anyOf[B]))return!0}return _.additionalProperties}return!1}return!1},y5=({context:w="c",trace:z,addFn:U})=>{if(!z.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let $=0;$<z.length;$++)U(`let report${$}, reportChild${$}, reportErr${$}, reportErrChild${$}; let trace${$} = ${w}[ELYSIA_TRACE]?.[${$}] ?? trace[${$}](${w});
`);return($,{name:_,total:B=0}={})=>{if(!_)_="anonymous";let q=$==="error"?"reportErr":"report";for(let W=0;W<z.length;W++)U(`
${q}${W} = trace${W}.${$}({id,event: '${$}',name: '${_}',begin: performance.now(),total: ${B}})
`);return{resolve(){for(let W=0;W<z.length;W++)U(`
${q}${W}.resolve()
`)},resolveChild(W){for(let X=0;X<z.length;X++)U(`${q}Child${X} = ${q}${X}.resolveChild?.shift()?.({id,event: '${$}',name: '${W}',begin: performance.now()})
`);return(X)=>{for(let J=0;J<z.length;J++)if(X)U(`
                             	if (${X} instanceof Error)
                    				${q}Child${J}?.(${X})
                           		else
                             		${q}Child${J}?.()
`);else U(`${q}Child${J}?.()
`)}}}}},SA=({injectResponse:w="",normalize:z=!1,validator:U})=>({composeValidation:($,_=`c.${$}`)=>`c.set.status = 422; throw new ValidationError('${$}', validator.${$}, ${_})`,composeResponseValidation:($="r")=>{let _="\n"+w+"\n";_+=`if(${$} instanceof ElysiaCustomStatusResponse) {
			c.set.status = ${$}.code
			${$} = ${$}.response
		}

		const isResponse = ${$} instanceof Response

`,_+=`switch(c.set.status) {
`;for(let[B,q]of Object.entries(U.response)){if(_+=`	case ${B}:
				if (!isResponse) {
`,z&&"Clean"in q&&!e0(q))_+=`${$} = validator.response['${B}'].Clean(${$})
`;_+=`if(validator.response['${B}'].Check(${$}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${B}'], ${$})
				}

				c.set.status = ${B}
			}

			break

`}return _+="\n}\n",_}}),Vk=Symbol.for("TypeBox.Kind"),B6=(w,z)=>{if(!z)return;if(z.type==="object"){let U=z.properties;if(!U)return!1;for(let $ of Object.keys(U)){let _=U[$];if(w in _)return!0;if(_.type==="object"){if(B6(w,_))return!0}else if(_.anyOf){for(let B=0;B<_.anyOf.length;B++)if(B6(w,_.anyOf[B]))return!0}}return!1}return w in z},x5=Symbol.for("TypeBox.Transform"),q6=(w)=>{if(!w)return;if(w.type==="object"&&w.properties){let z=w.properties;for(let U of Object.keys(z)){let $=z[U];if($.type==="object"){if(q6($))return!0}else if($.anyOf){for(let B=0;B<$.anyOf.length;B++)if(q6($.anyOf[B]))return!0}if(x5 in $)return!0}return!1}return x5 in w||w.properties&&x5 in w.properties},MA=/(?:return|=>) \S+\(/g,W6=(w)=>{return(w?.fn??w).constructor.name==="AsyncFunction"},p2=(w)=>{let z=w?.fn??w;if(z.constructor.name==="AsyncFunction")return!0;let U=z.toString();if(U.includes("=> response.clone("))return!1;if(U.includes("await"))return!0;if(U.includes("async"))return!0;return!!U.match(MA)},Uw=(w)=>{let z=w?.fn??w;return z.constructor.name==="AsyncGeneratorFunction"||z.constructor.name==="GeneratorFunction"},LA=({app:w,path:z,method:U,localHook:$,hooks:_,validator:B,handler:q,allowMeta:W=!1,inference:X})=>{let J=typeof q==="function";if(!J){if(q=g2(q,{headers:w.setHeaders??{}}),_.parse.length===0&&_.transform.length===0&&_.beforeHandle.length===0&&_.afterHandle.length===0)return Function("a","return function () { return a.clone() }")(q)}let Q=J?"handler(c)":"handler",P=_.afterResponse.length>0,N=_.trace.length>0,Z="";if(X=i9(Object.assign($,{handler:q}),X),X.server)Z+=`
Object.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})
`;if(X.body)Z+=`let isParsing = false
`;B.createBody?.(),B.createQuery?.(),B.createHeaders?.(),B.createParams?.(),B.createCookie?.(),B.createResponse?.();let O=X.query||!!B.query,C=U!=="$INTERNALWS"&&U!=="GET"&&U!=="HEAD"&&(X.body||!!B.body||_.parse.length),b=w.setHeaders,I=b&&!!Object.keys(b).length,k=X.headers||B.headers,j=X.cookie||!!B.cookie,v=j?w7({validator:B.cookie,defaultConfig:w.config.cookie,dynamic:!!w.config.aot,config:B.cookie?.config??{},models:w.definitions.type}):void 0,y=v?.config,H2="";if(y?.sign){if(!y.secrets)throw new Error(`t.Cookie required secret which is not set in (${U}) ${z}.`);let F=!y.secrets?void 0:typeof y.secrets==="string"?y.secrets:y.secrets[0];if(H2+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,y.sign===!0)H2+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${F}')
			}`;else for(let D of y.sign)H2+=`if(_setCookie['${D}']?.value) { c.set.cookie['${D}'].value = await signCookie(_setCookie['${D}'].value, '${F}') }
`;H2+="}\n"}let Y2=w.config.normalize,{composeValidation:A2,composeResponseValidation:q2}=SA({normalize:Y2,validator:B});if(k)Z+=PA?`c.headers = c.request.headers.toJSON()
`:`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(j){let F=(V,d)=>{let i=y?.[V]??d;if(!i)return typeof d==="string"?`${V}: "${d}",`:`${V}: ${d},`;if(typeof i==="string")return`${V}: '${i}',`;if(i instanceof Date)return`${V}: new Date(${i.getTime()}),`;return`${V}: ${i},`},D=y?`{
			secrets: ${y.secrets!==void 0?typeof y.secrets==="string"?`'${y.secrets}'`:"["+y.secrets.reduce((V,d)=>V+`'${d}',`,"")+"]":"undefined"},
			sign: ${y.sign===!0?!0:y.sign!==void 0?"["+y.sign.reduce((V,d)=>V+`'${d}',`,"")+"]":"undefined"},
			${F("domain")}
			${F("expires")}
			${F("httpOnly")}
			${F("maxAge")}
			${F("path","/")}
			${F("priority")}
			${F("sameSite")}
			${F("secure")}
		}`:"undefined";if(k)Z+=`
c.cookie = await parseCookie(c.set, c.headers.cookie, ${D})
`;else Z+=`
c.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${D})
`}if(O){let F=[];if(B.query&&B.query.schema.type==="object"){let D=B.query.schema.properties;if(!e0(B.query))for(let[V,d]of Object.entries(D)){let i=d;if(i&&B7.optional in i&&i.type==="array"&&i.items)i=i.items;let{type:r2,anyOf:r}=i,v0=r2==="array"||r?.some((n2)=>n2.type==="string"&&n2.format==="ArrayString");F.push({key:V,isArray:v0,isNestedObjectArray:v0&&i.items?.type==="object"||!!i.items?.anyOf?.some((n2)=>n2.type==="object"||n2.type==="array"),isObject:r2==="object"||r?.some((n2)=>n2.type==="string"&&n2.format==="ArrayString"),anyOf:!!r})}}if(!F.length)Z+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQueryFromURL(c.url.slice(c.qi + 1))
			}`;else Z+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${F.map(({key:D,isArray:V,isObject:d,isNestedObjectArray:i,anyOf:r2},r)=>{let v0=`${r===0?"let":""} memory = url.indexOf('&${D}=')
							let a${r}
`;if(V)return v0+(i?`while (memory !== -1) {
											const start = memory + ${D.length+2}
											memory = url.indexOf('&', start)

											if(a${r} === undefined)
												a${r} = ''
											else
												a${r} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
											else temp = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${r} += temp

											if(memory === -1) break

											memory = url.indexOf('&${D}=', memory)
											if(memory === -1) break
										}

										try {
										    if(a${r}.charCodeAt(0) === 91)
												a${r} = JSON.parse(a${r})
											else
												a${r} = JSON.parse('[' + a${r} + ']')
										} catch {}
`:`while (memory !== -1) {
											const start = memory + ${D.length+2}
											memory = url.indexOf('&', start)

											if(a${r} === undefined)
												a${r} = []

											if(memory === -1) {
												a${r}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g, ' '))
												break
											}
											else a${r}.push(decodeURIComponent(url.slice(start, memory)).replace(/\\+/g, ' '))

											memory = url.indexOf('&${D}=', memory)
											if(memory === -1) break
										}
`);if(d)return v0+`if (memory !== -1) {
										const start = memory + ${D.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${r} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else a${r} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

										if (a${r} !== undefined) {
											try {
												a${r} = JSON.parse(a${r})
											} catch {}
										}
									}`;return v0+`if (memory !== -1) {
										const start = memory + ${D.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${r} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else {
											a${r} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											${r2?`
											let deepMemory = url.indexOf('&${D}=', memory)

											if(deepMemory !== -1) {
												a${r} = [a${r}]
												let first = true

												while(true) {
													const start = deepMemory + ${D.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
													else value = decodeURIComponent(url.slice(start, deepMemory).replace(/\\+/g, ' '))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${r}.push(JSON.parse(value))
														} catch {
														 	a${r}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
												`:""}
										}
									}`}).join("\n")}

				c.query = {
					${F.map(({key:D},V)=>`'${D}': a${V}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}if(N)Z+="\nconst id = c[ELYSIA_REQUEST_ID]\n";let l=y5({trace:_.trace,addFn:(F)=>{Z+=F}});Z+="\ntry {\n";let K2=typeof q==="function"&&p2(q),G0=N||_.afterResponse.length>0?"c.response = ":"",h1=j||C||K2||_.parse.length>0||_.afterHandle.some(p2)||_.beforeHandle.some(p2)||_.transform.some(p2)||_.mapResponse.some(p2),U8=(typeof q==="function"?Uw(q):!1)||_.beforeHandle.some(Uw)||_.afterHandle.some(Uw)||_.transform.some(Uw),Q6=X.cookie||X.set||k||N||B.response||J&&I||U8,Z0=", c.request";Z+=`c.route = \`${z}\`
`;let $8=l("parse",{total:_.parse.length});if(C){let F=_.parse.length||X.body||B.body;if(Z+="isParsing = true\n",_.type&&!_.parse.length)switch(_.type){case"json":case"application/json":if(k0(B.body))Z+="try { c.body = await c.request.json() } catch {}";else Z+="c.body = await c.request.json()";break;case"text":case"text/plain":Z+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":Z+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":Z+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":if(Z+=`c.body = {}
`,k0(B.body))Z+="let form; try { form = await c.request.formData() } catch {}";else Z+="const form = await c.request.formData()";Z+=`
if(form)
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						} else form = {}
`;break}else if(F){if(Z+="\n",Z+=k?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",Z+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)

					c.contentType = contentType
`,_.parse.length){Z+=`let used = false
`;let D=l("parse",{total:_.parse.length});for(let V=0;V<_.parse.length;V++){let d=D.resolveChild(_.parse[V].fn.name),i=`bo${V}`;if(V!==0)Z+=`if(!used) {
`;if(Z+=`let ${i} = parse[${V}](c, contentType)
`,Z+=`if(${i} instanceof Promise) ${i} = await ${i}
`,Z+=`if(${i} !== undefined) { c.body = ${i}; used = true }
`,d(),V!==0)Z+="}"}D.resolve()}if(Z+="\ndelete c.contentType\n",_.parse.length)Z+="if (!used) {";if(_.type&&!Array.isArray(_.type))switch(_.type){case"json":case"application/json":if(k0(B.body))Z+="try { c.body = await c.request.json() } catch {}";else Z+="c.body = await c.request.json()";break;case"text":case"text/plain":Z+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":Z+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":Z+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":Z+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}
`;break}else Z+=`
					switch (contentType) {
						case 'application/json':
							${k0(B.body)?"try { c.body = await c.request.json() } catch {}":"c.body = await c.request.json()"}
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(_.parse.length)Z+="}";Z+="}\n"}Z+="\nisParsing = false\n"}if($8.resolve(),_?.transform){let F=l("transform",{total:_.transform.length});if(_.transform.length)Z+="\nlet transformed\n";for(let D=0;D<_.transform.length;D++){let V=_.transform[D],d=F.resolveChild(V.fn.name);if(Z+=p2(V)?`transformed = await transform[${D}](c)
`:`transformed = transform[${D}](c)
`,V.subType==="mapDerive")Z+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else Z+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else
					Object.assign(c, transformed)
`;d()}F.resolve()}if(B){if(Z+="\n",B.headers){if(Y2&&"Clean"in B.headers&&!e0(B.headers))Z+="c.headers = validator.headers.Clean(c.headers);\n";if(B6("default",B.headers.schema))for(let[F,D]of Object.entries(u.Default(B.headers.schema,{}))){let V=typeof D==="object"?JSON.stringify(D):typeof D==="string"?`'${D}'`:D;if(V!==void 0)Z+=`c.headers['${F}'] ??= ${V}
`}if(k0(B.headers))Z+="if(isNotEmpty(c.headers)) {";if(Z+=`if(validator.headers.Check(c.headers) === false) {
				${A2("headers")}
			}`,q6(B.headers.schema))Z+=`c.headers = validator.headers.Decode(c.headers)
`;if(k0(B.headers))Z+="}"}if(B.params){if(B6("default",B.params.schema))for(let[F,D]of Object.entries(u.Default(B.params.schema,{}))){let V=typeof D==="object"?JSON.stringify(D):typeof D==="string"?`'${D}'`:D;if(V!==void 0)Z+=`c.params['${F}'] ??= ${V}
`}if(Z+=`if(validator.params.Check(c.params) === false) {
				${A2("params")}
			}`,q6(B.params.schema))Z+=`
c.params = validator.params.Decode(c.params)
`}if(B.query){if(Y2&&"Clean"in B.query&&!e0(B.query))Z+="c.query = validator.query.Clean(c.query);\n";if(B6("default",B.query.schema))for(let[F,D]of Object.entries(u.Default(B.query.schema,{}))){let V=typeof D==="object"?JSON.stringify(D):typeof D==="string"?`'${D}'`:D;if(V!==void 0)Z+=`if(c.query['${F}'] === undefined) c.query['${F}'] = ${V}
`}if(k0(B.query))Z+="if(isNotEmpty(c.query)) {";if(Z+=`if(validator.query.Check(c.query) === false) {
          		${A2("query")}
			}`,q6(B.query.schema))Z+=`
c.query = validator.query.Decode(Object.assign({}, c.query))
`;if(k0(B.query))Z+="}"}if(B.body){if(Y2&&"Clean"in B.body&&!e0(B.body))Z+="c.body = validator.body.Clean(c.body);\n";let F=q6(B.body.schema);if(F||k0(B.body))Z+=`
const isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))
`;if(B6("default",B.body.schema)){let D=u.Default(B.body.schema,B.body.schema.type==="object"?{}:void 0),V=typeof D==="object"?JSON.stringify(D):typeof D==="string"?`'${D}'`:D;if(Z+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${V}, c.body)
					} else { c.body = ${V} }`,k0(B.body))Z+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${A2("body")}
             			}
                    }`;else Z+=`
    				if(validator.body.Check(c.body) === false) {
        				${A2("body")}
         			}
                }`}else if(k0(B.body))Z+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${A2("body")}
          		}`;else Z+=`if(validator.body.Check(c.body) === false) {
         			${A2("body")}
          		}`;if(F)Z+=`
if(isNotEmptyObject) c.body = validator.body.Decode(c.body)
`}if(w1(v?.schema?.properties??v?.schema?.schema??{})){if(Z+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value
`,B6("default",v.schema))for(let[F,D]of Object.entries(u.Default(v.schema,{})))Z+=`cookieValue['${F}'] = ${typeof D==="object"?JSON.stringify(D):D}
`;if(k0(B.cookie))Z+="if(isNotEmpty(c.cookie)) {";if(Z+=`if(validator.cookie.Check(cookieValue) === false) {
				${A2("cookie","cookieValue")}
			}`,q6(B.cookie.schema))Z+=`
for(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value
`;if(k0(B.cookie))Z+="}"}}if(_?.beforeHandle){let F=l("beforeHandle",{total:_.beforeHandle.length}),D=!1;for(let V=0;V<_.beforeHandle.length;V++){let d=_.beforeHandle[V],i=F.resolveChild(d.fn.name),r2=R4(d);if(d.subType==="resolve"||d.subType==="mapResolve"){if(!D)D=!0,Z+="\nlet resolved\n";if(Z+=p2(d)?`resolved = await beforeHandle[${V}](c);
`:`resolved = beforeHandle[${V}](c);
`,d.subType==="mapResolve")Z+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else Z+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else
						Object.assign(c, resolved)
`}else if(!r2)Z+=p2(d)?`await beforeHandle[${V}](c);
`:`beforeHandle[${V}](c);
`,i();else{if(Z+=p2(d)?`be = await beforeHandle[${V}](c);
`:`be = beforeHandle[${V}](c);
`,i("be"),Z+=`if(be !== undefined) {
`,F.resolve(),_.afterHandle?.length){l("handle",{name:J?q.name:void 0}).resolve();let n2=l("afterHandle",{total:_.afterHandle.length});for(let V0=0;V0<_.afterHandle.length;V0++){let Y=_.afterHandle[V0],f=R4(Y),S=n2.resolveChild(Y.fn.name);if(Z+=`c.response = be
`,!f)Z+=p2(Y.fn)?`await afterHandle[${V0}](c, be)
`:`afterHandle[${V0}](c, be)
`;else Z+=p2(Y.fn)?`af = await afterHandle[${V0}](c)
`:`af = afterHandle[${V0}](c)
`,Z+=`if(af !== undefined) { c.response = be = af }
`;S("af")}n2.resolve()}if(B.response)Z+=q2("be");let v0=l("mapResponse",{total:_.mapResponse.length});if(_.mapResponse.length){Z+=`
c.response = be
`;for(let n2=0;n2<_.mapResponse.length;n2++){let V0=_.mapResponse[n2],Y=v0.resolveChild(V0.fn.name);Z+=`
if(mr === undefined) {
							mr = ${W6(V0)?"await":""} onMapResponse[${n2}](c)
							if(mr !== undefined) be = c.response = mr
						}
`,Y()}}v0.resolve(),Z+=H2,Z+=`return mapEarlyResponse(${G0} be, c.set ${Z0})}
`}}F.resolve()}if(_?.afterHandle.length){let F=l("handle",{name:J?q.name:void 0});if(_.afterHandle.length)Z+=K2?`let r = c.response = await ${Q};
`:`let r = c.response = ${Q};
`;else Z+=K2?`let r = await ${Q};
`:`let r = ${Q};
`;F.resolve();let D=l("afterHandle",{total:_.afterHandle.length});for(let d=0;d<_.afterHandle.length;d++){let i=_.afterHandle[d],r2=R4(i),r=D.resolveChild(i.fn.name);if(!r2)Z+=p2(i.fn)?`await afterHandle[${d}](c)
`:`afterHandle[${d}](c)
`,r();else if(Z+=p2(i.fn)?`af = await afterHandle[${d}](c)
`:`af = afterHandle[${d}](c)
`,r("af"),B.response)Z+="if(af !== undefined) {",D.resolve(),Z+=q2("af"),Z+="c.response = af }";else Z+="if(af !== undefined) {",D.resolve(),Z+=`c.response = af}
`}if(D.resolve(),Z+=`r = c.response
`,B.response)Z+=q2();Z+=H2;let V=l("mapResponse",{total:_.mapResponse.length});if(_.mapResponse.length)for(let d=0;d<_.mapResponse.length;d++){let i=_.mapResponse[d],r2=V.resolveChild(i.fn.name);Z+=`
mr = ${W6(i)?"await":""} onMapResponse[${d}](c)
				if(mr !== undefined) r = c.response = mr
`,r2()}if(V.resolve(),Q6)Z+=`return mapResponse(${G0} r, c.set ${Z0})
`;else Z+=`return mapCompactResponse(${G0} r ${Z0})
`}else{let F=l("handle",{name:J?q.name:void 0});if(B.response||_.mapResponse.length){if(Z+=K2?`let r = await ${Q};
`:`let r = ${Q};
`,F.resolve(),B.response)Z+=q2();l("afterHandle").resolve();let D=l("mapResponse",{total:_.mapResponse.length});if(_.mapResponse.length){Z+="\nc.response = r\n";for(let V=0;V<_.mapResponse.length;V++){let d=_.mapResponse[V],i=D.resolveChild(d.fn.name);Z+=`
if(mr === undefined) {
						mr = ${W6(d)?"await":""} onMapResponse[${V}](c)
    					if(mr !== undefined) r = c.response = mr
					}
`,i()}}if(D.resolve(),Z+=H2,q instanceof Response)Z+=X.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${G0} ${Q}.clone(), c.set ${Z0})
				else
					return ${Q}.clone()`:`return ${Q}.clone()`,Z+="\n";else if(Q6)Z+=`return mapResponse(${G0} r, c.set ${Z0})
`;else Z+=`return mapCompactResponse(${G0} r ${Z0})
`}else if(j||N){Z+=K2?`let r = await ${Q};
`:`let r = ${Q};
`,F.resolve(),l("afterHandle").resolve();let D=l("mapResponse",{total:_.mapResponse.length});if(_.mapResponse.length){Z+="\nc.response = r\n";for(let V=0;V<_.mapResponse.length;V++){let d=_.mapResponse[V],i=D.resolveChild(d.fn.name);Z+=`
if(mr === undefined) {
							mr = ${W6(d)?"await":""} onMapResponse[${V}](c)
    						if(mr !== undefined) r = c.response = mr
						}
`,i()}}if(D.resolve(),Z+=H2,Q6)Z+=`return mapResponse(${G0} r, c.set ${Z0})
`;else Z+=`return mapCompactResponse(${G0} r ${Z0})
`}else{F.resolve();let D=K2?`await ${Q}`:Q;if(l("afterHandle").resolve(),q instanceof Response)Z+=X.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${G0} ${Q}.clone(), c.set ${Z0})
				else
					return ${Q}.clone()`:`return ${Q}.clone()`,Z+="\n";else if(Q6)Z+=`return mapResponse(${G0} ${D}, c.set ${Z0})
`;else Z+=`return mapCompactResponse(${G0} ${D} ${Z0})
`}}if(Z+=`
} catch(error) {`,C)Z+=`
if(isParsing) error = new ParseError()
`;if(!h1)Z+=`
return (async () => {
`;if(Z+=`
const set = c.set
if (!set.status || set.status < 300) set.status = error?.status || 500
`,N)for(let F=0;F<_.trace.length;F++)Z+=`report${F}?.resolve(error);reportChild${F}?.(error);
`;let H1=l("error",{total:_.error.length});if(_.error.length){Z+=`
				c.error = error
				if(error instanceof TypeBoxError) {
					c.code = "VALIDATION"
					c.set.status = 422
				} else
					c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let F=0;F<_.error.length;F++){let D=H1.resolveChild(_.error[F].fn.name);if(p2(_.error[F]))Z+=`
er = await handleErrors[${F}](c)
`;else Z+=`
er = handleErrors[${F}](c)
if (er instanceof Promise) er = await er
`;D();let V=l("mapResponse",{total:_.mapResponse.length});if(_.mapResponse.length)for(let d=0;d<_.mapResponse.length;d++){let i=_.mapResponse[d],r2=V.resolveChild(i.fn.name);Z+=`
c.response = er

							er = ${W6(i)?"await":""} onMapResponse[${d}](c)
							if(er instanceof Promise) er = await er
`,r2()}if(V.resolve(),Z+=`er = mapEarlyResponse(er, set ${Z0})
`,Z+="if (er) {",N){for(let d=0;d<_.trace.length;d++)Z+=`
report${d}.resolve()
`;H1.resolve()}Z+=`return er
}
`}}if(H1.resolve(),Z+=`return handleError(c, error, true)
`,!h1)Z+="})()";if(Z+="}",P||N){if(Z+=" finally { ",!h1)Z+=";(async () => {";let F=l("afterResponse",{total:_.afterResponse.length});if(P)for(let D=0;D<_.afterResponse.length;D++){let V=F.resolveChild(_.afterResponse[D].fn.name);Z+=`
await afterResponse[${D}](c);
`,V()}if(F.resolve(),!h1)Z+="})();";Z+="}"}Z=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			parseQueryFromURL,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer,
		TypeBoxError
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${h1?"async":""} function handle(c) {
		${_.beforeHandle.length?"let be":""}
		${_.afterHandle.length?"let af":""}
		${_.mapResponse.length?"let mr":""}

		${W?"c.schema = schema; c.defs = definitions":""}
		${Z}
	}`;try{return Function("hooks",Z)({handler:q,hooks:E9(_),validator:B,handleError:w.handleError,utils:{mapResponse:g2,mapCompactResponse:V1,mapEarlyResponse:s2,parseQuery:T5,parseQueryFromURL:$7,isNotEmpty:w1},error:{NotFoundError:t5,ValidationError:N2,InternalServerError:JA,ParseError:YA},schema:w.router.history,definitions:w.definitions.type,ERROR_CODE:_w,parseCookie:s9,signCookie:$w,decodeURIComponent:_7.default,ElysiaCustomStatusResponse:M1,ELYSIA_TRACE:c5,ELYSIA_REQUEST_ID:qw,getServer:()=>w.getServer(),TypeBoxError:n})}catch{let F=E9(_);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof q==="function"?q.toString():q,hooks:{...F,transform:F?.transform?.map?.((D)=>D.toString()),resolve:F?.resolve?.map?.((D)=>D.toString()),beforeHandle:F?.beforeHandle?.map?.((D)=>D.toString()),afterHandle:F?.afterHandle?.map?.((D)=>D.toString()),mapResponse:F?.mapResponse?.map?.((D)=>D.toString()),parse:F?.parse?.map?.((D)=>D.toString()),error:F?.error?.map?.((D)=>D.toString()),afterResponse:F?.afterResponse?.map?.((D)=>D.toString()),stop:F?.stop?.map?.((D)=>D.toString())},validator:B,definitions:w.definitions.type}),console.log("---"),process.exit(1)}},T9=(w)=>{let z=w.config.handler?.standardHostname??!0,U="",$="",_=w.setHeaders;for(let C of Object.keys(w.singleton.decorator))U+=`,${C}: app.singleton.decorator.${C}`;let B=w.router,q=w.event.trace.length>0,W=`
	const route = router.find(request.method, path) ${B.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${w.event.error.length?"app.handleError(ctx, notFound)":w.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params
`;W+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)
`;let X="";for(let[C,{code:b,all:I,static:k}]of Object.entries(B.static.http.map)){if(k)X+=`case '${C}':
switch(request.method) {
${b}
${I??"default: break map"}}

`;X+=`case '${C}':
switch(request.method) {
${b}
${I??"default: break map"}}

`}let J=w.event.request.some(p2);if($+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${w.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${w.event.error.length?"":`
const error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });
`}

	${w.event.trace.length?`const ${w.event.trace.map((C,b)=>`tr${b} = app.event.trace[${b}].fn`).join(",")}`:""}

	${J?"async":""} function map(request) {
`,w.event.request.length)$+="let re";if($+=`
const url = request.url
		const s = url.indexOf('/', ${z?11:7})
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)
`,$+=`${q?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(_??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${w.inference.server?`, get server() {
							return getServer()
						}`:""}
			${q?",[ELYSIA_REQUEST_ID]: id":""}
			${U}
		}
`,w.event.trace.length)$+=`
ctx[ELYSIA_TRACE] = [${w.event.trace.map((C,b)=>`tr${b}(ctx)`).join(",")}]
`;let P=y5({context:"ctx",trace:w.event.trace,addFn(C){$+=C}})("request",{attribute:"ctx",total:w.event.request.length});if(w.event.request.length){$+=`
 try {
`;for(let C=0;C<w.event.request.length;C++){let b=w.event.request[C],I=R4(b),k=p2(b),j=P.resolveChild(w.event.request[C].fn.name);if(I)$+=`re = mapEarlyResponse(
					${k?"await":""} onRequest[${C}](ctx),
					ctx.set,
					request
				)
`,j("re"),$+=`if(re !== undefined) return re
`;else $+=`${k?"await":""} onRequest[${C}](ctx)
`,j()}$+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}P.resolve();let N=w.router.static.ws,Z=w.router.ws;if(Object.keys(N).length||Z.history.length){$+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[C,b]of Object.entries(N))$+=`
					case '${C}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${b}](ctx)

						break`;$+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}
`}if($+=`
		map: switch(path) {
			${X}

			default:
				break
		}

		${W}
	}
`,w.extender.higherOrderFunctions.length){let C="map";for(let b=0;b<w.extender.higherOrderFunctions.length;b++)C=`hoc[${b}](${C}, request)`;$+=`return function hocMap(request) { return ${C}(request) }`}else $+="return map";let O=q7(w);return w.handleError=O,Function("data",$)({app:w,mapEarlyResponse:s2,NotFoundError:t5,randomId:U7,handleError:O,error:QA,redirect:z7,ELYSIA_TRACE:c5,ELYSIA_REQUEST_ID:qw,getServer:()=>w.getServer()})},q7=(w)=>{let z=w.event,U="";U+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${w.event.error.find(p2)||w.event.mapResponse.find(p2)?"async":""} function(context, error, skipGlobal) {`;let $=w.event.trace.length>0;if($)U+="\nconst id = context[ELYSIA_REQUEST_ID]\n";let _=y5({context:"context",trace:z.trace,addFn:(W)=>{U+=W}});U+=`
		const set = context.set
		let r

		if(!context.code)
			context.code = error.code ?? error[ERROR_CODE]

		if(!(context.error instanceof Error))
			context.error = error

		if(error instanceof ElysiaCustomStatusResponse) {
			error.status = error.code
			error.message = error.response
		}
`;let B=$||z.afterResponse.length>0||z.afterResponse.length>0?"context.response = ":"";for(let W=0;W<w.event.error.length;W++){let X=w.event.error[W],J=`${p2(X)?"await ":""}onError[${W}](context)`;if(U+="\nif(skipGlobal !== true) {\n",R4(X)){U+=`r = ${J}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r instanceof ElysiaCustomStatusResponse) {
					error.status = error.code
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status
`;let Q=_("mapResponse",{total:z.mapResponse.length,name:"context"});if(z.mapResponse.length)for(let P=0;P<z.mapResponse.length;P++){let N=z.mapResponse[P],Z=Q.resolveChild(N.fn.name);U+=`
context.response = r
						r = ${W6(N)?"await":""} onMapResponse[${P}](context)
`,Z()}Q.resolve(),U+=`return mapResponse(${B} r, set, context.request)}
`}else U+=J+"\n";U+="\n}\n"}U+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
	    const reportedError = error.error ?? error
		set.status = reportedError.status ?? 422
		return new Response(
			reportedError.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)
`;let q=_("mapResponse",{total:z.mapResponse.length,name:"context"});if(z.mapResponse.length)for(let W=0;W<z.mapResponse.length;W++){let X=z.mapResponse[W],J=q.resolveChild(X.fn.name);U+=`
context.response = error
			error = ${W6(X)?"await":""} onMapResponse[${W}](context)
`,J()}return q.resolve(),U+=`
return mapResponse(${B} error, set, context.request)
}
}`,Function("inject",U)({app:w,mapResponse:g2,ERROR_CODE:_w,ElysiaCustomStatusResponse:M1,ELYSIA_TRACE:c5,ELYSIA_REQUEST_ID:qw})},d9=(w)=>async(z)=>{let U=z.url,$=U.indexOf("/",11),_=U.indexOf("?",$+1),B=_===-1?U.substring($):U.substring($,_),q={cookie:{},status:200,headers:{}},W=Object.assign({},w.singleton.decorator,{set:q,store:w.singleton.store,request:z,path:B,qi:_,redirect:z7});try{for(let I=0;I<w.event.request.length;I++){let k=w.event.request[I].fn,j=k(W);if(j instanceof Promise)j=await j;if(j=s2(j,q),j)return W.response=j}let X=w.router.dynamic.find(z.method,B)??w.router.dynamic.find("ALL",B);if(!X)throw new t5;let{handle:J,hooks:Q,validator:P,content:N}=X.store,Z;if(z.method!=="GET"&&z.method!=="HEAD")if(N)switch(N){case"application/json":Z=await z.json();break;case"text/plain":Z=await z.text();break;case"application/x-www-form-urlencoded":Z=T5(await z.text());break;case"application/octet-stream":Z=await z.arrayBuffer();break;case"multipart/form-data":Z={};let I=await z.formData();for(let k of I.keys()){if(Z[k])continue;let j=I.getAll(k);if(j.length===1)Z[k]=j[0];else Z[k]=j}break}else{let I=z.headers.get("content-type");if(I){let k=I.indexOf(";");if(k!==-1)I=I.slice(0,k);W.contentType=I;for(let j=0;j<Q.parse.length;j++){let v=Q.parse[j].fn,y=v(W,I);if(y instanceof Promise)y=await y;if(y){Z=y;break}}if(delete W.contentType,Z===void 0)switch(I){case"application/json":Z=await z.json();break;case"text/plain":Z=await z.text();break;case"application/x-www-form-urlencoded":Z=T5(await z.text());break;case"application/octet-stream":Z=await z.arrayBuffer();break;case"multipart/form-data":Z={};let j=await z.formData();for(let v of j.keys()){if(Z[v])continue;let y=j.getAll(v);if(y.length===1)Z[v]=y[0];else Z[v]=y}break}}}W.body=Z,W.params=X?.params||void 0,W.query=_===-1?{}:$7(U.substring(_+1)),W.headers={};for(let[I,k]of z.headers.entries())W.headers[I]=k;let O=Object.assign({},w.config?.cookie,P?.cookie?.config),C=z.headers.get("cookie");W.cookie=await s9(W.set,C,O?{secrets:O.secrets!==void 0?typeof O.secrets==="string"?O.secrets:O.secrets.join(","):void 0,sign:O.sign===!0?!0:O.sign!==void 0?typeof O.sign==="string"?O.sign:O.sign.join(","):void 0}:void 0);for(let I=0;I<Q.transform.length;I++){let k=Q.transform[I],j=k.fn(W);if(k.subType==="derive")if(j instanceof Promise)Object.assign(W,await j);else Object.assign(W,j);else if(j instanceof Promise)await j}if(P){if(P.createHeaders?.()){let I={};for(let k in z.headers)I[k]=z.headers.get(k);if(P.headers.Check(I)===!1)throw new N2("header",P.headers,I)}else if(P.headers?.Decode)W.headers=P.headers.Decode(W.headers);if(P.createParams?.()?.Check(W.params)===!1)throw new N2("params",P.params,W.params);else if(P.params?.Decode)W.params=P.params.Decode(W.params);if(P.createQuery?.()?.Check(W.query)===!1)throw new N2("query",P.query,W.query);else if(P.query?.Decode)W.query=P.query.Decode(W.query);if(P.createCookie?.()){let I={};for(let[k,j]of Object.entries(W.cookie))I[k]=j.value;if(P.cookie.Check(I)===!1)throw new N2("cookie",P.cookie,I);else if(P.cookie?.Decode)I=P.cookie.Decode(I)}if(P.createBody?.()?.Check(Z)===!1)throw new N2("body",P.body,Z);else if(P.body?.Decode)W.body=P.body.Decode(Z)}for(let I=0;I<Q.beforeHandle.length;I++){let k=Q.beforeHandle[I],j=k.fn(W);if(k.subType==="resolve"){if(j instanceof Promise)Object.assign(W,await j);else Object.assign(W,j);continue}else if(j instanceof Promise)j=await j;if(j!==void 0){W.response=j;for(let y=0;y<Q.afterHandle.length;y++){let H2=Q.afterHandle[y].fn(W);if(H2 instanceof Promise)H2=await H2;if(H2)j=H2}let v=s2(j,W.set);if(v)return W.response=v}}let b=J(W);if(b instanceof Promise)b=await b;if(!Q.afterHandle.length){let I=b instanceof M1?b.code:q.status?typeof q.status==="string"?D4[q.status]:q.status:200,k=P?.createResponse?.()?.[I];if(k?.Check(b)===!1)throw new N2("response",k,b);else if(k?.Decode)b=k.Decode(b)}else{W.response=b;for(let I=0;I<Q.afterHandle.length;I++){let k=Q.afterHandle[I].fn(W);if(k instanceof Promise)k=await k;let j=s2(k,W.set);if(j!==void 0){let v=P?.response?.[j.status];if(v?.Check(j)===!1)throw new N2("response",v,j);else if(v?.Decode)b=v.Decode(b);return W.response=j}}}if(W.set.cookie&&O?.sign){let I=!O.secrets?void 0:typeof O.secrets==="string"?O.secrets:O.secrets[0];if(O.sign===!0)for(let[k,j]of Object.entries(W.set.cookie))W.set.cookie[k].value=await $w(j.value,"${secret}");else{let k=P?.cookie?.schema?.properties;for(let j of O.sign){if(!(j in k))continue;if(W.set.cookie[j]?.value)W.set.cookie[j].value=await $w(W.set.cookie[j].value,I)}}}return W.response=g2(b,W.set)}catch(X){let J=X instanceof m4&&X.error?X.error:X;if(J.status)q.status=J.status;return w.handleError(W,J)}finally{for(let X of w.event.afterResponse)await X.fn(W)}},HA=(w)=>async(z,U)=>{let $=Object.assign(z,{error:U,code:U.code});$.set=z.set;for(let _=0;_<w.event.error.length;_++){let q=w.event.error[_].fn($);if(q instanceof Promise)q=await q;if(q!==void 0&&q!==null)return z.response=g2(q,z.set)}return new Response(typeof U.cause==="string"?U.cause:U.message,{headers:z.set.headers,status:U.status??500})},l2=class w{constructor(z={}){if(this.server=null,this.dependencies={},this._routes={},this._types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}},this._ephemeral={},this._volatile={},this.version=g9,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={type:{},error:{}},this.extender={macros:[],higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return H4(H4(this.global,this.scoped),this.local)}},this.event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]},this.telemetry={stack:void 0},this.router={http:new I5,ws:new I5,dynamic:new I5,static:{http:{static:{},handlers:[],map:{},all:""},ws:{}},history:[]},this.routeTree=new Map,this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1},this.handle=async(U)=>this.fetch(U),this.fetch=(U)=>{return(this.fetch=this.config.aot?T9(this):d9(this))(U)},this.handleError=async(U,$)=>(this.handleError=this.config.aot?q7(this):HA(this))(U,$),this.outerErrorHandler=(U)=>new Response(U.message||U.name||"Error",{status:U?.status??500}),this.listen=(U,$)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof U==="string"){if(!g5(U))throw new Error("Port must be a numeric value");U=parseInt(U)}let _=this.fetch,B=typeof U==="object"?{development:!Bw,reusePort:!0,...this.config.serve||{},...U||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...f9||{}},fetch:_,error:this.outerErrorHandler}:{development:!Bw,reusePort:!0,...this.config.serve||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...f9||{}},port:U,fetch:_,error:this.outerErrorHandler};this.server=Bun?.serve(B);for(let q=0;q<this.event.start.length;q++)this.event.start[q].fn(this);if($)$(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let q=0;q<this.event.stop.length;q++)this.event.stop[q].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this},this.stop=async(U)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(U),this.server=null,this.event.stop.length)for(let $=0;$<this.event.stop.length;$++)this.event.stop[$].fn(this)}},z.tags)if(!z.detail)z.detail={tags:z.tags};else z.detail.tags=z.tags;if(z.nativeStaticResponse===void 0)z.nativeStaticResponse=!0;if(this.config={},this.applyConfig(z??{}),z?.analytic&&(z?.name||z?.seed!==void 0))this.telemetry.stack=new Error().stack}static{this.version=g9}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getServer(){return this.server}get promisedModules(){if(!this._promisedModules)this._promisedModules=new XA;return this._promisedModules}env(z,U=Bun?.env??process.env){if(L0(z,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(U)===!1){let _=new N2("env",z,U);throw new Error(_.all.map((B)=>B.summary).join("\n"))}return this}wrap(z){return this.extender.higherOrderFunctions.push({checksum:G4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:z.toString()})),fn:z}),this}applyMacro(z){if(this.extender.macros.length){let U=qA({globalHook:this.event,localHook:z}),$={events:{global:this.event,local:z},onParse:U("parse"),onTransform:U("transform"),onBeforeHandle:U("beforeHandle"),onAfterHandle:U("afterHandle"),mapResponse:U("mapResponse"),onAfterResponse:U("afterResponse"),onError:U("error")};for(let _ of this.extender.macros)BA(_.fn($),z)}}applyConfig(z){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...z,cookie:{path:"/",...z?.cookie},experimental:z?.experimental??{},seed:z?.seed===void 0?"":z?.seed},this}get models(){let z={};for(let[U,$]of Object.entries(this.definitions.type))z[U]=L0($);return z}add(z,U,$,_,{allowMeta:B=!1,skipPrefix:q=!1}={allowMeta:!1,skipPrefix:!1}){if(_=ZA(_),U!==""&&U.charCodeAt(0)!==47)U="/"+U;if(this.config.prefix&&!q&&!this.config.scoped)U=this.config.prefix+U;if(_?.type)switch(_.type){case"text":_.type="text/plain";break;case"json":_.type="application/json";break;case"formdata":_.type="multipart/form-data";break;case"urlencoded":_.type="application/x-www-form-urlencoded";break;case"arrayBuffer":_.type="application/octet-stream";break;default:break}let W=this.definitions.type,X=!this.config.aot,J={...this.validator.getCandidate()},Q={body:_?.body??J?.body,headers:_?.headers??J?.headers,params:_?.params??J?.params,query:_?.query??J?.query,cookie:_?.cookie??J?.cookie,response:_?.response??J?.response},P=()=>Q.cookie?w7({validator:Q.cookie,defaultConfig:this.config.cookie,config:Q.cookie?.config??{},dynamic:X,models:W}):void 0,N=this.config.normalize,Z=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:L0(Q.body,{dynamic:X,models:W,normalize:N,additionalCoerce:O9()}),headers:L0(Q.headers,{dynamic:X,models:W,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:_6()}),params:L0(Q.params,{dynamic:X,models:W,coerce:!0,additionalCoerce:_6()}),query:L0(Q.query,{dynamic:X,models:W,normalize:N,coerce:!0,additionalCoerce:_6()}),cookie:P(),response:D9(Q.response,{dynamic:X,models:W,normalize:N})}:{createBody(){if(this.body)return this.body;return this.body=L0(Q.body,{dynamic:X,models:W,normalize:N,additionalCoerce:O9()})},createHeaders(){if(this.headers)return this.headers;return this.headers=L0(Q.headers,{dynamic:X,models:W,additionalProperties:!N,coerce:!0,additionalCoerce:_6()})},createParams(){if(this.params)return this.params;return this.params=L0(Q.params,{dynamic:X,models:W,coerce:!0,additionalCoerce:_6()})},createQuery(){if(this.query)return this.query;return this.query=L0(Q.query,{dynamic:X,models:W,coerce:!0,additionalCoerce:_6()})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=P()},createResponse(){if(this.response)return this.response;return this.response=D9(Q.response,{dynamic:X,models:W,normalize:N})}},O=U.endsWith("/")?U.slice(0,U.length-1):U+"/";if(_=i0(_,J),_.tags)if(!_.detail)_.detail={tags:_.tags};else _.detail.tags=_.tags;if(w1(this.config.detail))_.detail=H0(Object.assign({},this.config.detail),_.detail);this.applyMacro(_);let C=i0(this.event,_);if(this.config.aot===!1){if(this.router.dynamic.add(z,U,{validator:Z,hooks:C,content:_?.type,handle:$}),this.config.strictPath===!1)this.router.dynamic.add(z,O,{validator:Z,hooks:C,content:_?.type,handle:$});this.router.history.push({method:z,path:U,composed:null,handler:$,hooks:C});return}let b=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,I=E5(this.inference),k=typeof $!=="function"?sY($,C,this.setHeaders):void 0,j=typeof $!=="function"?lY($,C,this.setHeaders):void 0;if(this.config.nativeStaticResponse===!0&&j&&(z==="GET"||z==="ALL"))this.router.static.http.static[U]=j();let v=()=>LA({app:this,path:U,method:z,localHook:i0(_),hooks:C,validator:Z,handler:$,allowMeta:B,inference:I}),y=b?v():(q2)=>{return v()(q2)},H2=this.router.history.length;if(this.routeTree.has(z+U))for(let q2=0;q2<this.router.history.length;q2++){let l=this.router.history[q2];if(l.path===U&&l.method===z){let K2=this.router.history.splice(q2,1)[0];if(K2&&this.routeTree.has(K2?.method+K2?.path))this.routeTree.delete(K2.method+K2.path)}}else this.routeTree.set(z+U,H2);this.router.history.push({method:z,path:U,composed:y,handler:$,hooks:C});let Y2=this.router.static.http,A2={handler:b?y:void 0,compile:v};if(z==="$INTERNALWS"){let q2=this.config.strictPath?void 0:U.endsWith("/")?U.slice(0,U.length-1):U+"/";if(U.indexOf(":")===-1&&U.indexOf("*")===-1){let l=Y2.handlers.length;if(Y2.handlers.push((K2)=>(Y2.handlers[l]=v())(K2)),this.router.static.ws[U]=l,q2)this.router.static.ws[q2]=l}else if(this.router.ws.add("ws",U,A2),q2)this.router.ws.add("ws",q2,A2);return}if(U.indexOf(":")===-1&&U.indexOf("*")===-1){let q2=Y2.handlers.length;if(Y2.handlers.push(k??((K2)=>(Y2.handlers[q2]=v())(K2))),!Y2.map[U])Y2.map[U]={code:""};let l=k?"":"ctx";if(z==="ALL")Y2.map[U].all=`default: return st[${q2}](${l})
`;else Y2.map[U].code=`case '${z}': return st[${q2}](${l})
${Y2.map[U].code}`;if(!this.config.strictPath){if(!Y2.map[O])Y2.map[O]={code:""};if(this.config.nativeStaticResponse===!0&&j&&(z==="GET"||z==="ALL"))this.router.static.http.static[O]=j();if(z==="ALL")Y2.map[O].all=`default: return st[${q2}](${l})
`;else Y2.map[O].code=`case '${z}': return st[${q2}](${l})
${Y2.map[O].code}`}}else if(this.router.http.add(z,U,A2),!this.config.strictPath){let q2=U.endsWith("/")?U.slice(0,U.length-1):U+"/";if(this.config.nativeStaticResponse===!0&&k&&(z==="GET"||z==="ALL"))this.router.static.http.static[q2]=k();this.router.http.add(z,q2,A2)}}headers(z){if(!z)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=H0(this.setHeaders,z),this}onStart(z){return this.on("start",z),this}onRequest(z){return this.on("request",z),this}onParse(z,U){if(!U)return this.on("parse",z);return this.on(z,"parse",U)}onTransform(z,U){if(!U)return this.on("transform",z);return this.on(z,"transform",U)}resolve(z,U){if(!U)U=z,z={as:"local"};let $={subType:"resolve",fn:U};return this.onBeforeHandle(z,$)}mapResolve(z,U){if(!U)U=z,z={as:"local"};let $={subType:"mapResolve",fn:U};return this.onBeforeHandle(z,$)}onBeforeHandle(z,U){if(!U)return this.on("beforeHandle",z);return this.on(z,"beforeHandle",U)}onAfterHandle(z,U){if(!U)return this.on("afterHandle",z);return this.on(z,"afterHandle",U)}mapResponse(z,U){if(!U)return this.on("mapResponse",z);return this.on(z,"mapResponse",U)}onAfterResponse(z,U){if(!U)return this.on("afterResponse",z);return this.on(z,"afterResponse",U)}trace(z,U){if(!U)U=z,z={as:"local"};if(!Array.isArray(U))U=[U];for(let $ of U)this.on(z,"trace",AA($));return this}error(z,U){switch(typeof z){case"string":return U.prototype[_w]=z,this.definitions.error[z]=U,this;case"function":return this.definitions.error=z(this.definitions.error),this}for(let[$,_]of Object.entries(z))_.prototype[_w]=$,this.definitions.error[$]=_;return this}onError(z,U){if(!U)return this.on("error",z);return this.on(z,"error",U)}onStop(z){return this.on("stop",z),this}on(z,U,$){let _;switch(typeof z){case"string":_=z,$=U;break;case"object":if(_=U,!Array.isArray(U)&&typeof U==="object")$=U;break}if(Array.isArray($))$=h0($);else if(typeof $==="function")$=[{fn:$}];else $=[$];let B=$;for(let q of B)q.scope=typeof z==="string"?"local":z?.as??"local";if(_!=="trace")i9({[_]:B.map((q)=>q.fn)},this.inference);for(let q of B){let W=$A(q,"global",{skipIfHasType:!0});switch(_){case"start":this.event.start.push(W);break;case"request":this.event.request.push(W);break;case"parse":this.event.parse.push(W);break;case"transform":this.event.transform.push(W);break;case"beforeHandle":this.event.beforeHandle.push(W);break;case"afterHandle":this.event.afterHandle.push(W);break;case"mapResponse":this.event.mapResponse.push(W);break;case"afterResponse":this.event.afterResponse.push(W);break;case"trace":this.event.trace.push(W);break;case"error":this.event.error.push(W);break;case"stop":this.event.stop.push(W);break}}return this}propagate(){return B0(this.event.parse),B0(this.event.transform),B0(this.event.beforeHandle),B0(this.event.afterHandle),B0(this.event.mapResponse),B0(this.event.afterResponse),B0(this.event.trace),B0(this.event.error),this}as(z){let U={plugin:"scoped",global:"global"}[z];if(B0(this.event.parse,U),B0(this.event.transform,U),B0(this.event.beforeHandle,U),B0(this.event.afterHandle,U),B0(this.event.mapResponse,U),B0(this.event.afterResponse,U),B0(this.event.trace,U),B0(this.event.error,U),z==="plugin")this.validator.scoped=H4(this.validator.scoped,this.validator.local),this.validator.local=null;else if(z==="global")this.validator.global=H4(this.validator.global,H4(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group(z,U,$){let _=new w({...this.config,prefix:""});_.singleton={...this.singleton},_.definitions={...this.definitions},_.getServer=()=>this.getServer(),_.inference=E5(this.inference),_.extender={...this.extender};let B=typeof U==="object",q=(B?$:U)(_);if(this.singleton=H0(this.singleton,_.singleton),this.definitions=H0(this.definitions,_.definitions),q.event.request.length)this.event.request=[...this.event.request||[],...q.event.request||[]];if(q.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...q.event.mapResponse||[]];return this.model(q.definitions.type),Object.values(_.router.history).forEach(({method:W,path:X,handler:J,hooks:Q})=>{if(X=(B?"":this.config.prefix)+z+X,B){let P=U,N=Q;this.add(W,X,J,i0(P,{...N||{},error:!N.error?q.event.error:Array.isArray(N.error)?[...N.error||{},...q.event.error||{}]:[N.error,...q.event.error||{}]}))}else this.add(W,X,J,i0(Q,{error:q.event.error}),{skipPrefix:!0})}),this}guard(z,U){if(!U){if(typeof z==="object"){this.applyMacro(z);let B=z.as??"local";if(this.validator[B]={body:z.body??this.validator[B]?.body,headers:z.headers??this.validator[B]?.headers,params:z.params??this.validator[B]?.params,query:z.query??this.validator[B]?.query,response:z.response??this.validator[B]?.response,cookie:z.cookie??this.validator[B]?.cookie},z.parse)this.on({as:B},"parse",z.parse);if(z.transform)this.on({as:B},"transform",z.transform);if(z.beforeHandle)this.on({as:B},"beforeHandle",z.beforeHandle);if(z.afterHandle)this.on({as:B},"afterHandle",z.afterHandle);if(z.mapResponse)this.on({as:B},"mapResponse",z.mapResponse);if(z.afterResponse)this.on({as:B},"afterResponse",z.afterResponse);if(z.error)this.on({as:B},"error",z.error);if(z.detail)if(this.config.detail)this.config.detail=H0(Object.assign({},this.config.detail),z.detail);else this.config.detail=z.detail;if(z?.tags)if(!this.config.detail)this.config.detail={tags:z.tags};else this.config.detail.tags=z.tags;return this}return this.guard({},z)}let $=new w({...this.config,prefix:""});$.singleton={...this.singleton},$.definitions={...this.definitions},$.inference=E5(this.inference),$.extender={...this.extender};let _=U($);if(this.singleton=H0(this.singleton,$.singleton),this.definitions=H0(this.definitions,$.definitions),_.getServer=()=>this.server,_.event.request.length)this.event.request=[...this.event.request||[],..._.event.request||[]];if(_.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],..._.event.mapResponse||[]];return this.model(_.definitions.type),Object.values($.router.history).forEach(({method:B,path:q,handler:W,hooks:X})=>{this.add(B,q,W,i0(z,{...X||{},error:!X.error?_.event.error:Array.isArray(X.error)?[...X.error||{},..._.event.error||[]]:[X.error,..._.event.error||[]]}))}),this}use(z,U){if(U?.scoped)return this.guard({},($)=>$.use(z));if(Array.isArray(z)){let $=this;for(let _ of z)$=this.use(_);return $}if(z instanceof Promise)return this.promisedModules.add(z.then(($)=>{if(typeof $==="function")return $(this);if($ instanceof w)return this._use($).compile();if(typeof $.default==="function")return $.default(this);if($.default instanceof w)return this._use($.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then(($)=>$.compile())),this;return this._use(z)}_use(z){if(typeof z==="function"){let B=z(this);if(B instanceof Promise)return this.promisedModules.add(B.then((q)=>{if(q instanceof w){q.getServer=()=>this.getServer(),q.getGlobalRoutes=()=>this.getGlobalRoutes(),q.model(this.definitions.type),q.error(this.definitions.error);for(let{method:W,path:X,handler:J,hooks:Q}of Object.values(q.router.history))this.add(W,X,J,i0(Q,{error:q.event.error}));return q.compile(),q}if(typeof q==="function")return q(this);if(typeof q.default==="function")return q.default(this);return this._use(q)}).then((q)=>q.compile())),this;return B}let{name:U,seed:$}=z.config;z.getServer=()=>this.getServer(),z.getGlobalRoutes=()=>this.getGlobalRoutes(),z.model(this.definitions.type),z.error(this.definitions.error);let _=z.config.scoped;if(_){if(U){if(!(U in this.dependencies))this.dependencies[U]=[];let q=$!==void 0?G4(U+JSON.stringify($)):0;if(this.dependencies[U].some(({checksum:W})=>q===W))return this;this.dependencies[U].push(!this.config?.analytic?{name:z.config.name,seed:z.config.seed,checksum:q,dependencies:z.dependencies}:{name:z.config.name,seed:z.config.seed,checksum:q,dependencies:z.dependencies,stack:z.telemetry.stack,routes:z.router.history,decorators:z.singleton.decorator,store:z.singleton.store,type:z.definitions.type,error:z.definitions.error,derive:z.event.transform.filter((W)=>W.subType==="derive").map((W)=>({fn:W.fn.toString(),stack:new Error().stack??""})),resolve:z.event.transform.filter((W)=>W.subType==="derive").map((W)=>({fn:W.fn.toString(),stack:new Error().stack??""}))})}z.extender.macros=this.extender.macros.concat(z.extender.macros);let B=[];for(let q=0;q<z.extender.macros.length;q++){let W=this.extender.macros[q];if(B.includes(W.checksum))z.extender.macros.splice(q,1),q--;B.push(W.checksum)}if(z.onRequest((q)=>{Object.assign(q,this.singleton.decorator),Object.assign(q.store,this.singleton.store)}),z.event.trace.length)z.event.trace.push(...z.event.trace);if(!z.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if(z.event.error.length)z.event.error.push(...this.event.error);if(z.config.aot)z.compile();if(_===!0&&z.config.prefix){this.mount(z.config.prefix+"/",z.fetch);for(let q of z.router.history)this.routeTree.set(q.method+`${z.config.prefix}${q.path}`,this.router.history.length),this.router.history.push({...q,path:`${z.config.prefix}${q.path}`,hooks:i0(q.hooks,{error:this.event.error})})}else{this.mount(z.fetch);for(let q of z.router.history)this.routeTree.set(q.method+`${z.config.prefix}${q.path}`,this.router.history.length),this.router.history.push({...q,path:`${z.config.prefix}${q.path}`,hooks:i0(q.hooks,{error:this.event.error})})}return this}else{if(this.headers(z.setHeaders),U){if(!(U in this.dependencies))this.dependencies[U]=[];let q=$!==void 0?G4(U+JSON.stringify($)):0;if(!this.dependencies[U].some(({checksum:W})=>q===W))this.extender.macros=this.extender.macros.concat(z.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(z.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat(z.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(z.extender.higherOrderFunctions);x9(this.extender.macros),x9(this.extender.higherOrderFunctions);let B=[];for(let q=0;q<this.extender.higherOrderFunctions.length;q++){let W=this.extender.higherOrderFunctions[q];if(W.checksum){if(B.includes(W.checksum))this.extender.higherOrderFunctions.splice(q,1),q--;B.push(W.checksum)}}this.inference={body:this.inference.body||z.inference.body,cookie:this.inference.cookie||z.inference.cookie,headers:this.inference.headers||z.inference.headers,query:this.inference.query||z.inference.query,set:this.inference.set||z.inference.set,server:this.inference.server||z.inference.server}}this.decorate(z.singleton.decorator),this.state(z.singleton.store),this.model(z.definitions.type),this.error(z.definitions.error),z.extender.macros=this.extender.macros.concat(z.extender.macros);for(let{method:B,path:q,handler:W,hooks:X}of Object.values(z.router.history))this.add(B,q,W,i0(X,{error:z.event.error}));if(!_)if(U){if(!(U in this.dependencies))this.dependencies[U]=[];let B=$!==void 0?G4(U+JSON.stringify($)):0;if(this.dependencies[U].some(({checksum:q})=>B===q))return this;this.dependencies[U].push(!this.config?.analytic?{name:z.config.name,seed:z.config.seed,checksum:B,dependencies:z.dependencies}:{name:z.config.name,seed:z.config.seed,checksum:B,dependencies:z.dependencies,stack:z.telemetry.stack,routes:z.router.history,decorators:z.singleton,store:z.singleton.store,type:z.definitions.type,error:z.definitions.error,derive:z.event.transform.filter((q)=>q?.subType==="derive").map((q)=>({fn:q.toString(),stack:new Error().stack??""})),resolve:z.event.transform.filter((q)=>q?.subType==="resolve").map((q)=>({fn:q.toString(),stack:new Error().stack??""}))}),this.event=C9(this.event,I9(z.event),B)}else this.event=C9(this.event,I9(z.event));return this.validator.global=i0(this.validator.global,{...z.validator.global}),this.validator.local=i0(this.validator.local,{...z.validator.scoped}),this}macro(z){let U={checksum:G4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:z.toString()})),fn:z};return this.extender.macros.push(U),this}mount(z,U){if(z instanceof w||typeof z==="function"||z.length===0||z==="/"){let B=typeof z==="function"?z:z instanceof w?z.compile().fetch:U instanceof w?U.compile().fetch:U,q=async({request:W,path:X})=>{if(W.method==="GET"||W.method==="HEAD"||!W.headers.get("content-type"))return B(new Request(ww(W.url,X||"/"),W));return B(new Request(ww(W.url,X||"/"),{...W,body:await W.arrayBuffer()}))};return this.all("/*",q,{type:"none"}),this}let $=z.length;if(U instanceof w)U=U.compile().fetch;let _=async({request:B,path:q})=>{if(B.method==="GET"||B.method==="HEAD"||!B.headers.get("content-type"))return U(new Request(ww(B.url,q.slice($)||"/"),B));return U(new Request(ww(B.url,q.slice($)||"/"),{...B,body:await B.arrayBuffer()}))};return this.all(z,_,{type:"none"}),this.all(z+(z.endsWith("/")?"*":"/*"),_,{type:"none"}),this}get(z,U,$){return this.add("GET",z,U,$),this}post(z,U,$){return this.add("POST",z,U,$),this}put(z,U,$){return this.add("PUT",z,U,$),this}patch(z,U,$){return this.add("PATCH",z,U,$),this}delete(z,U,$){return this.add("DELETE",z,U,$),this}options(z,U,$){return this.add("OPTIONS",z,U,$),this}all(z,U,$){return this.add("ALL",z,U,$),this}head(z,U,$){return this.add("HEAD",z,U,$),this}connect(z,U,$){return this.add("CONNECT",z,U,$),this}route(z,U,$,_){return this.add(z.toUpperCase(),U,$,_,_?.config),this}ws(z,U){let $=U.transformMessage?Array.isArray(U.transformMessage)?U.transformMessage:[U.transformMessage]:void 0,_=null,B=L0(U?.body,{models:this.definitions.type,normalize:this.config.normalize}),q=L0(U?.response,{models:this.definitions.type,normalize:this.config.normalize}),W=(X)=>{if(typeof X==="string"){let J=X?.charCodeAt(0);if(J===47||J===123)try{X=JSON.parse(X)}catch{}else if(g5(X))X=+X}if($?.length)for(let J=0;J<$.length;J++){let Q=$[J](X);if(Q!==void 0)X=Q}return X};return this.route("$INTERNALWS",z,(X)=>{let{set:J,path:Q,qi:P,headers:N,query:Z,params:O}=X;if(_===null)_=this.getServer();if(_?.upgrade(X.request,{headers:typeof U.upgrade==="function"?U.upgrade(X):U.upgrade,data:{validator:q,open(C){U.open?.(new zw(C,X))},message:(C,b)=>{let I=W(b);if(B?.Check(I)===!1)return void C.send(new N2("message",B,I).message);U.message?.(new zw(C,X),I)},drain(C){U.drain?.(new zw(C,X))},close(C,b,I){U.close?.(new zw(C,X),b,I)}}}))return;return J.status=400,"Expected a websocket connection"},{beforeHandle:U.beforeHandle,transform:U.transform,headers:U.headers,params:U.params,query:U.query}),this}state(z,U,$){if(U===void 0)$=z,z={as:"append"},U="";else if($===void 0){if(typeof z==="string")$=U,U=z,z={as:"append"};else if(typeof z==="object")$=U,U=""}let{as:_}=z;if(typeof U!=="string")return this;switch(typeof $){case"object":if(U){if(U in this.singleton.store)this.singleton.store[U]=H0(this.singleton.store[U],$,{override:_==="override"});else this.singleton.store[U]=$;return this}if($===null)return this;return this.singleton.store=H0(this.singleton.store,$,{override:_==="override"}),this;case"function":if(U){if(_==="override"||!(U in this.singleton.store))this.singleton.store[U]=$}else this.singleton.store=$(this.singleton.store);return this;default:if(_==="override"||!(U in this.singleton.store))this.singleton.store[U]=$;return this}}decorate(z,U,$){if(U===void 0)$=z,z={as:"append"},U="";else if($===void 0){if(typeof z==="string")$=U,U=z,z={as:"append"};else if(typeof z==="object")$=U,U=""}let{as:_}=z;if(typeof U!=="string")return this;switch(typeof $){case"object":if(U){if(U in this.singleton.decorator)this.singleton.decorator[U]=H0(this.singleton.decorator[U],$,{override:_==="override"});else this.singleton.decorator[U]=$;return this}if($===null)return this;return this.singleton.decorator=H0(this.singleton.decorator,$,{override:_==="override"}),this;case"function":if(U){if(_==="override"||!(U in this.singleton.decorator))this.singleton.decorator[U]=$}else this.singleton.decorator=$(this.singleton.decorator);return this;default:if(_==="override"||!(U in this.singleton.decorator))this.singleton.decorator[U]=$;return this}}derive(z,U){if(!U)U=z,z={as:"local"};let $={subType:"derive",fn:U};return this.onTransform(z,$)}model(z,U){switch(typeof z){case"object":return Object.entries(z).forEach(([$,_])=>{if(!($ in this.definitions.type))this.definitions.type[$]=_}),this;case"function":return this.definitions.type=z(this.definitions.type),this}return this.definitions.type[z]=U,this}mapDerive(z,U){if(!U)U=z,z={as:"local"};let $={subType:"mapDerive",fn:U};return this.onTransform(z,$)}affix(z,U,$){if($==="")return this;let _=["_","-"," "],B=(J)=>J[0].toUpperCase()+J.slice(1),q=z==="prefix"?(J,Q)=>_.includes(J.at(-1)??"")?J+Q:J+B(Q):_.includes($.at(-1)??"")?(J,Q)=>Q+J:(J,Q)=>Q+B(J),W=(J)=>{let Q={};switch(J){case"decorator":for(let P in this.singleton.decorator)Q[q($,P)]=this.singleton.decorator[P];this.singleton.decorator=Q;break;case"state":for(let P in this.singleton.store)Q[q($,P)]=this.singleton.store[P];this.singleton.store=Q;break;case"model":for(let P in this.definitions.type)Q[q($,P)]=this.definitions.type[P];this.definitions.type=Q;break;case"error":for(let P in this.definitions.error)Q[q($,P)]=this.definitions.error[P];this.definitions.error=Q;break}},X=Array.isArray(U)?U:[U];for(let J of X.some((Q)=>Q==="all")?["decorator","state","model","error"]:X)W(J);return this}prefix(z,U){return this.affix("prefix",z,U)}suffix(z,U){return this.affix("suffix",z,U)}compile(){if(this.fetch=this.config.aot?T9(this):d9(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}get modules(){return Promise.all(this.promisedModules.promises)}};var W7;(function(w){w[w.Include=0]="Include",w[w.None=1]="None"})(W7||(W7={}));var X7;(function(w){w[w.Required=0]="Required",w[w.Ignore=1]="Ignore"})(X7||(X7={}));function i5(w){return Q7(w,GA,O4.Include)}function C4(w){return Q7(w,RA,O4.None)}function Q7(w,z,U){let $="";for(let _=0;_<w.byteLength;_+=3){let B=0,q=0;for(let W=0;W<3&&_+W<w.byteLength;W++)B=B<<8|w[_+W],q+=8;for(let W=0;W<4;W++)if(q>=6)$+=z[B>>q-6&63],q-=6;else if(q>0)$+=z[B<<6-q&63],q=0;else if(U===O4.Include)$+="="}return $}var GA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";var O4;(function(w){w[w.Include=0]="Include",w[w.None=1]="None"})(O4||(O4={}));var Z7;(function(w){w[w.Required=0]="Required",w[w.Ignore=1]="Ignore"})(Z7||(Z7={}));class J7{uint8(w,z){if(w.byteLength<z+1)throw new TypeError("Insufficient bytes");return w[z]}uint16(w,z){if(w.byteLength<z+2)throw new TypeError("Insufficient bytes");return w[z]<<8|w[z+1]}uint32(w,z){if(w.byteLength<z+4)throw new TypeError("Insufficient bytes");let U=0;for(let $=0;$<4;$++)U|=w[z+$]<<24-$*8;return U}uint64(w,z){if(w.byteLength<z+8)throw new TypeError("Insufficient bytes");let U=0n;for(let $=0;$<8;$++)U|=BigInt(w[z+$])<<BigInt(56-$*8);return U}putUint8(w,z,U){if(w.length<U+1)throw new TypeError("Not enough space");if(z<0||z>255)throw new TypeError("Invalid uint8 value");w[U]=z}putUint16(w,z,U){if(w.length<U+2)throw new TypeError("Not enough space");if(z<0||z>65535)throw new TypeError("Invalid uint16 value");w[U]=z>>8,w[U+1]=z&255}putUint32(w,z,U){if(w.length<U+4)throw new TypeError("Not enough space");if(z<0||z>4294967295)throw new TypeError("Invalid uint32 value");for(let $=0;$<4;$++)w[U+$]=z>>(3-$)*8&255}putUint64(w,z,U){if(w.length<U+8)throw new TypeError("Not enough space");if(z<0||z>18446744073709551615n)throw new TypeError("Invalid uint64 value");for(let $=0;$<8;$++)w[U+$]=Number(z>>BigInt((7-$)*8)&0xffn)}}class Y7{uint8(w,z){if(w.byteLength<z+1)throw new TypeError("Insufficient bytes");return w[z]}uint16(w,z){if(w.byteLength<z+2)throw new TypeError("Insufficient bytes");return w[z]|w[z+1]<<8}uint32(w,z){if(w.byteLength<z+4)throw new TypeError("Insufficient bytes");let U=0;for(let $=0;$<4;$++)U|=w[z+$]<<$*8;return U}uint64(w,z){if(w.byteLength<z+8)throw new TypeError("Insufficient bytes");let U=0n;for(let $=0;$<8;$++)U|=BigInt(w[z+$])<<BigInt($*8);return U}putUint8(w,z,U){if(w.length<1+U)throw new TypeError("Insufficient space");if(z<0||z>255)throw new TypeError("Invalid uint8 value");w[U]=z}putUint16(w,z,U){if(w.length<2+U)throw new TypeError("Insufficient space");if(z<0||z>65535)throw new TypeError("Invalid uint16 value");w[U+1]=z>>8,w[U]=z&255}putUint32(w,z,U){if(w.length<4+U)throw new TypeError("Insufficient space");if(z<0||z>4294967295)throw new TypeError("Invalid uint32 value");for(let $=0;$<4;$++)w[U+$]=z>>$*8&255}putUint64(w,z,U){if(w.length<8+U)throw new TypeError("Insufficient space");if(z<0||z>18446744073709551615n)throw new TypeError("Invalid uint64 value");for(let $=0;$<8;$++)w[U+$]=Number(z>>BigInt($*8)&0xffn)}}var L1=new J7,NA=new Y7;function T2(w,z){return(w<<32-z|w>>>z)>>>0}function n0(w,z){return(w<<BigInt(64-z)|w>>BigInt(z))&0xffffffffffffffffn}class A7{blockSize=64;size=32;blocks=new Uint8Array(64);currentBlockSize=0;H=new Uint32Array([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);l=0n;w=new Uint32Array(64);update(w){if(this.l+=BigInt(w.byteLength)*8n,this.currentBlockSize+w.byteLength<64){this.blocks.set(w,this.currentBlockSize),this.currentBlockSize+=w.byteLength;return}let z=0;if(this.currentBlockSize>0){let U=w.slice(0,64-this.currentBlockSize);this.blocks.set(U,this.currentBlockSize),this.process(),z+=U.byteLength,this.currentBlockSize=0}while(z+64<=w.byteLength){let U=w.slice(z,z+64);this.blocks.set(U),this.process(),z+=64}if(w.byteLength-z>0){let U=w.slice(z);this.blocks.set(U),this.currentBlockSize=U.byteLength}}digest(){if(this.blocks[this.currentBlockSize]=128,this.currentBlockSize+=1,64-this.currentBlockSize<8)this.blocks.fill(0,this.currentBlockSize),this.process(),this.currentBlockSize=0;this.blocks.fill(0,this.currentBlockSize),L1.putUint64(this.blocks,this.l,this.blockSize-8),this.process();let w=new Uint8Array(28);for(let z=0;z<7;z++)L1.putUint32(w,this.H[z],z*4);return w}process(){for(let X=0;X<16;X++)this.w[X]=(this.blocks[X*4]<<24|this.blocks[X*4+1]<<16|this.blocks[X*4+2]<<8|this.blocks[X*4+3])>>>0;for(let X=16;X<64;X++){let J=(T2(this.w[X-2],17)^T2(this.w[X-2],19)^this.w[X-2]>>>10)>>>0,Q=(T2(this.w[X-15],7)^T2(this.w[X-15],18)^this.w[X-15]>>>3)>>>0;this.w[X]=J+this.w[X-7]+Q+this.w[X-16]|0}let w=this.H[0],z=this.H[1],U=this.H[2],$=this.H[3],_=this.H[4],B=this.H[5],q=this.H[6],W=this.H[7];for(let X=0;X<64;X++){let J=(T2(_,6)^T2(_,11)^T2(_,25))>>>0,Q=(_&B^~_&q)>>>0,P=W+J+Q+bA[X]+this.w[X]|0,N=(T2(w,2)^T2(w,13)^T2(w,22))>>>0,Z=(w&z^w&U^z&U)>>>0,O=N+Z|0;W=q,q=B,B=_,_=$+P|0,$=U,U=z,z=w,w=P+O|0}this.H[0]=w+this.H[0]|0,this.H[1]=z+this.H[1]|0,this.H[2]=U+this.H[2]|0,this.H[3]=$+this.H[3]|0,this.H[4]=_+this.H[4]|0,this.H[5]=B+this.H[5]|0,this.H[6]=q+this.H[6]|0,this.H[7]=W+this.H[7]|0}}var bA=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function h5(w){let z=new n5;return z.update(w),z.digest()}class n5{blockSize=64;size=32;blocks=new Uint8Array(64);currentBlockSize=0;H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);l=0n;w=new Uint32Array(64);update(w){if(this.l+=BigInt(w.byteLength)*8n,this.currentBlockSize+w.byteLength<64){this.blocks.set(w,this.currentBlockSize),this.currentBlockSize+=w.byteLength;return}let z=0;if(this.currentBlockSize>0){let U=w.slice(0,64-this.currentBlockSize);this.blocks.set(U,this.currentBlockSize),this.process(),z+=U.byteLength,this.currentBlockSize=0}while(z+64<=w.byteLength){let U=w.slice(z,z+64);this.blocks.set(U),this.process(),z+=64}if(w.byteLength-z>0){let U=w.slice(z);this.blocks.set(U),this.currentBlockSize=U.byteLength}}digest(){if(this.blocks[this.currentBlockSize]=128,this.currentBlockSize+=1,64-this.currentBlockSize<8)this.blocks.fill(0,this.currentBlockSize),this.process(),this.currentBlockSize=0;this.blocks.fill(0,this.currentBlockSize),L1.putUint64(this.blocks,this.l,this.blockSize-8),this.process();let w=new Uint8Array(32);for(let z=0;z<8;z++)L1.putUint32(w,this.H[z],z*4);return w}process(){for(let X=0;X<16;X++)this.w[X]=(this.blocks[X*4]<<24|this.blocks[X*4+1]<<16|this.blocks[X*4+2]<<8|this.blocks[X*4+3])>>>0;for(let X=16;X<64;X++){let J=(T2(this.w[X-2],17)^T2(this.w[X-2],19)^this.w[X-2]>>>10)>>>0,Q=(T2(this.w[X-15],7)^T2(this.w[X-15],18)^this.w[X-15]>>>3)>>>0;this.w[X]=J+this.w[X-7]+Q+this.w[X-16]|0}let w=this.H[0],z=this.H[1],U=this.H[2],$=this.H[3],_=this.H[4],B=this.H[5],q=this.H[6],W=this.H[7];for(let X=0;X<64;X++){let J=(T2(_,6)^T2(_,11)^T2(_,25))>>>0,Q=(_&B^~_&q)>>>0,P=W+J+Q+DA[X]+this.w[X]|0,N=(T2(w,2)^T2(w,13)^T2(w,22))>>>0,Z=(w&z^w&U^z&U)>>>0,O=N+Z|0;W=q,q=B,B=_,_=$+P|0,$=U,U=z,z=w,w=P+O|0}this.H[0]=w+this.H[0]|0,this.H[1]=z+this.H[1]|0,this.H[2]=U+this.H[2]|0,this.H[3]=$+this.H[3]|0,this.H[4]=_+this.H[4]|0,this.H[5]=B+this.H[5]|0,this.H[6]=q+this.H[6]|0,this.H[7]=W+this.H[7]|0}}var DA=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);class y1{blockSize=128;size=64;blocks=new Uint8Array(128);currentBlockSize=0;l=0n;w=new BigUint64Array(80);H;constructor(w){if(w.byteLength!==64)throw new TypeError;this.H=w}update(w){if(this.l+=BigInt(w.byteLength)*8n,this.currentBlockSize+w.byteLength<128){this.blocks.set(w,this.currentBlockSize),this.currentBlockSize+=w.byteLength;return}let z=0;if(this.currentBlockSize>0){let U=w.slice(0,128-this.currentBlockSize);this.blocks.set(U,this.currentBlockSize),this.process(),z+=U.byteLength,this.currentBlockSize=0}while(z+128<=w.byteLength){let U=w.slice(z,z+128);this.blocks.set(U),this.process(),z+=128,this.currentBlockSize=0}if(w.byteLength-z>0){let U=w.slice(z);this.blocks.set(U),this.currentBlockSize=U.byteLength}}putDigest(w){if(w.byteLength>64||w.byteLength%8!==0)throw new TypeError;if(this.blocks[this.currentBlockSize]=128,this.currentBlockSize+=1,128-this.currentBlockSize<16)this.blocks.fill(0,this.currentBlockSize),this.process(),this.currentBlockSize=0;this.blocks.fill(0,this.currentBlockSize),L1.putUint64(this.blocks,this.l,this.blockSize-8),this.process();for(let z=0;z<w.byteLength/8;z++)L1.putUint64(w,this.H[z],z*8)}process(){for(let X=0;X<16;X++)this.w[X]=BigInt(this.blocks[X*8])<<56n|BigInt(this.blocks[X*8+1])<<48n|BigInt(this.blocks[X*8+2])<<40n|BigInt(this.blocks[X*8+3])<<32n|BigInt(this.blocks[X*8+4])<<24n|BigInt(this.blocks[X*8+5])<<16n|BigInt(this.blocks[X*8+6])<<8n|BigInt(this.blocks[X*8+7]);for(let X=16;X<80;X++){let J=(n0(this.w[X-2],19)^n0(this.w[X-2],61)^this.w[X-2]>>6n)&0xffffffffffffffffn,Q=(n0(this.w[X-15],1)^n0(this.w[X-15],8)^this.w[X-15]>>7n)&0xffffffffffffffffn;this.w[X]=J+this.w[X-7]+Q+this.w[X-16]&0xffffffffffffffffn}let w=this.H[0],z=this.H[1],U=this.H[2],$=this.H[3],_=this.H[4],B=this.H[5],q=this.H[6],W=this.H[7];for(let X=0;X<80;X++){let J=(n0(_,14)^n0(_,18)^n0(_,41))&0xffffffffffffffffn,Q=(_&B^~_&q)&0xffffffffffffffffn,P=W+J+Q+OA[X]+this.w[X]&0xffffffffffffffffn,N=(n0(w,28)^n0(w,34)^n0(w,39))&0xffffffffffffffffn,Z=(w&z^w&U^z&U)&0xffffffffffffffffn,O=N+Z&0xffffffffffffffffn;W=q,q=B,B=_,_=$+P&0xffffffffffffffffn,$=U,U=z,z=w,w=P+O&0xffffffffffffffffn}this.H[0]=w+this.H[0]&0xffffffffffffffffn,this.H[1]=z+this.H[1]&0xffffffffffffffffn,this.H[2]=U+this.H[2]&0xffffffffffffffffn,this.H[3]=$+this.H[3]&0xffffffffffffffffn,this.H[4]=_+this.H[4]&0xffffffffffffffffn,this.H[5]=B+this.H[5]&0xffffffffffffffffn,this.H[6]=q+this.H[6]&0xffffffffffffffffn,this.H[7]=W+this.H[7]&0xffffffffffffffffn}}class P7{blockSize=128;size=64;sha512=new y1(new BigUint64Array([0x6a09e667f3bcc908n,0xbb67ae8584caa73bn,0x3c6ef372fe94f82bn,0xa54ff53a5f1d36f1n,0x510e527fade682d1n,0x9b05688c2b3e6c1fn,0x1f83d9abfb41bd6bn,0x5be0cd19137e2179n]));update(w){this.sha512.update(w)}digest(){let w=new Uint8Array(64);return this.sha512.putDigest(w),w}}var OA=new BigUint64Array([0x428a2f98d728ae22n,0x7137449123ef65cdn,0xb5c0fbcfec4d3b2fn,0xe9b5dba58189dbbcn,0x3956c25bf348b538n,0x59f111f1b605d019n,0x923f82a4af194f9bn,0xab1c5ed5da6d8118n,0xd807aa98a3030242n,0x12835b0145706fben,0x243185be4ee4b28cn,0x550c7dc3d5ffb4e2n,0x72be5d74f27b896fn,0x80deb1fe3b1696b1n,0x9bdc06a725c71235n,0xc19bf174cf692694n,0xe49b69c19ef14ad2n,0xefbe4786384f25e3n,0x0fc19dc68b8cd5b5n,0x240ca1cc77ac9c65n,0x2de92c6f592b0275n,0x4a7484aa6ea6e483n,0x5cb0a9dcbd41fbd4n,0x76f988da831153b5n,0x983e5152ee66dfabn,0xa831c66d2db43210n,0xb00327c898fb213fn,0xbf597fc7beef0ee4n,0xc6e00bf33da88fc2n,0xd5a79147930aa725n,0x06ca6351e003826fn,0x142929670a0e6e70n,0x27b70a8546d22ffcn,0x2e1b21385c26c926n,0x4d2c6dfc5ac42aedn,0x53380d139d95b3dfn,0x650a73548baf63den,0x766a0abb3c77b2a8n,0x81c2c92e47edaee6n,0x92722c851482353bn,0xa2bfe8a14cf10364n,0xa81a664bbc423001n,0xc24b8b70d0f89791n,0xc76c51a30654be30n,0xd192e819d6ef5218n,0xd69906245565a910n,0xf40e35855771202an,0x106aa07032bbd1b8n,0x19a4c116b8d2d0c8n,0x1e376c085141ab53n,0x2748774cdf8eeb99n,0x34b0bcb5e19b48a8n,0x391c0cb3c5c95a63n,0x4ed8aa4ae3418acbn,0x5b9cca4f7763e373n,0x682e6ff3d6b2b8a3n,0x748f82ee5defb2fcn,0x78a5636f43172f60n,0x84c87814a1f0ab72n,0x8cc702081a6439ecn,0x90befffa23631e28n,0xa4506cebde82bde9n,0xbef9a3f7b2c67915n,0xc67178f2e372532bn,0xca273eceea26619cn,0xd186b8c721c0c207n,0xeada7dd6cde0eb1en,0xf57d4f7fee6ed178n,0x06f067aa72176fban,0x0a637dc5a2c898a6n,0x113f9804bef90daen,0x1b710b35131c471bn,0x28db77f523047d84n,0x32caab7b40c72493n,0x3c9ebe0a15c9bebcn,0x431d67c49c100d4cn,0x4cc5d4becb3e42b6n,0x597f299cfc657e2an,0x5fcb6fab3ad6faecn,0x6c44198c4a475817n]);class S7{blockSize=128;size=48;sha512=new y1(new BigUint64Array([0xcbbb9d5dc1059ed8n,0x629a292a367cd507n,0x9159015a3070dd17n,0x152fecd8f70e5939n,0x67332667ffc00b31n,0x8eb44a8768581511n,0xdb0c2e0d64f98fa7n,0x47b5481dbefa4fa4n]));update(w){this.sha512.update(w)}digest(){let w=new Uint8Array(48);return this.sha512.putDigest(w),w}}class M7{blockSize=128;size=28;sha512=new y1(new BigUint64Array([0x8c3d37c819544da2n,0x73e1996689dcd4d6n,0x1dfab7ae32ff9c82n,0x679dd514582f9fcfn,0x0f6d2b697bd44da8n,0x77e36f7304c48942n,0x3f9d85a86a1d36c8n,0x1112e6ad91d692a1n]));update(w){this.sha512.update(w)}digest(){let w=new Uint8Array(32);return this.sha512.putDigest(w),w.slice(0,28)}}class L7{blockSize=128;size=28;sha512=new y1(new BigUint64Array([0x22312194fc2bf72cn,0x9f555fa3c84c64c2n,0x2393b86b6f53b151n,0x963877195940eabdn,0x96283ee2a88effe3n,0xbe5e1e2553863992n,0x2b0199fc2c85b8aan,0x0eb72ddc81c52ca2n]));update(w){this.sha512.update(w)}digest(){let w=new Uint8Array(32);return this.sha512.putDigest(w),w}}class Ww{data;constructor(w){this.data=w}tokenType(){if("token_type"in this.data&&typeof this.data.token_type==="string")return this.data.token_type;throw new Error("Missing or invalid 'token_type' field")}accessToken(){if("access_token"in this.data&&typeof this.data.access_token==="string")return this.data.access_token;throw new Error("Missing or invalid 'access_token' field")}accessTokenExpiresInSeconds(){if("expires_in"in this.data&&typeof this.data.expires_in==="number")return this.data.expires_in;throw new Error("Missing or invalid 'expires_in' field")}accessTokenExpiresAt(){return new Date(Date.now()+this.accessTokenExpiresInSeconds()*1000)}hasRefreshToken(){return"refresh_token"in this.data&&typeof this.data.refresh_token==="string"}refreshToken(){if("refresh_token"in this.data&&typeof this.data.refresh_token==="string")return this.data.refresh_token;throw new Error("Missing or invalid 'refresh_token' field")}hasScopes(){return"scope"in this.data&&typeof this.data.scope==="string"}scopes(){if("scope"in this.data&&typeof this.data.scope==="string")return this.data.scope.split(" ");throw new Error("Missing or invalid 'scope' field")}idToken(){if("id_token"in this.data&&typeof this.data.id_token==="string")return this.data.id_token;throw new Error("Missing or invalid field 'id_token'")}}function I2(w){let z=h5(new TextEncoder().encode(w));return C4(z)}function v5(){let w=new Uint8Array(32);return crypto.getRandomValues(w),C4(w)}function p5(){let w=new Uint8Array(32);return crypto.getRandomValues(w),C4(w)}function L(w,z){let U=new Request(w,{method:"POST",body:z});return U.headers.set("Content-Type","application/x-www-form-urlencoded"),U.headers.set("Accept","application/json"),U.headers.set("User-Agent","arctic"),U}function K(w,z){let U=new TextEncoder().encode(`${w}:${z}`);return i5(U)}async function G(w){let z;try{z=await fetch(w)}catch($){throw new I6($)}let U;try{U=await z.json()}catch{throw new Error("Failed to parse response body")}if(typeof U!=="object"||U===null)throw new Error("Unexpected response body data");if("error"in U&&typeof U.error==="string")throw H7(U);return new Ww(U)}async function B2(w){let z;try{z=await fetch(w)}catch($){throw new I6($)}if(z.ok&&z.body===null)return;let U;try{U=await z.json()}catch{throw new Error("Failed to parse response body")}if(typeof U!=="object"||U===null)throw new Error("Unexpected response body data");if("error"in U&&typeof U.error==="string")throw H7(U)}function H7(w){let z;if("error"in w&&typeof w.error==="string")z=w.error;else throw new Error("Invalid error response");let U=null,$=null,_=null;if("error_description"in w&&typeof w.error_description==="string")U=w.error_description;if("error_uri"in w&&typeof w.error_uri==="string")$=w.error_uri;if("state"in w&&typeof w.state==="string")_=w.state;return new I4(z,U,$,_)}class I6 extends Error{constructor(w){super("Failed to send request",{cause:w})}}class I4 extends Error{code;description;uri;state;constructor(w,z,U,$){super(`OAuth request error: ${w}`);this.code=w,this.description=z,this.uri=U,this.state=$}}class Xw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=w+"/oauth2/authorize",this.tokenEndpoint=w+"/oauth2/token",this.tokenRevocationEndpoint=w+"/oauth2/revoke",this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI),U.set("client_id",this.clientId),U.set("client_secret",this.clientSecret);let $=L(this.tokenEndpoint,U);return await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(this.tokenEndpoint,z);return await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(this.tokenRevocationEndpoint,z);await B2(U)}}var CA="https://anilist.co/api/v2/oauth/authorize",IA="https://anilist.co/api/v2/oauth/token";class Zw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w){let z=new URL(CA);return z.searchParams.set("response_type","code"),z.searchParams.set("client_id",this.clientId),z.searchParams.set("state",w),z.searchParams.set("redirect_uri",this.redirectURI),z}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(IA,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var G7;(function(w){w[w.Include=0]="Include",w[w.None=1]="None"})(G7||(G7={}));var R7;(function(w){w[w.Required=0]="Required",w[w.Ignore=1]="Ignore"})(R7||(R7={}));function Z6(w){return FA(w,jA,Qw.None)}function FA(w,z,U){let $="";for(let _=0;_<w.byteLength;_+=3){let B=0,q=0;for(let W=0;W<3&&_+W<w.byteLength;W++)B=B<<8|w[_+W],q+=8;for(let W=0;W<4;W++)if(q>=6)$+=z[B>>q-6&63],q-=6;else if(q>0)$+=z[B<<6-q&63],q=0;else if(U===Qw.Include)$+="="}return $}var jA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function o5(w){return KA(w,EA,F4.Ignore)}function KA(w,z,U){let $=new Uint8Array(Math.ceil(w.length/4)*3),_=0;for(let B=0;B<w.length;B+=4){let q=0,W=0;for(let J=0;J<4;J++){if(U===F4.Required&&w[B+J]==="=")continue;if(U===F4.Ignore&&(B+J>=w.length||w[B+J]==="="))continue;if(J>0&&w[B+J-1]==="=")throw new Error("Invalid padding");if(!(w[B+J]in z))throw new Error("Invalid character");q|=z[w[B+J]]<<(3-J)*6,W+=6}if(W<24){let J;if(W===12)J=q&65535;else if(W===18)J=q&255;else throw new Error("Invalid padding");if(J!==0)throw new Error("Invalid padding")}let X=Math.floor(W/8);for(let J=0;J<X;J++)$[_]=q>>16-J*8&255,_++}return $.slice(0,_)}var Qw;(function(w){w[w.Include=0]="Include",w[w.None=1]="None"})(Qw||(Qw={}));var F4;(function(w){w[w.Required=0]="Required",w[w.Ignore=1]="Ignore"})(F4||(F4={}));var EA={"0":52,"1":53,"2":54,"3":55,"4":56,"5":57,"6":58,"7":59,"8":60,"9":61,A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"-":62,_:63};function N7(w){let z=w.split(".");if(z.length!==3)throw new Error("Invalid JWT");let U;try{U=new TextDecoder().decode(o5(z[1]))}catch{throw new Error("Invalid JWT: Invalid base64url encoding")}let $;try{$=JSON.parse(U)}catch{throw new Error("Invalid JWT: Invalid JSON encoding")}if(typeof $!=="object"||$===null)throw new Error("Invalid JWT: Invalid payload");return $}function b7(w,z,U){let $=Z6(new TextEncoder().encode(w)),_=Z6(new TextEncoder().encode(z)),B=Z6(U);return $+"."+_+"."+B}function D7(w,z){let U=Z6(new TextEncoder().encode(w)),$=Z6(new TextEncoder().encode(z)),_=U+"."+$;return new TextEncoder().encode(_)}var kA="https://appleid.apple.com/auth/authorize",VA="https://appleid.apple.com/auth/token";class Jw{clientId;teamId;keyId;pkcs8PrivateKey;redirectURI;constructor(w,z,U,$,_){this.clientId=w,this.teamId=z,this.keyId=U,this.pkcs8PrivateKey=$,this.redirectURI=_}createAuthorizationURL(w,z){let U=new URL(kA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId);let U=await this.createClientSecret();z.set("client_secret",U);let $=L(VA,z);return await G($)}async createClientSecret(){let w=await crypto.subtle.importKey("pkcs8",this.pkcs8PrivateKey,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]),z=Math.floor(Date.now()/1000),U=JSON.stringify({typ:"JWT",alg:"ES256",kid:this.keyId}),$=JSON.stringify({iss:this.teamId,exp:z+300,aud:["https://appleid.apple.com"],sub:this.clientId,iat:z}),_=new Uint8Array(await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},w,D7(U,$)));return b7(U,$,_)}}var fA="https://auth.atlassian.com/authorize",O7="https://auth.atlassian.com/oauth/token";class Yw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(fA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U.searchParams.set("audience","api.atlassian.com"),U.searchParams.set("prompt","consent"),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(O7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(O7,z);return await G(U)}}class Aw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=`https://${w}/authorize`,this.tokenEndpoint=`https://${w}/oauth/token`,this.tokenRevocationEndpoint=`https://${w}/oauth/revoke`,this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z){let U=new URL(this.authorizationEndpoint);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}class Pw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=`https://${w}/application/o/authorize/`,this.tokenEndpoint=`https://${w}/application/o/token/`,this.tokenRevocationEndpoint=`https://${w}/application/o/revoke`,this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var gA="https://bitbucket.org/site/oauth2/authorize",C7="https://bitbucket.org/site/oauth2/access_token";class Sw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w){let z=new URL(gA);return z.searchParams.set("response_type","code"),z.searchParams.set("client_id",this.clientId),z.searchParams.set("state",w),z.searchParams.set("redirect_uri",this.redirectURI),z}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(C7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(C7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var TA="https://account.box.com/api/oauth2/authorize",dA="https://api.box.com/oauth2/token",tA="https://api.box.com/oauth2/revoke";class Mw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(TA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(dA,z);return await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(tA,z);await B2(U)}}var cA="https://www.coinbase.com/oauth/authorize",I7="https://www.coinbase.com/oauth/token",yA="https://api.coinbase.com/oauth/revoke";class Lw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(cA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(I7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(I7,z);return await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(yA,z);await B2(U)}}var iA="https://discord.com/oauth2/authorize",F7="https://discord.com/api/oauth2/token",hA="https://discord.com/api/oauth2/token/revoke";class Hw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(iA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(F7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(F7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(hA,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var nA="https://dribbble.com/oauth/authorize",vA="https://dribbble.com/oauth/token";class Gw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(nA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(vA,z);return await G(U)}}var pA="https://www.dropbox.com/oauth2/authorize",j7="https://api.dropboxapi.com/oauth2/token",oA="https://api.dropboxapi.com/2/auth/token/revoke";class Rw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(pA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(j7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(j7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(oA,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var uA="https://www.facebook.com/v16.0/dialog/oauth",mA="https://graph.facebook.com/v16.0/oauth/access_token";class Nw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(uA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(mA,z);return await G(U)}}var sA="https://www.figma.com/oauth",K7="https://www.figma.com/api/oauth/token";class bw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(sA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(K7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(K7,z);return await G(U)}}var lA="https://appcenter.intuit.com/connect/oauth2",E7="https://oauth.platform.intuit.com/oauth2/v1/tokens/bearer",rA="https://developer.API.intuit.com/v2/oauth2/tokens/revoke";class Dw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(lA);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(E7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(E7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(rA,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var aA="https://github.com/login/oauth/authorize",x7="https://github.com/login/oauth/access_token";class Ow{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(aA);if(U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),this.redirectURI!==null)U.searchParams.set("redirect_uri",this.redirectURI);return U}async validateAuthorizationCode(w){let z=new URLSearchParams;if(z.set("grant_type","authorization_code"),z.set("code",w),this.redirectURI!==null)z.set("redirect_uri",this.redirectURI);let U=L(x7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(x7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}class Cw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=`https://${w}/oauth/authorize`,this.tokenEndpoint=`https://${w}/oauth/token`,this.tokenRevocationEndpoint=`https://${w}/oauth/revoke`,this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z){let U=new URL(this.authorizationEndpoint);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var eA="https://accounts.google.com/o/oauth2/v2/auth",k7="https://oauth2.googleapis.com/token",wP="https://oauth2.googleapis.com/revoke";class Iw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z,U){let $=new URL(eA);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI),U.set("client_id",this.clientId),U.set("client_secret",this.clientSecret);let $=L(k7,U);return await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(k7,z);return await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(wP,z);await B2(U)}}var zP="https://kauth.kakao.com/oauth/authorize",V7="https://kauth.kakao.com/oauth/token";class Fw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(zP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(V7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(V7,z);return await G(U)}}class jw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=w+"/protocol/openid-connect/auth",this.tokenEndpoint=w+"/protocol/openid-connect/token",this.tokenRevocationEndpoint=w+"/protocol/openid-connect/revoke",this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var UP="https://lichess.org/oauth",$P="https://lichess.org/api/token";class Kw{clientId;redirectURI;constructor(w,z){this.clientId=w,this.redirectURI=z}createAuthorizationURL(w,z,U){let $=new URL(UP);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L($P,U);return await G($)}}var _P="https://access.line.me/oauth2/v2.1/authorize",f7="https://api.line.me/oauth2/v2.1/token";class Ew{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z,U){let $=new URL(_P);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI),U.set("client_id",this.clientId),U.set("client_secret",this.clientSecret);let $=L(f7,U);return await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(f7,z);return await G(U)}}var BP="https://linear.app/oauth/authorize",qP="https://api.linear.app/oauth/token";class xw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(BP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(qP,z);return await G(U)}}var WP="https://www.linkedin.com/oauth/v2/authorization",g7="https://www.linkedin.com/oauth/v2/accessToken";class kw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(WP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(g7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(g7,z);return await G(U)}}class Vw{authorizationEndpoint;tokenEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=`https://login.microsoftonline.com/${w}/oauth2/v2.0/authorize`,this.tokenEndpoint=`https://login.microsoftonline.com/${w}/oauth2/v2.0/token`,this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var XP="https://myanimelist.net/v1/oauth2/authorize",T7="https://myanimelist.net/v1/oauth2/token";class fw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U?.redirectURI??null}createAuthorizationURL(w,z){let U=new URL(XP);if(U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),this.redirectURI!==null)U.searchParams.set("redirect_uri",this.redirectURI);return U.searchParams.set("code_challenge_method","plain"),U.searchParams.set("code_challenge",z),U}async validateAuthorizationCode(w,z){let U=new URLSearchParams;if(U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),this.redirectURI!==null)U.set("redirect_uri",this.redirectURI);let $=L(T7,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;if(z.set("grant_type","refresh_token"),z.set("refresh_token",w),this.redirectURI!==null)z.set("redirect_uri",this.redirectURI);let U=L(T7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var ZP="https://api.notion.com/v1/oauth/authorize",QP="https://api.notion.com/v1/oauth/token";class gw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w){let z=new URL(ZP);return z.searchParams.set("response_type","code"),z.searchParams.set("client_id",this.clientId),z.searchParams.set("state",w),z.searchParams.set("redirect_uri",this.redirectURI),z.searchParams.set("owner","user"),z}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(QP,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}class Tw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$,_){let B=`https://${w}/oauth2`;if(z!==null)B=B+`/${z}`;this.authorizationEndpoint=B+"/v1/authorize",this.tokenEndpoint=B+"/v1/token",this.tokenRevocationEndpoint=B+"/v1/revoke",this.clientId=U,this.clientSecret=$,this.redirectURI=_}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w,z){let U=new URLSearchParams;U.set("grant_type","refresh_token"),U.set("refresh_token",w),U.set("scope",z.join(" "));let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var JP="https://osu.ppy.sh/oauth/authorize",d7="https://osu.ppy.sh/oauth/token";class dw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(JP);if(U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),this.redirectURI!==null)U.searchParams.set("redirect_uri",this.redirectURI);return U}async validateAuthorizationCode(w){let z=new URLSearchParams;if(z.set("grant_type","authorization_code"),z.set("code",w),this.redirectURI!==null)z.set("redirect_uri",this.redirectURI);z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(d7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(d7,z);return await G(U)}}var YP="https://www.patreon.com/oauth2/authorize",t7="https://www.patreon.com/api/oauth2/token";class tw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(YP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(t7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(t7,z);return await G(U)}}var AP="https://www.reddit.com/api/v1/authorize",c7="https://www.reddit.com/api/v1/access_token";class cw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(AP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(c7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(c7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var PP="https://apis.roblox.com/oauth/v1/authorize",y7="https://apis.roblox.com/oauth/v1/token",SP="https://apis.roblox.com/oauth/v1/token/revoke";class yw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z,U){let $=new URL(PP);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI),U.set("client_id",this.clientId),U.set("client_secret",this.clientSecret);let $=L(y7,U);return await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(y7,z);return await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(SP,z);await B2(U)}}class iw{authorizationEndpoint;tokenEndpoint;tokenRevocationEndpoint;clientId;clientSecret;redirectURI;constructor(w,z,U,$){this.authorizationEndpoint=`https://${w}/services/oauth2/authorize`,this.tokenEndpoint=`https://${w}/services/oauth2/token`,this.tokenRevocationEndpoint=`https://${w}/services/oauth2/revoke`,this.clientId=z,this.clientSecret=U,this.redirectURI=$}createAuthorizationURL(w,z,U){let $=new URL(this.authorizationEndpoint);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(this.tokenEndpoint,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(this.tokenEndpoint,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(this.tokenRevocationEndpoint,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var MP="https://shikimori.one/oauth/authorize",i7="https://shikimori.one/oauth/token";class hw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w){let z=new URL(MP);return z.searchParams.set("response_type","code"),z.searchParams.set("client_id",this.clientId),z.searchParams.set("state",w),z.searchParams.set("redirect_uri",this.redirectURI),z}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(i7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(i7,z);return await G(U)}}var LP="https://slack.com/openid/connect/authorize",HP="https://slack.com/api/openid.connect.token";class nw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(LP);if(U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),this.redirectURI!==null)U.searchParams.set("redirect_uri",this.redirectURI);return U}async validateAuthorizationCode(w){let z=new URLSearchParams;if(z.set("grant_type","authorization_code"),z.set("code",w),this.redirectURI!==null)z.set("redirect_uri",this.redirectURI);let U=L(HP,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var GP="https://accounts.spotify.com/authorize",h7="https://accounts.spotify.com/api/token";class vw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(GP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(h7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(h7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var RP="https://www.strava.com/oauth/authorize",n7="https://www.strava.com/oauth/token";class pw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(RP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(n7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(n7,z);return await G(U)}}var NP="https://v5api.tiltify.com/oauth/authorizeze",v7="https://v5api.tiltify.com/oauth/token";class ow{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(NP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(v7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(v7,z);return await G(U)}}var bP="https://www.tumblr.com/oauth2/authorize",p7="https://api.tumblr.com/v2/oauth2/token";class uw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(bP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(p7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(p7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var DP="https://id.twitch.tv/oauth2/authorize",o7="https://id.twitch.tv/oauth2/token";class mw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(DP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(o7,z);return await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(o7,z);return await G(U)}}var OP="https://twitter.com/i/oauth2/authorize",u7="https://api.twitter.com/2/oauth2/token",CP="https://api.twitter.com/2/oauth2/revoke";class sw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z,U){let $=new URL(OP);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(u7,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(u7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(CP,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var IP="https://oauth.vk.com/authorize",FP="https://oauth.vk.com/access_token";class lw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(IP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(FP,z);return await G(U)}}var jP="https://api.workos.com/sso/authorize",KP="https://api.workos.com/sso/token";class rw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w){let z=new URL(jP);return z.searchParams.set("response_type","code"),z.searchParams.set("client_id",this.clientId),z.searchParams.set("state",w),z.searchParams.set("redirect_uri",this.redirectURI),z}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(KP,z);return await G(U)}}var EP="https://api.login.yahoo.com/oauth2/request_auth",m7="https://api.login.yahoo.com/oauth2/get_token";class aw{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(EP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI);let U=L(m7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(m7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var xP="https://oauth.yandex.com/authorize",s7="https://oauth.yandex.com/token";class ew{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(xP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(s7,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(s7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}}var kP="https://zoom.us/oauth/authorize",l7="https://zoom.us/oauth/token",VP="https://zoom.us/oauth/revoke";class w8{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z,U){let $=new URL(kP);$.searchParams.set("response_type","code"),$.searchParams.set("client_id",this.clientId),$.searchParams.set("state",w),$.searchParams.set("scope",U.join(" ")),$.searchParams.set("redirect_uri",this.redirectURI);let _=I2(z);return $.searchParams.set("code_challenge_method","S256"),$.searchParams.set("code_challenge",_),$}async validateAuthorizationCode(w,z){let U=new URLSearchParams;U.set("grant_type","authorization_code"),U.set("code",w),U.set("code_verifier",z),U.set("redirect_uri",this.redirectURI);let $=L(l7,U),_=K(this.clientId,this.clientSecret);return $.headers.set("Authorization",`Basic ${_}`),await G($)}async refreshAccessToken(w){let z=new URLSearchParams;z.set("grant_type","refresh_token"),z.set("refresh_token",w);let U=L(l7,z),$=K(this.clientId,this.clientSecret);return U.headers.set("Authorization",`Basic ${$}`),await G(U)}async revokeToken(w){let z=new URLSearchParams;z.set("token",w);let U=L(VP,z),$=K(this.clientId,this.clientSecret);U.headers.set("Authorization",`Basic ${$}`),await B2(U)}}var fP="https://api.intra.42.fr/oauth/authorize",gP="https://api.intra.42.fr/oauth/token";class z8{clientId;clientSecret;redirectURI;constructor(w,z,U){this.clientId=w,this.clientSecret=z,this.redirectURI=U}createAuthorizationURL(w,z){let U=new URL(fP);return U.searchParams.set("response_type","code"),U.searchParams.set("client_id",this.clientId),U.searchParams.set("state",w),U.searchParams.set("scope",z.join(" ")),U.searchParams.set("redirect_uri",this.redirectURI),U}async validateAuthorizationCode(w){let z=new URLSearchParams;z.set("grant_type","authorization_code"),z.set("code",w),z.set("redirect_uri",this.redirectURI),z.set("client_id",this.clientId),z.set("client_secret",this.clientSecret);let U=L(gP,z);return await G(U)}}function u5(w){try{return N7(w)}catch(z){throw new Error("Invalid ID token",{cause:z})}}var j4={AmazonCognito:Xw,AniList:Zw,Apple:Jw,Atlassian:Yw,Auth0:Aw,Authentik:Pw,Bitbucket:Sw,Box:Mw,Coinbase:Lw,Discord:Hw,Dribbble:Gw,Dropbox:Rw,Facebook:Nw,Figma:bw,Intuit:Dw,GitHub:Ow,GitLab:Cw,Google:Iw,Kakao:Fw,KeyCloak:jw,Lichess:Kw,Line:Ew,Linear:xw,LinkedIn:kw,MicrosoftEntraId:Vw,MyAnimeList:fw,Notion:gw,Okta:Tw,Osu:dw,Patreon:tw,Reddit:cw,Roblox:yw,Salesforce:iw,Shikimori:hw,Slack:nw,Spotify:vw,Strava:pw,Tiltify:ow,Tumblr:uw,Twitch:mw,Twitter:sw,VK:lw,WorkOS:rw,Yahoo:aw,Yandex:ew,Zoom:w8,FortyTwo:z8},r7=Object.keys(j4).reduce((w,z)=>{return w[z.toLowerCase()]=z,w},{}),K4={AmazonCognito:new URL("https://{region}.amazonaws.com/{userPoolId}/.well-known/openid-configuration"),AniList:new URL("https://graphql.anilist.co"),Apple:new URL("https://appleid.apple.com/auth/token"),Atlassian:new URL("https://api.atlassian.com/me"),Auth0:new URL("https://{your_domain}/userinfo"),Authentik:new URL("https://{your_domain}/api/v1/user/me"),Bitbucket:new URL("https://api.bitbucket.org/2.0/user"),Box:new URL("https://api.box.com/2.0/users/me"),Coinbase:new URL("https://api.coinbase.com/v2/user"),Discord:new URL("https://discord.com/api/users/@me"),Dribbble:new URL("https://api.dribbble.com/v2/user"),Dropbox:new URL("https://api.dropboxapi.com/2/users/get_current_account"),Facebook:new URL("https://graph.facebook.com/me"),Figma:new URL("https://api.figma.com/v1/me"),Intuit:new URL("https://accounts.platform.intuit.com/v1/openid_connect/userinfo"),GitHub:new URL("https://api.github.com/user"),GitLab:new URL("https://gitlab.com/api/v4/user"),Google:new URL("https://www.googleapis.com/userinfo/v2/me"),Kakao:new URL("https://kapi.kakao.com/v2/user/me"),KeyCloak:new URL("https://{your_domain}/auth/realms/{realm}/protocol/openid-connect/userinfo"),Lichess:new URL("https://lichess.org/api/account"),Line:new URL("https://api.line.me/v2/profile"),Linear:new URL("https://api.linear.app/v1/me"),LinkedIn:new URL("https://api.linkedin.com/v2/me"),MicrosoftEntraId:new URL("https://graph.microsoft.com/v1.0/me"),MyAnimeList:new URL("https://myanimelist.net/v1/users/@me"),Notion:new URL("https://api.notion.com/v1/users/me"),Okta:new URL("https://{yourOktaDomain}/oauth2/v1/userinfo"),Osu:new URL("https://osu.ppy.sh/api/v2/me"),Patreon:new URL("https://www.patreon.com/api/oauth2/v2/identity"),Reddit:new URL("https://oauth.reddit.com/api/v1/me"),Roblox:new URL("https://apis.roblox.com/users/v1/users/me"),Salesforce:new URL("https://login.salesforce.com/services/oauth2/userinfo"),Shikimori:new URL("https://shikimori.one/api/users/whoami"),Slack:new URL("https://slack.com/api/users.identity"),Spotify:new URL("https://api.spotify.com/v1/me"),Strava:new URL("https://www.strava.com/api/v3/athlete"),Tiltify:new URL("https://tiltify.com/api/v3/user"),Tumblr:new URL("https://api.tumblr.com/v2/user/info"),Twitch:new URL("https://api.twitch.tv/helix/users"),Twitter:new URL("https://api.twitter.com/2/users/me"),VK:new URL("https://api.vk.com/method/users.get"),WorkOS:new URL("https://api.workos.com/sso/profile"),Yahoo:new URL("https://api.login.yahoo.com/openid/v1/userinfo"),Yandex:new URL("https://login.yandex.ru/info"),Zoom:new URL("https://api.zoom.us/v2/users/me"),FortyTwo:new URL("https://api.intra.42.fr/v2/me")},a7={AmazonCognito:new URL("https://cognito-idp.{region}.amazonaws.com/{userPoolId}"),AniList:new URL("https://anilist.co/api/v2/oauth/authorize"),Apple:new URL("https://appleid.apple.com"),Atlassian:new URL("https://auth.atlassian.com"),Auth0:new URL("https://{your_domain}.auth0.com"),Authentik:new URL("https://{your_domain}"),Bitbucket:new URL("https://bitbucket.org/site/oauth2/authorize"),Box:new URL("https://account.box.com/api/oauth2/authorize"),Coinbase:new URL("https://www.coinbase.com/oauth/authorize"),Discord:new URL("https://discord.com/api/oauth2/authorize"),Dribbble:new URL("https://dribbble.com/oauth/authorize"),Dropbox:new URL("https://www.dropbox.com/oauth2/authorize"),Facebook:new URL("https://www.facebook.com/v12.0/dialog/oauth"),Figma:new URL("https://www.figma.com/oauth"),Intuit:new URL("https://appcenter.intuit.com/connect/oauth2"),GitHub:new URL("https://github.com/login/oauth/authorize"),GitLab:new URL("https://gitlab.com/oauth/authorize"),Google:new URL("https://accounts.google.com"),Kakao:new URL("https://kauth.kakao.com/oauth/authorize"),KeyCloak:new URL("https://{your_domain}/auth"),Lichess:new URL("https://lichess.org/oauth/authorize"),Line:new URL("https://access.line.me/oauth2/v2.1/authorize"),Linear:new URL("https://linear.app/oauth/authorize"),LinkedIn:new URL("https://www.linkedin.com/oauth/v2/authorization"),MicrosoftEntraId:new URL("https://login.microsoftonline.com/{tenant}/v2.0"),MyAnimeList:new URL("https://myanimelist.net/v1/oauth2/authorize"),Notion:new URL("https://api.notion.com/v1/oauth/authorize"),Okta:new URL("https://{yourOktaDomain}/oauth2/default/v1/authorize"),Osu:new URL("https://osu.ppy.sh/oauth/authorize"),Patreon:new URL("https://www.patreon.com/oauth2/authorize"),Reddit:new URL("https://www.reddit.com/api/v1/authorize"),Roblox:new URL("https://apis.roblox.com/oauth/v1/authorize"),Salesforce:new URL("https://login.salesforce.com/services/oauth2/authorize"),Shikimori:new URL("https://shikimori.one/oauth/authorize"),Slack:new URL("https://slack.com/oauth/v2/authorize"),Spotify:new URL("https://accounts.spotify.com/authorize"),Strava:new URL("https://www.strava.com/oauth/authorize"),Tiltify:new URL("https://tiltify.com/oauth/authorize"),Tumblr:new URL("https://www.tumblr.com/oauth/authorize"),Twitch:new URL("https://id.twitch.tv/oauth2/authorize"),Twitter:new URL("https://api.twitter.com/oauth/authorize"),VK:new URL("https://oauth.vk.com/authorize"),WorkOS:new URL("https://api.workos.com/sso/authorize"),Yahoo:new URL("https://api.login.yahoo.com/oauth2/request_auth"),Yandex:new URL("https://oauth.yandex.com/authorize"),Zoom:new URL("https://zoom.us/oauth/authorize"),FortyTwo:new URL("https://api.intra.42.fr/oauth/authorize")},e7=Object.keys(K4).reduce((w,z)=>{return w[z.toLowerCase()]=z,w},{}),$t=Object.keys(a7).reduce((w,z)=>{return w[z.toLowerCase()]=z,w},{});var w$=({logoutRoute:w="logout",onLogout:z})=>{return new l2().post(`/${w}`,async({error:U,cookie:{user_session_id:$,auth_provider:_}})=>{if(_.value===void 0)return U(401,"No auth provider found");try{return z?.(),$.remove(),_.remove(),new Response("Succesfuly Logged Out",{status:204})}catch(B){if(B instanceof Error)console.error("Failed to refresh token:",B.message);return U(500)}})};var z$=(w)=>{return"refreshAccessToken"in w&&typeof w.refreshAccessToken==="function"};var i1=(w)=>{return Object.keys(j4).map((z)=>z.toLowerCase()).includes(w.toLowerCase())},U$=(w)=>{return Object.keys(K4).includes(w)};var $$=(w)=>{return!0};var _$=({clientProviders:w,revokeRoute:z="revoke",onRevoke:U})=>{return new l2().post(`/${z}/access-token`,async({error:$,cookie:{user_refresh_token:_,auth_provider:B}})=>{if(_.value===void 0)return $(401,"No refresh token found");if(B.value===void 0)return $(401,"No auth provider found");if(!i1(B.value))return $(400,"Invalid provider");let q=B.value.toLowerCase(),{providerInstance:W}=w[q];U?.()})};var F6=()=>{return new l2({name:"sessionStore"}).state({session:{}})};var B$=({statusRoute:w="auth-status",onStatus:z})=>{return new l2().use(F6()).get(`/${w}`,async({error:U,cookie:{user_session_id:$,auth_provider:_},store:{session:B}})=>{try{if($.value===void 0)return new Response(JSON.stringify({user:null}),{headers:{"Content-Type":"application/json"}});if(_.value===void 0)return new Response(JSON.stringify({user:null}),{headers:{"Content-Type":"application/json"}});let q=B[$.value];if(q===void 0)return new Response(JSON.stringify({user:null}),{headers:{"Content-Type":"application/json"}});let W=q.user;return z?.(),new Response(JSON.stringify({user:W}),{headers:{"Content-Type":"application/json"}})}catch(q){if(q instanceof Error)console.error("Failed to get auth status: ",q.message);return U(500)}})};var q$=({clientProviders:w,refreshRoute:z="refresh",onRefresh:U})=>{return new l2().post(`/${z}`,async({error:$,cookie:{user_refresh_token:_,auth_provider:B}})=>{if(_.value===void 0)return $(401,"No refresh token found");if(B.value===void 0)return $(401,"No auth provider found");let q=B.value.toLowerCase(),{providerInstance:W}=w[q];if(!z$(W))return $(401,"Provider is not refreshable");try{let X=await W.refreshAccessToken(_.value);return U?.(),new Response("Token refreshed",{status:204})}catch(X){if(X instanceof Error)console.error("Failed to refresh token:",X.message);return $(500)}})};var W$=({clientProviders:w,authorizeRoute:z="authorize",onAuthorize:U})=>{return new l2().get(`/${z}/:provider`,({error:$,redirect:_,cookie:{state:B,code_verifier:q,auth_provider:W,redirect_url:X},params:{provider:J},headers:Q})=>{if(J===void 0)return $(400,"Provider is required");if(!i1(J))return $(400,"Invalid provider");try{let P=J.toLowerCase(),{providerInstance:N,scopes:Z,searchParams:O}=w[P],C=Q.referer||"/";X.set({value:C,secure:!0,sameSite:"lax",path:"/",httpOnly:!0,maxAge:600}),W.set({value:J,secure:!0,sameSite:"lax",path:"/",httpOnly:!0,maxAge:600});let b=p5();B.set({value:b,secure:!0,sameSite:"lax",path:"/",httpOnly:!0,maxAge:600});let I,k;if(N.createAuthorizationURL.toString().includes("codeVerifier"))k=v5(),q.set({value:k,secure:!0,sameSite:"lax",path:"/",httpOnly:!0,maxAge:600}),I=N.createAuthorizationURL(b,k,Z);else I=N.createAuthorizationURL(b,Z);return O.forEach(([j,v])=>{I.searchParams.set(j,v)}),U?.(),_(I.toString())}catch(P){if(P instanceof Error)console.error("Failed to validate authorization code:",P.message);return $(500)}})};var X$=({clientProviders:w,callbackRoute:z="authorize/callback",onCallback:U,getUser:$,createUser:_})=>{return new l2().use(F6()).get(`/${z}`,async({error:B,redirect:q,store:{session:W},cookie:{state:X,code_verifier:J,redirect_url:Q,user_session_id:P,auth_provider:N},query:{code:Z,state:O}})=>{if(!Z||!X.value)return B(400,"Invalid callback request");if(O!==X.value)return B(400,"Invalid state mismatch");if(N.value===void 0)return B(401,"No auth provider found");if(!i1(N.value))return B(400,"Invalid provider");let C=N.value.toLowerCase(),{providerInstance:b}=w[C];try{let I;if(X.remove(),b.validateAuthorizationCode.toString().includes("codeVerifier")){if(!J.value)return B(400,"Code verifier not found and is required");I=await b.validateAuthorizationCode(Z,J.value),J.remove()}else I=await b.validateAuthorizationCode(Z);let k=u5(I.idToken()),j=N.value,v=await $?.({decodedIdToken:k,authProvider:j});if(v===null||v===void 0)v=await _?.({decodedIdToken:k,authProvider:j});let y=crypto.randomUUID();if(!$$(v))return B(500,"Invalid user schema");W[y]={user:v,expiresAt:Date.now()+86400000},P.set({value:y,secure:!0,httpOnly:!0,sameSite:"lax"}),U?.();let H2=Q.value??"/";return q(H2)}catch(I){if(I instanceof Error)console.error("Failed to validate authorization code:",I.message);return B(500)}})};var Z$=()=>{return new l2().use(F6()).derive(({store:{session:w},cookie:{user_session_id:z},error:U})=>{return{protectRoute:async($,_)=>{if(z.value===void 0)return _?.()??U(401,"No session ID found");if(w[z.value]===void 0)return _?.()??U(401,"No session found");return $()}}}).as("plugin")};var nt=({config:w,authorizeRoute:z,callbackRoute:U,logoutRoute:$,statusRoute:_,refreshRoute:B,revokeRoute:q,onAuthorize:W,onCallback:X,onStatus:J,onRefresh:Q,onLogout:P,onRevoke:N,createUser:Z,getUser:O})=>{let C=Object.entries(w).reduce((b,[I,k={}])=>{let j=I.toLowerCase(),v=r7[j],y=e7[j];if(!i1(v))return console.error(`Provider ${I} is not supported`),b;let H2=j4[v],Y2;if(U$(y))Y2=K4[y];let{credentials:A2=[],scopes:q2=[],searchParams:l=[]}=k,K2=new H2(...A2);return b[j]={providerInstance:K2,scopes:q2,searchParams:l,userInfoURL:Y2},b},{});return new l2().error("OAUTH2_REQUEST_ERROR",I4).error("ARCTIC_FETCH_ERROR",I6).use(w$({logoutRoute:$,onLogout:P})).use(_$({clientProviders:C,revokeRoute:q,onRevoke:N})).use(B$({statusRoute:_,onStatus:J})).use(q$({clientProviders:C,refreshRoute:B,onRefresh:Q})).use(W$({clientProviders:C,authorizeRoute:z,onAuthorize:W})).use(X$({clientProviders:C,callbackRoute:U,onCallback:X,getUser:O,createUser:Z})).use(Z$()).as("plugin")};export{nt as absoluteAuth};
